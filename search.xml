<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[React native - Push Notification (Firebase)]]></title>
    <url>%2F2020%2F06%2F04%2F2020-06-04%2F</url>
    <content type="text"><![CDATA[How to add Push Notification in your project? I use firebase to send cloud message by Push Notification. First of all you click the website “https://rnfirebase.io/&quot; , and click menu “Cloud Messaging” Installation# Install &amp; setup the app moduleyarn add @react-native-firebase/app# Install the messaging moduleyarn add @react-native-firebase/messaging# If you&apos;re developing your app using iOS, run this commandcd ios/ &amp;&amp; pod install iOS SetupAppDelegate.m @import Firebase;@interface AppDelegate () &lt;FIRMessagingDelegate&gt;@end@implementation AppDelegate- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions&#123; [FIRApp configure]; [application registerForRemoteNotifications]; [FIRMessaging messaging].delegate = self;&#125;- (void) messaging:(FIRMessaging *)messaging didReceiveRegistrationToken:(NSString *)fcmToken &#123; NSLog(@"FCM registration token: %@", fcmToken); // Notify about received token. NSDictionary *dataDict = [NSDictionary dictionaryWithObject:fcmToken forKey:@"token"]; [[NSNotificationCenter defaultCenter] postNotificationName: @"FCMToken" object:nil userInfo:dataDict]; // TODO: If necessary send token to application server. // Note: This callback is fired at each app startup and whenever a new token is generated.&#125;- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error &#123; NSLog(@"error: %@", error);&#125; Android Setup/appName/android/app/src/main/AndroidManifest.xml &lt;service android:name=".MyFirebaseMessagingService" android:exported="false"&gt; &lt;intent-filter&gt; &lt;action android:name="com.google.firebase.MESSAGING_EVENT" /&gt; &lt;/intent-filter&gt;&lt;/service&gt; /android/app/src/main/java/com/appName/MyFirebaseMessagingService.java package com.stylepedia;import com.google.firebase.messaging.FirebaseMessagingService;import com.google.firebase.messaging.RemoteMessage;import android.util.Log;public class MyFirebaseMessagingService extends FirebaseMessagingService &#123; private final String TAG = "FCMDemo"; @Override public void onMessageReceived(RemoteMessage remoteMessage) &#123; // TODO(developer): Handle FCM messages here. Log.d(TAG, "From: " + remoteMessage.getFrom()); if (remoteMessage.getData().size() &gt; 0) &#123; Log.d(TAG, "Message data payload: " + remoteMessage.getData()); &#125; // Check if message contains a notification payload. if (remoteMessage.getNotification() != null) &#123; Log.d(TAG, "Message Notification Body: " + remoteMessage.getNotification().getBody()); &#125; // Also if you intend on generating your own notifications as a result of a received FCM // message, here is where that should be initiated. See sendNotification method below. &#125; private void sendRegistrationToServer(String token) &#123; // TODO: Implement this method to send token to your app server. &#125; @Override public void onNewToken(String token) &#123; Log.d(TAG, "From: " + token); sendRegistrationToServer(token); &#125;&#125; React NativeYou can get token by this function, if the device didn’t open Push Notification, you won’t get the token, so you make sure that the user have opened the notifications. import messaging from '@react-native-firebase/messaging'if (!messaging().isDeviceRegisteredForRemoteMessages) &#123; messaging().registerDeviceForRemoteMessages()&#125;messaging().getToken().then(fcmToken =&gt; &#123; if (fcmToken) &#123; console.warn(fcmToken) if (Platform.OS === 'ios') &#123; this.iosTokenNetWork(fcmToken) &#125; else &#123; this.androidTokenNetWork(fcmToken) &#125; &#125; else &#123; console.warn('user doesn t have a device token yet') // user doesn't have a device token yet &#125;&#125;) You can use this function to check if user open the push notification switch in user’s device. messaging().requestPermission().then((response: any) =&gt; &#123; //&#125;// if user click allow app push notification on pop-up，I can get token by function: messaging().requestPermission().then((response: any) =&gt; &#123; if (!messaging().isDeviceRegisteredForRemoteMessages) &#123; messaging().registerDeviceForRemoteMessages() &#125; messaging().getToken() .then(fcmToken =&gt; &#123; if (fcmToken) &#123; if (Platform.OS === 'ios') &#123; this.iosTokenNetWork(fcmToken) &#125; else &#123; this.androidTokenNetWork(fcmToken) &#125; &#125; else &#123; console.warn('user doesn t have a device token yet') // user doesn't have a device token yet &#125; &#125;)&#125;) You can click Push notification and go to another page when the App is in the background. messaging().setBackgroundMessageHandler(async remoteMessage =&gt; &#123; if (remoteMessage) &#123; appsFlyer.trackEvent("Open_notification") analytics().logEvent('Open_notification', &#123; value: '', &#125;); if (remoteMessage.data.send_user_history_id) &#123; this.pushRequest(remoteMessage.data.send_user_history_id) &#125; if (remoteMessage.data.url === "MixMatch") &#123; this.props.navigation.push('MyClosetDetailPage', &#123; product_id: remoteMessage.data.push_id, returnPage: 'Tabs', &#125;) &#125; if (remoteMessage.data.url === "StreetSnap") &#123; this.timer = setTimeout(() =&gt; &#123; this.props.navigation.navigate('PushlookbookStreetSnapPage', &#123; streetId: remoteMessage.data.push_id, returnPage: 'Tabs', &#125;) &#125;, 500); &#125; &#125;&#125;); You can click Push notification and go to another page when the App is closed messaging() .getInitialNotification() .then(remoteMessage =&gt; &#123; if (remoteMessage) &#123; appsFlyer.trackEvent("Open_notification") analytics().logEvent('Open_notification', &#123; value: '', &#125;); // alert(JSON.stringify(remoteMessage) ) if (remoteMessage.data.url === "MixMatch") &#123; this.timer = setTimeout(() =&gt; &#123; this.props.navigation.push('MyClosetDetailPage', &#123; product_id: remoteMessage.data.push_id, returnPage: 'Tabs', &#125;) &#125;, 500); &#125; if (remoteMessage.data.url === "StreetSnap") &#123; this.timer = setTimeout(() =&gt; &#123; this.props.navigation.navigate('PushlookbookStreetSnapPage', &#123; streetId: remoteMessage.data.push_id, returnPage: 'Tabs', &#125;) &#125;, 500); &#125; &#125;&#125;) Create Notification Service ExtensionIf I want to send an iOS Push Notification with picture to my iPhone, I have to add the iOS Push Notification with Notification Service Extension. In the Xcode menu, go to File &gt; New &gt; Target. Select the Notification Service Extension. Gives the name the Extension service and click the finish button. and enable Push Notification and App Group capabilities in iOS App target. NotificationService.h #import &lt;UserNotifications/UserNotifications.h&gt;@interface NotificationService : UNNotificationServiceExtension@end NotificationService.m#import "NotificationService.h"@import Firebase;@interface NotificationService ()@property (nonatomic, strong) void (^contentHandler)(UNNotificationContent *contentToDeliver);@property (nonatomic, strong) UNMutableNotificationContent *bestAttemptContent;@end@implementation NotificationService- (void)didReceiveNotificationRequest:(UNNotificationRequest *)request withContentHandler:(void (^)(UNNotificationContent * _Nonnull))contentHandler &#123; self.contentHandler = contentHandler; self.bestAttemptContent = [request.content mutableCopy]; // Modify the notification content here... if (self.bestAttemptContent.title) &#123; self.bestAttemptContent.title = [NSString stringWithFormat:@"%@", self.bestAttemptContent.title]; &#125; [[FIRMessaging extensionHelper] populateNotificationContent:self.bestAttemptContent withContentHandler:contentHandler];&#125;- (void)serviceExtensionTimeWillExpire &#123; // Called just before the extension will be terminated by the system. // Use this as an opportunity to deliver your "best attempt" at modified content, otherwise the original push payload will be used. self.contentHandler(self.bestAttemptContent);&#125;@end The format of Push Notification Service be sent by ServerThe content of data can be added or deleted with costume way. if your android device click the push notification bar, and then the app is not opened, the problem must be caused by the format of Push Notification Service. iOS as well. &#123; &quot;message&quot;: &#123; &quot;notification&quot;: &#123; &quot;title&quot;: &quot;title&quot;, &quot;body&quot;: &quot;message content&quot; &#125;, &quot;token&quot;: &quot;fi7FrXMCFeQ:APA91bEZ3CCZEu6NJCzPNyOXq3QoGuCgZ_NZ6pSkuvAYM-VKTvfj1FbnBQKimHaOVqWv_4FD_eGZn1CcfNRf2Ve6X4_mYNwmgI99A1ngxcnY6oyjXTcNRsdIh7YD3SizhRHoTbIXcn-8&quot;, &quot;data&quot;: &#123; &quot;image_url&quot;: &quot;&quot;, &quot;push_type&quot;: &quot;0&quot;, &quot;type&quot;: &quot;0&quot;, &quot;url&quot;: &quot;MixMatch&quot;, &quot;push_id&quot;: &quot;6587588&quot;, &quot;send_user_history_id&quot;: &quot;&quot; &#125;, &quot;apns&quot;: &#123; &quot;headers&quot;: &#123; &quot;apns-priority&quot;: &quot;10&quot; &#125;, &quot;payload&quot;: &#123; &quot;aps&quot;: &#123; &quot;badge&quot;: 1, &quot;mutable-content&quot;: 1 &#125; &#125;, &quot;fcm_options&quot;: &#123; &quot;image&quot;: &quot;&quot; &#125; &#125; &#125;&#125; Detecting that notification is open or closed when app is in foreground or background.if we need to detect when our app is coming to the foreground or when it comes to background, the AppState will help me to do it so easy: import NotificationManager from 'react-native-check-notification-enable'constructor(props) &#123; super(props); this.state = &#123; loginShow: false, loginStatus: false, isEnabled: false, &#125; this.flage = false&#125;componentDidMount() &#123; AppState.addEventListener('change',this._handleAppStateChange) this._navListener = this.props.navigation.addListener('didFocus', () =&gt; &#123; if (Platform.OS === 'ios') &#123; messaging().requestPermission().then((response: any) =&gt; &#123; if (response === 1) &#123; this.setState(prevState =&gt; (&#123; isEnabled: true &#125;)) &#125; else &#123; this.setState(prevState =&gt; (&#123; isEnabled: false &#125;)) &#125; &#125;) &#125; else &#123; NotificationManager.areNotificationsEnabled().then((e)=&gt;&#123; if (e === true) &#123; this.setState(prevState =&gt; (&#123; isEnabled: true &#125;)) &#125; else &#123; this.setState(prevState =&gt; (&#123; isEnabled: false &#125;)) &#125; &#125;).catch((e)=&gt;&#123; this.setState(prevState =&gt; (&#123; isEnabled: false &#125;)) &#125;) &#125; &#125;)&#125;_handleAppStateChange = (nextAppState) =&gt; &#123; if (nextAppState != null &amp;&amp; nextAppState === 'active') &#123; //如果是true ，表示从后台进入了前台 ，请求数据，刷新页面。或者做其他的逻辑 if (this.flage) &#123; if (Platform.OS === 'ios') &#123; messaging().requestPermission().then((response: any) =&gt; &#123; if (response === 1) &#123; this.setState(prevState =&gt; (&#123; isEnabled: true &#125;)) &#125; else &#123; this.setState(prevState =&gt; (&#123; isEnabled: false &#125;)) &#125; &#125;) &#125; else &#123; NotificationManager.areNotificationsEnabled().then((e) =&gt; &#123; if (e === true) &#123; this.setState(prevState =&gt; (&#123; isEnabled: true &#125;)) &#125; else &#123; this.setState(prevState =&gt; (&#123; isEnabled: false &#125;)) &#125; &#125;).catch((e) =&gt; &#123; this.setState(prevState =&gt; (&#123; isEnabled: false &#125;)) &#125;) &#125; &#125; this.flage = false; &#125; else if (nextAppState != null &amp;&amp; nextAppState === 'background') &#123; this.flage = true; &#125;&#125;_handleAppStateChange = (nextAppState) =&gt; &#123; if (nextAppState != null &amp;&amp; nextAppState === 'active') &#123; //如果是true ，表示从后台进入了前台 ，请求数据，刷新页面。或者做其他的逻辑 if (this.flage) &#123; if (Platform.OS === 'ios') &#123; messaging().requestPermission().then((response: any) =&gt; &#123; if (response === 1) &#123; this.setState(prevState =&gt; (&#123; isEnabled: true &#125;)) &#125; else &#123; this.setState(prevState =&gt; (&#123; isEnabled: false &#125;)) &#125; &#125;) &#125; else &#123; NotificationManager.areNotificationsEnabled().then((e) =&gt; &#123; if (e === true) &#123; this.setState(prevState =&gt; (&#123; isEnabled: true &#125;)) &#125; else &#123; this.setState(prevState =&gt; (&#123; isEnabled: false &#125;)) &#125; &#125;).catch((e) =&gt; &#123; this.setState(prevState =&gt; (&#123; isEnabled: false &#125;)) &#125;) &#125; &#125; this.flage = false; &#125; else if (nextAppState != null &amp;&amp; nextAppState === 'background') &#123; this.flage = true; &#125;&#125;]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React native - React-native-image-crop-picker]]></title>
    <url>%2F2020%2F01%2F10%2F2020-01-10%2F</url>
    <content type="text"><![CDATA[Have a function to upload your picture to find similar items about your dress, I find some similar React Native Library with support for camera, multiple images and cropping, however I found React-native-image-crop-picker is so adapt for my project. So I use React-native-image-crop-picker to achieve this function, however some invisible bugs you will change the library code. I wrote it in the article. Installationnpm i react-native-image-crop-picker --savereact-native link react-native-image-crop-pickercd ios &amp;&amp; pod install &amp;&amp; cd ../ UsageSelect from galleryCall single image picker with cropping ImagePicker.openPicker(&#123; width: 300, height: 400, cropping: true&#125;).then(image =&gt; &#123; console.log(image);&#125;); Call multiple image picker ImagePicker.openPicker(&#123; multiple: true&#125;).then(images =&gt; &#123; console.log(images);&#125;); Select from cameraImagePicker.openCamera(&#123; width: 300, height: 400, cropping: true,&#125;).then(image =&gt; &#123; console.log(image);&#125;); Crop pictureImagePicker.openCropper(&#123; path: 'my-file-path.jpg', width: 300, height: 400&#125;).then(image =&gt; &#123; console.log(image);&#125;); UsageWhen I use ImagePicker.openPicker in Android device，I can modify width and height to 1200/1600 as 3:4 ,I saw poor image quality using 300x400, when I upped it to 1200x1600 the quality greatly improved. I’d say the solution is to set a greater height/width, Android can do it very well, but if you use iPhone, when you upped it to 1200x1600 the picture, you found you cropped the area will be error area. In Android it is working properly and I’m able to crop the image. However, on iOS the crop is not properly cropping the required region. So how to resolve it? We will open Xcode, and search the path: Pods - Development Pods - RNImageCropPicker - ImageCropPicker.m We find the func : imageCropViewController:(RSKImageCropViewController *)controller didCropImage:(UIImage *)croppedImage usingCropRect:(CGRect)cropRect and we will change code to delete compressImage void and then the picture will not be compressed, or you can compressed your code by yourself to write OC code. CGSize desiredImageSize = CGSizeMake([[[self options] objectForKey:@&quot;width&quot;] intValue], [[[self options] objectForKey:@&quot;height&quot;] intValue]);UIImage *resizedImage = [croppedImage resizedImageToFitInSize:desiredImageSize scaleIfSmaller:YES];+ ImageResult *imageResult = [self.compression compressImage:croppedImage withOptions:self.options];- ImageResult *imageResult = [self.compression compressImage:resizedImage withOptions:self.options]; I change the iOS Library. it is the whole function changed: - (void)imageCropViewController:(RSKImageCropViewController *)controller didCropImage:(UIImage *)croppedImage usingCropRect:(CGRect)cropRect &#123; // we have correct rect, but not correct dimensions // so resize image CGSize desiredImageSize = CGSizeMake([[[self options] objectForKey:@"width"] intValue], [[[self options] objectForKey:@"height"] intValue]); UIImage *resizedImage = [croppedImage resizedImageToFitInSize:desiredImageSize scaleIfSmaller:YES]; ImageResult *imageResult = [self.compression compressImage:croppedImage withOptions:self.options]; NSString *filePath = [self persistFile:imageResult.data]; if (filePath == nil) &#123; [self dismissCropper:controller selectionDone:YES completion:[self waitAnimationEnd:^&#123; self.reject(ERROR_CANNOT_SAVE_IMAGE_KEY, ERROR_CANNOT_SAVE_IMAGE_MSG, nil); &#125;]]; return; &#125; NSDictionary* exif = nil; if([[self.options objectForKey:@"includeExif"] boolValue]) &#123; exif = [[CIImage imageWithData:imageResult.data] properties]; &#125; [self dismissCropper:controller selectionDone:YES completion:[self waitAnimationEnd:^&#123; self.resolve([self createAttachmentResponse:filePath withExif: exif withSourceURL: self.croppingFile[@"sourceURL"] withLocalIdentifier: self.croppingFile[@"localIdentifier"] withFilename: self.croppingFile[@"filename"] withWidth:imageResult.width withHeight:imageResult.height withMime:imageResult.mime withSize:[NSNumber numberWithUnsignedInteger:imageResult.data.length] withData:[[self.options objectForKey:@"includeBase64"] boolValue] ? [imageResult.data base64EncodedStringWithOptions:0] : nil withRect:cropRect withCreationDate:self.croppingFile[@"creationDate"] withModificationDate:self.croppingFile[@"modificationDate"] ]); &#125;]];&#125; And then, you will keep the width and height: 300 / 400 at iOS Platform, it will work well. Now you have solved this question. You can write just like this. if (Platform.OS === 'ios') &#123; ImagePicker.openPicker(&#123; width: 300, height: 400, compressImageQuality: 1.0, cropping: true &#125;).then(image =&gt; &#123; this.props.navigation.push('LooksUploadImagePage', &#123; imageUrl: image.path, returnPage: 'Tabs', takePhoto: this.takePhoto, isCamera: false &#125;) &#125;); &#125; else &#123; ImagePicker.openPicker(&#123; width: 1200, height: 1600, compressImageQuality: 1.0, cropping: true &#125;).then(image =&gt; &#123; this.props.navigation.push('LooksUploadImagePage', &#123; imageUrl: image.path, returnPage: 'Tabs', takePhoto: this.takePhoto, isCamera: false &#125;) &#125;); &#125;]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React native - contentContainerStyle (Flatlist)]]></title>
    <url>%2F2020%2F01%2F08%2F2020-01-08-11%2F</url>
    <content type="text"><![CDATA[contentContainerStyle Flatlist style defines the outer container of the Flatlist, e.g its height and relations to siblings elements Flatlist contentContainerStyle defines the inner container of it, e.g items alignments, padding, etc Just like this : You can use marginHorizontal: 10 to hold the offset between two picture in renderItem. but you can’t get the offset between picture and left edge. So the best solution is contentContainerStyle can be set this offset to resolve the question. Show my code: avatarListFlatList = props =&gt; &#123; return ( &lt;View style=&#123;&#123;width: ScreenUtil.screenW, height: 106, marginTop: 17&#125;&#125;&gt; &lt;FlatList showsHorizontalScrollIndicator=&#123;false&#125; showsVerticalScrollIndicator=&#123;false&#125; data=&#123;props&#125; contentContainerStyle=&#123;&#123;paddingLeft: 10, paddingRight: 10&#125;&#125; keyExtractor=&#123;(item, index) =&gt; index.toString()&#125; renderItem=&#123;(&#123;item&#125;) =&gt; this.avatarListFlatListItem(item)&#125; horizontal=&#123;true&#125; /&gt; &lt;/View&gt; );&#125;;avatarListFlatListItem = props =&gt; &#123; let randomColor = () =&gt; &#123; var r = Math.floor(Math.random() * 256); var g = Math.floor(Math.random() * 256); var b = Math.floor(Math.random() * 256); return `rgba($&#123;r&#125;,$&#123;g&#125;,$&#123;b&#125;,0.5)`; &#125;; const colorStyles = &#123; backgroundColor: randomColor(), &#125;; return ( &lt;View style=&#123;&#123;height: 106, marginVertical: 0, marginHorizontal: 10&#125;&#125;&gt; &lt;TouchableOpacity activeOpacity=&#123;1.0&#125; onPress=&#123;() =&gt; this.props.navigation.push(&apos;LookbookStarPage&apos;, &#123; data: props.influencer_id, returnPage: &apos;Tabs&apos;, &#125;) &#125;&gt; &lt;Image source=&#123;&#123;uri: props.avatar_local_path&#125;&#125; style=&#123;[ &#123; width: 80, height: 80, borderRadius: 40, &#125;, colorStyles, ]&#125;&gt;&lt;/Image&gt; &lt;Text numberOfLines=&#123;1&#125; style=&#123;&#123; fontSize: 16, width: 80, fontFamily: &apos;HelveticaNeue&apos;, color: &apos;#000000&apos;, marginTop: 8, textAlign: &apos;center&apos;, &#125;&#125;&gt; &#123;props.display_name&#125; &lt;/Text&gt; &lt;/TouchableOpacity&gt; &lt;/View&gt; ); &#125;;]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React native - react-native-share]]></title>
    <url>%2F2020%2F01%2F08%2F2020-01-08-10%2F</url>
    <content type="text"><![CDATA[When we use share function, the best library is react-native-share. React Native Share, a simple tool for share message and file to other apps. Git website: https://github.com/react-native-community/react-native-share/ Installationnpm install react-native-share --savereact-native link react-native-sharecd ios &amp;&amp; pod install &amp;&amp; cd ../ Usageimport Share from 'react-native-share';Share.open(options).then((res) =&gt; &#123; console.log(res) &#125;).catch((err) =&gt; &#123; err &amp;&amp; console.log(err); &#125;);Share.open(&#123;url : ScreenUtil.webUrl + '/streetsnapShareToPhoto?id=' + this.state.data.id, message: "Deja"&#125;).then((res) =&gt; &#123; console.warn(res) &#125;).catch((err) =&gt; &#123; err &amp;&amp; console.warn(err); &#125;); Supported options: Name Type Description url string URL you want to share (only support base64 string in iOS &amp; Android). urls Array[string] array of base64 string you want to share (only support iOS &amp; Android). type string File mime type (optional) message string title string (optional) subject string (optional) email string Email of addressee (optional) excludedActivityTypes string (optional) failOnCancel boolean (defaults to true) Specifies whether promise should reject if user cancels share dialog (optional) showAppsToView boolean (optional) only android filename string only support base64 string in Android These can be assessed using Share.Social property For eg. import Share from 'react-native-share';const shareOptions = &#123; title: 'Share via', message: 'some message', url: 'some share url', social: Share.Social.WHATSAPP, whatsAppNumber: "9199999999" // country code + phone number(currently only works on Android) filename: 'test' , // only for base64 file in Android &#125;;Share.shareSingle(shareOptions); Name Android iOS Windows FACEBOOK yes yes no PAGESMANAGER yes no no WHATSAPP yes yes no INSTAGRAM yes yes no GOOGLEPLUS yes yes no EMAIL yes yes no PINTEREST yes no no SMS yes no no SNAPCHAT yes no no MESSENGER yes no no LINKEDIN yes no no React native share library question - Currently on iOS 13 the app will crashCurrently on iOS 13 the app will crash if you: Open the share sheet Tap something like messages or photos Cancel the dialog Perform any other action This is because shareController.completionWithItemsHandler is called when the dialog box is canceled and currently failureCallback or successCallback will always be called. In the situation above, activityError is nil so successCallback will be called even though completed is false. This leaves us in a state where the callback has been invoked but the ShareSheet is still active, meaning the success or error callback will be invoked again, leading to the crash. This PR adds a check to make sure completed is true before calling successCallback. This way successCallback will only be called when the user has successfully completed an action and the ShareSheet is closed. Only call successCallback when completed is true (iOS 13 crash) shareController.completionWithItemsHandler = ^(NSString *activityType, BOOL completed, __unused NSArray *returnedItems, NSError *activityError) &#123; if (activityError) &#123; failureCallback(activityError); &#125; else if (completed) &#123; successCallback(@[@(completed), RCTNullIfNil(activityType)]); &#125;&#125;;]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React native - DeviceEventEmitter API]]></title>
    <url>%2F2020%2F01%2F08%2F2020-01-08-9%2F</url>
    <content type="text"><![CDATA[We usually use Notification in iOS just like this: NotificationCenter.default.addObserver(self, selector: #selector(forYouRecommendUpdate), name: Notification.Name(rawValue: kDJForYouVCReloadAll), object: nil)NotificationCenter.default.post(name: Notification.Name(rawValue: kDJForYouVCReloadAll), object: nil) However, how to use a Notification in React native? The best way that we achieve it by DeviceEventEmitter UsagePage A to register a Notification import &#123;DeviceEventEmitter&#125; from 'react-native';DeviceEventEmitter.emit('xxxName’,param); Page B to post a Notification componentDidMount()&#123; this.listener =DeviceEventEmitter.addListener('xxxName',function(param)&#123; // use param do something &#125;);&#125;componentWillUnmount()&#123; this.listener.remove();&#125;// we need to remove the listener by componentWillUnmount This simple version // 注册事件通知let param = 'test'DeviceEventEmitter.emit('testName',param);DeviceEventEmitter.emit('event.test', &#123;&#125;);//testName:通知的名称 param：发送的消息（传参）]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React native - My ScreenUtil Library]]></title>
    <url>%2F2020%2F01%2F08%2F2020-01-08-8%2F</url>
    <content type="text"><![CDATA[ScreenUtil.js is my tool JS file, you can use it simple. just like: import * as ScreenUtil from '../../ScreenUtil';style=&#123;&#123; width: ScreenUtil.screenW, height: ((ScreenUtil.screenW - 42) / 2.0 / 3.0) * 4.0, borderRadius: 5, overflow: 'hidden',&#125;&#125;&gt; You can use this file by copying this code. /** * 屏幕工具类 以及一些常用的工具类封装 * ui设计基准,iphone 6 2倍图 * width:750px * height:1334px * @2x */import &#123; PixelRatio, Dimensions, Platform, AsyncStorage&#125; from 'react-native';export let screenW = Dimensions.get('window').width;export let screenH = Dimensions.get('window').height;const fontScale = PixelRatio.getFontScale();export let pixelRatio = PixelRatio.get();//像素密度export const DEFAULT_DENSITY = 2;//px转换成dp//以iphone6为基准,如果以其他尺寸为基准的话,请修改下面的defaultWidth和defaultHeight为对应尺寸即可. 以下为1倍图时const defaultWidth = 375;const defaultHeight = 667;const w2 = defaultWidth / DEFAULT_DENSITY;//px转换成dpconst h2 = defaultHeight / DEFAULT_DENSITY;//缩放比例const _scaleWidth = screenW / defaultWidth;const _scaleHeight = screenH / defaultHeight;// iPhoneXconst X_WIDTH = 375;const X_HEIGHT = 812;export let web_DT = 'https://dt.xx.co/'export let web_DP = 'https://dp.xx.co'export let web_PR = 'https://xx.co'export let webUrl = web_PR/*** 屏幕适配,缩放size , 默认根据宽度适配，纵向也可以使用此方法* 横向的尺寸直接使用此方法* 如：width ,paddingHorizontal ,paddingLeft ,paddingRight ,marginHorizontal ,marginLeft ,marginRight* @param size 设计图的尺寸* @returns &#123;number&#125;*/export function scaleSize(size: Number) &#123; return size * _scaleWidth;&#125;/*** 屏幕适配 , 纵向的尺寸使用此方法应该会更趋近于设计稿* 如：height ,paddingVertical ,paddingTop ,paddingBottom ,marginVertical ,marginTop ,marginBottom* @param size 设计图的尺寸* @returns &#123;number&#125;*/export function scaleHeight(size: Number) &#123; return size * _scaleHeight;&#125;/* 最初版本尺寸适配方案 也许你会更喜欢这个export function scaleSize(size: Number) &#123; let scaleWidth = screenW / w2; let scaleHeight = screenH / h2; let scale = Math.min(scaleWidth, scaleHeight); size = Math.round((size * scale + 0.5)); return size / DEFAULT_DENSITY;&#125;*//*** 设置字体的size（单位px）* @param size 传入设计稿上的px , allowFontScaling 是否根据设备文字缩放比例调整，默认不会* @returns &#123;Number&#125; 返回实际sp*/function setSpText(size: Number, allowFontScaling = false) &#123; const scale = Math.min(_scaleWidth, _scaleHeight); const fontSize = allowFontScaling ? 1 : fontScale; return size * scale / fontSize;&#125;export function setSpText2(size: Number) &#123; let scaleWidth = screenW / w2; let scaleHeight = screenH / h2; let scale = Math.min(scaleWidth, scaleHeight); size = Math.round((size * scale + 0.5)); return size / DEFAULT_DENSITY * fontScale;&#125;/*** 判断是否为iphoneX* @returns &#123;boolean&#125;*/export function isIphoneX() &#123; return ( Platform.OS === 'ios' &amp;&amp; ((screenH === X_HEIGHT &amp;&amp; screenW === X_WIDTH) || (screenH === X_WIDTH &amp;&amp; screenW === X_HEIGHT)) )&#125;/*** 根据是否是iPhoneX返回不同的样式* @param iphoneXStyle* @param iosStyle* @param androidStyle* @returns &#123;*&#125;*/export function ifIphoneX(iphoneXStyle, iosStyle = &#123;&#125;, androidStyle) &#123; if (isIphoneX()) &#123; return iphoneXStyle; &#125; else if (Platform.OS === 'ios') &#123; return iosStyle &#125; else &#123; if (androidStyle) return androidStyle; return iosStyle &#125;&#125;/*** 判断对象，数组，字符串是否为空* @param str (null|undefined|''|' '|[]|&#123;&#125;) 均判断为空，返回true* @returns &#123;boolean&#125;*/export function isEmpty(str) &#123; if (!str) &#123; return true; &#125; else if (typeof str === 'object' &amp;&amp; Object.keys(str).length === 0) &#123; return true; &#125; else if (str.replace(/(^\s*)|(\s*$)/g, "").length === 0) &#123; return true; &#125; return false;&#125;//时间处理Date.prototype.format = function (format) &#123; let date = &#123; "M+": this.getMonth() + 1, "d+": this.getDate(), "h+": this.getHours(), "m+": this.getMinutes(), "s+": this.getSeconds(), "q+": Math.floor((this.getMonth() + 3) / 3), "S+": this.getMilliseconds() &#125;; if (/(y+)/i.test(format)) &#123; format = format.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length)); &#125; for (let k in date) &#123; if (new RegExp("(" + k + ")").test(format)) &#123; format = format.replace(RegExp.$1, RegExp.$1.length === 1 ? date[k] : ("00" + date[k]).substr(("" + date[k]).length)); &#125; &#125; return format;&#125;;//获取时间差 current:1497235409744 当前时间 start:1497235419744 开始时间export function getRemainingime(current: Number, start: Number) &#123; let time = start - current; if (time &lt; 0) &#123; return ["0", "0", "0", "0", "0", "0"]; &#125; let year = Math.floor(time / (365 * 30 * 24 * 3600 * 1000));//年 let month = Math.floor(time / (30 * 24 * 3600 * 1000));//月 let days = Math.floor(time / (24 * 3600 * 1000));//日 let temp1 = time % (24 * 3600 * 1000); let temp2 = temp1 % (3600 * 1000); let minutes = Math.floor(temp2 / (60 * 1000));//分 let hours = Math.floor(temp1 / (3600 * 1000));//时 let temp3 = temp2 % (60 * 1000); let seconds = Math.round(temp3 / 1000);//秒 let strs = [year, toNormal(month), toNormal(days), toNormal(hours), toNormal(minutes), toNormal(seconds)]; return strs;//["0", "0", "2", "7", "33", "30"]0年0月2日 7时33分30秒&#125;//1497235419export function getRemainingimeDistance(distance: Number) &#123; let time = distance * 1000; if (time &lt; 0) &#123; return ["0", "0", "0", "0", "0", "0"]; &#125; let year = Math.floor(time / (365 * 30 * 24 * 3600 * 1000));//年 let month = Math.floor(time / (30 * 24 * 3600 * 1000));//月 let days = Math.floor(time / (24 * 3600 * 1000));//日 let temp1 = time % (24 * 3600 * 1000); let hours = Math.floor(temp1 / (3600 * 1000));//时 let temp2 = temp1 % (3600 * 1000); let minutes = Math.floor(temp2 / (60 * 1000));//分 let temp3 = temp2 % (60 * 1000); let seconds = Math.round(temp3 / 1000);//秒 let strs = [year, toNormal(month), toNormal(days), toNormal(hours), toNormal(minutes), toNormal(seconds)]; // strs.splice(0, 1, String(Number(strs[0]) - 1970));//年 // strs.splice(1, 1, String(Number(strs[1]) - 1)); // strs.splice(2, 1, (Number(strs[2]) - 1) &lt; 10 ? '0' + (Number(strs[2]) - 1) : String(Number(strs[2]) - 1)); // strs.splice(3, 1, (Number(strs[3]) - 8) &lt; 10 ? '0' + (Number(strs[3]) - 8) : String(Number(strs[3]) - 8)); // strs.splice(4, 1, Number(strs[4]) &lt; 10 ? '0' + Number(strs[4]) : String(Number(strs[4]))); // strs.splice(5, 1, Number(strs[5]) &lt; 10 ? '0' + Number(strs[5]) : String(Number(strs[5]))); return strs;//["0", "0", "2", "7", "33", "30"]0年0月2日 7时33分30秒&#125;export function toNormal(time: Number) &#123; return time &gt;= 10 ? time : '0' + time;&#125;//转换成日期export function toDate(timestamp: Number, format1 = 'yyyy-MM-dd hh:mm:ss') &#123; try &#123; if (timestamp &gt; 10000) &#123; let date = new Date(); date.setTime(timestamp); return date.format(format1);//2014-07-10 10:21:12 &#125; else &#123; return ''; &#125; &#125; catch (erro) &#123; return ''; &#125; return '';&#125;//转换成时间搓export function toTimestamp(date: String) &#123; let timestamp = Date.parse(date); return timestamp / 1000; // 1497233827569/1000&#125;//CST时间=&gt;转换成日期yyyy-MM-dd hh:mm:ssexport function getTaskTime(strDate) &#123; if (null == strDate || "" == strDate) &#123; return ""; &#125; let dateStr = strDate.trim().split(" "); let strGMT = dateStr[0] + " " + dateStr[1] + " " + dateStr[2] + " " + dateStr[5] + " " + dateStr[3] + " GMT+0800"; let date = new Date(Date.parse(strGMT)); let y = date.getFullYear(); let m = date.getMonth() + 1; m = m &lt; 10 ? ('0' + m) : m; let d = date.getDate(); d = d &lt; 10 ? ('0' + d) : d; let h = date.getHours(); let minute = date.getMinutes(); minute = minute &lt; 10 ? ('0' + minute) : minute; let second = date.getSeconds(); second = second &lt; 10 ? ('0' + second) : second; return y + "-" + m + "-" + d + " " + h + ":" + minute + ":" + second;&#125;;//1497235419export function getRemainingimeDistance2(distance: Number) &#123; let time = distance; let days = Math.floor(time / (24 * 3600 * 1000)); let temp1 = time % (24 * 3600 * 1000); let hours = Math.floor(temp1 / (3600 * 1000)); let temp2 = temp1 % (3600 * 1000); let minutes = Math.floor(temp2 / (60 * 1000)); if (time &lt;= 60 * 1000) &#123; minutes = 1; &#125; let temp3 = temp2 % (60 * 1000); let seconds = Math.round(temp3 / 1000); return [hours, minutes];//["0", "0", "2", "7", "33", "30"]0年0月2日 7时33分30秒&#125;/*** 存储* @param key* @param value* @param successCallback* @param errorCallback*/export function saveAsyncStorage(key, value, successCallback, errorCallback) &#123; AsyncStorage.setItem(key, value, error =&gt; &#123; if (error) &#123; errorCallback(error); &#125; else &#123; successCallback(); &#125; &#125;)&#125;/*** 取值* @param key* @param successCallback* @param errorCallback*/export function getAsyncStorage(key, successCallback, errorCallback) &#123; AsyncStorage.getItem(key, (error, result) =&gt; &#123; if (error) &#123; errorCallback(error); &#125; else &#123; successCallback(result); &#125; &#125;)&#125;/*** 删除对应key的* @param key* @param successCallback* @param errorCallback*/export function removeAsyncStorage(key, successCallback, errorCallback) &#123; AsyncStorage.getItem(key, error =&gt; &#123; if (error) &#123; errorCallback(error); &#125; else &#123; successCallback(); &#125; &#125;)&#125;]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React native network library - Axios]]></title>
    <url>%2F2020%2F01%2F08%2F2020-01-08-7%2F</url>
    <content type="text"><![CDATA[How to use axios in React Native Axios InterceptorsAxios interceptors allow us to run code or modify the request and response before the request and response is started. In simple words, it allows you write or execute a piece of your code before the request gets sent. Write into a file to package AxiosThe simple example: import axios from 'axios';axios.defaults.retry = 4;axios.defaults.timeout = 10000;axios.defaults.headers.common['x-dejafashion-ua'] = ' 'axios.defaults.headers.common['uid'] = '0'axios.defaults.headers.common['User-Agent'] = 'iphone ... CFNetwork/1098.7 Darwin/19.0.0'axios.defaults.headers.post['Content-Type'] = 'application/json;charset=UTF-8'const stylepedia_DT = 'https://cloud-dt.co/'const stylepedia_DP = 'http://cloud-dp.co/'const stylepedia_PR = 'https://cloud.co/'axios.interceptors.response.use(undefined, function axiosRetryInterceptor(err) &#123; var config = err.config; // If config does not exist or the retry option is not set, reject if(!config || !config.retry) return Promise.reject(err); // Set the variable for keeping track of the retry count config.__retryCount = config.__retryCount || 0; // Check if we've maxed out the total number of retries if(config.__retryCount &gt;= config.retry) &#123; // Reject with the error return Promise.reject(err); &#125; // Increase the retry count config.__retryCount += 1; // Create new promise to handle exponential backoff var backoff = new Promise(function(resolve) &#123; setTimeout(function() &#123; resolve(); &#125;, config.retryDelay || 1); &#125;); // Return the promise in which recalls axios to retry the request return backoff.then(function() &#123; return axios(config); &#125;);&#125;);export default axios.create(&#123; baseURL: stylepedia_DP&#125;); You can use this file to send a Get requestif you want bring params, don’t forget to use params dictionary to add params For example: import API from '../../Network/api' searchInfluencersRequest() &#123; this.setState(&#123; influencerLoading: true, &#125;); API.get('search/influencers', &#123; params: &#123; key: this.state.searchText, &#125; &#125;).then(res =&gt; &#123; if (res.data.ret === 0 &amp;&amp; res.data.data !== null) &#123; this.setState(&#123; influencerArray: res.data.data.infuencer_item_list, influencerLoading: false, &#125;) &#125; else &#123; this.setState(&#123; influencerArray: [], influencerLoading: false, &#125;) &#125; &#125;).catch(error =&gt; &#123; this.setState(&#123; influencerArray: [], influencerLoading: false, &#125;) &#125;) &#125; You can use this file to send a Post requestSend a Post request, the way is really similar to Get request likeStatusRequest(likeStatus, street_id) &#123; API.post('favourite/favourite_status', &#123; street_id: street_id, like: likeStatus ? 1 : 0, &#125;) .then(res =&gt; &#123; likeStatus ? Toast.show('Added to Favourites', &#123; position: Toast.positions.CENTER, &#125;) : Toast.show('Removed from Favourites', &#123; position: Toast.positions.CENTER, &#125;); &#125;) .catch(error =&gt; &#123; console.log(error); &#125;); &#125; Sometimes you want change defaults headerYou can do it like this: API.defaults.headers.common['uid'] = global.uid;API.defaults.headers.common['sig'] = global.sig; How to send an image to server？You need to new a FormData to add your image path 、image type and image rename. don’t forget to change your ‘Content-Type’ headers. uploadImageRequest() &#123; let formData = new FormData(); let file = &#123;uri: ../.../levi.png, type: 'multipart/form-data', name: 'image.png'&#125;; formData.append("file",file); let config = &#123; headers:&#123;'Content-Type':'multipart/form-data'&#125; &#125;; API.post('customer/upload',formData,config) .then(res =&gt; &#123; this.setState(&#123; imageResponseUrl: res.data.url, &#125;) &#125;) .catch(error =&gt; &#123; console.log(error); this.setState(&#123; isLookLoading: false, noRequest: false, &#125;) &#125;); &#125;]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React native - AsyncStorage]]></title>
    <url>%2F2020%2F01%2F08%2F2020-01-08-5%2F</url>
    <content type="text"><![CDATA[Sometimes we have to use some ways to save data to the disk. Just like login status, React Native Async Storage is an asynchronous, unencrypted, persistent, key-value storage system for React Native, It’s used for a variety of scenarios but mainly to store data when your app is not using any cloud services, or when you want to implement features in your app that require data storage. As a React Native developer, you have to know what these limitations are. One limitation of an AsyncStorage API is that on Android the size of the database is set to a default of 6MB limit. Also, AsyncStorage storage is based on SQLite. On iOS, AsyncStorage is backed by native code that stores small values in a Serialized dictionary and larger values in separate files. On Android, AsyncStorage will use either RocksDB or SQLite based on what is available. Thus, it’s important to keep SQLite limitations in mind, too. Also, it’s hard to store complex and nested data structures in the form of key-value pairs. Knowing about these limitations will help you to opt for the best solution when developing a mobile app. I write some simple example for using AsyncStorage Library. Github website: https://github.com/react-native-community/async-storage Installationyarn add @react-native-community/async-storagereact-native link @react-native-community/async-storagecd ios/ &amp;&amp; pod install UsageStore dataThe function is going to save the data. In the below snippet, you’ll find that it uses a parameter name, which, on success, is the value that’s stored. An alert message will be shown when the input data is saved. storeData = async () =&gt; &#123; try &#123; await AsyncStorage.setItem('@storage_Key', 'stored value') &#125; catch (e) &#123; // saving error &#125;&#125;save = async name =&gt; &#123; try &#123; await AsyncStorage.setItem(STORAGE_KEY, name) alert('Data successfully saved!') this.setState(&#123; name &#125;) &#125; catch (e) &#123; alert('Failed to save name.') &#125; &#125; Read dataThere are three asynchronous methods that will help to store the data, retrieve the data, and clear the app data that are stored. Each of these methods is going to utilize the appropriate API method from the AsyncStorage API. Every method in the AsyncStorage API is promise-based; hence, let’s use async/await syntax to follow best practices. getData = async () =&gt; &#123; try &#123; const value = await AsyncStorage.getItem('@storage_Key') if(value !== null) &#123; // value previously stored &#125; &#125; catch(e) &#123; // error reading value &#125;&#125;retrieveData = async () =&gt; &#123; try &#123; const name = await AsyncStorage.getItem(STORAGE_KEY) if (name !== null) &#123; this.setState(&#123; name &#125;) &#125; &#125; catch (e) &#123; alert('Failed to load name.') &#125; &#125; Remove Everythingyou are going to utilize from the AsyncStorage API is called clear(). This deletes everything that is previously saved. It is not recommended to use this method directly if you want to delete only a specific item from the storage. removeEverything = async () =&gt; &#123; try &#123; await AsyncStorage.clear() alert('Storage successfully cleared!') &#125; catch (e) &#123; alert('Failed to clear the async storage.') &#125; &#125; Mostly I use it store global object , for example: the global object file: global.jsvar global = &#123; authorization: null, token:'', uid: 0, sig: '', name: '', avatar: '', email: '', loginStatus: false, emailFillText: '', cacheArray: [], historyArray: [],&#125;;module.exports = global; I read global data by this way: import AsyncStorage from '@react-native-community/async-storage';AsyncStorage.getItem('@global', (errs, result) =&gt; &#123; if (!errs) &#123; if (result !== null) &#123; var jsonValue = JSON.parse(result); let global = require('../../../global'); global.uid = jsonValue.uid; global.sig = jsonValue.sig; global.name = jsonValue.name; global.avatar = jsonValue.avatar; global.email = jsonValue.email; global.loginStatus = jsonValue.loginStatus; global.cacheArray = jsonValue.cacheArray; global.emailFillText = jsonValue.emailFillText global.historyArray = jsonValue.historyArray &#125; else &#123; this.requestGuestNetwork(); &#125; &#125; else &#123; this.requestGuestNetwork(); &#125; &#125;); I store data by this way: let global = require('../../../global');global.uid = res.data.uid ? res.data.uid : 0;global.sig = '';global.name = '';global.email = '';global.avatar = '';global.loginStatus = false;API.defaults.headers.common['uid'] = global.uid;API.defaults.headers.common['sig'] = global.sig;var jsonStr = JSON.stringify(global);AsyncStorage.setItem('@global', jsonStr, function(error) &#123; if (error) &#123; console.log(error); &#125;&#125;); That’s all]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React native - ActionSheetIOS]]></title>
    <url>%2F2020%2F01%2F08%2F2020-01-08-6%2F</url>
    <content type="text"><![CDATA[Sometime, We need to make a actionsheet on Rect native，so the best way to do it by ActionSheetIOS API from react-native, however, ActionSheetIOS can not be used in Android mobile. so we need an unofficial library from github to achieve an Android ActionSheet UI. choosing the github library from beefe/react-native-actionsheet website: https://github.com/beefe/react-native-actionsheet/ Cross platform ActionSheet, This component implements a custom ActionSheet and provides the same way to drawing it on the different platforms (iOS and Android). Actually, In order to keep the best effect, it still uses the ActionSheetIOS on iOS. Installationnpm install react-native-actionsheet –save Usageimport ActionSheet from 'react-native-actionsheet'class Demo extends React.Component &#123; showActionSheet = () =&gt; &#123; this.ActionSheet.show() &#125; render() &#123; return ( &lt;View&gt; &lt;Text onPress=&#123;this.showActionSheet&#125;&gt;Open ActionSheet&lt;/Text&gt; &lt;ActionSheet ref=&#123;o =&gt; this.ActionSheet = o&#125; title=&#123;'Which one do you like ?'&#125; options=&#123;['Apple', 'Banana', 'cancel']&#125; cancelButtonIndex=&#123;2&#125; destructiveButtonIndex=&#123;1&#125; onPress=&#123;(index) =&gt; &#123; /* do something */ &#125;&#125; /&gt; &lt;/View&gt; ) &#125;&#125; My Exampleimport ActionSheet from 'react-native-actionsheet'showActionSheet = () =&gt; &#123; this.ActionSheet.show()&#125;componentDidMount() &#123; this.props.navigation.setParams(&#123; increaseCount: this.showActionSheet &#125;);&#125;&lt;ActionSheet ref=&#123;o =&gt; this.ActionSheet = o&#125; options=&#123;['Similar items', 'Similar looks', 'Cancel']&#125; cancelButtonIndex=&#123;2&#125; destructiveButtonIndex=&#123;5&#125; onPress=&#123;(index) =&gt; &#123; if (index === 0) &#123; this.props.navigation.setParams(&#123; otherParam: 'Similar items' &#125;) &#125; else if (index === 1) &#123; this.props.navigation.setParams(&#123; otherParam: 'Similar looks' &#125;) this.setState(&#123; similarLooks: true, &#125;, () =&gt; &#123; // do something in here &#125;); &#125; &#125;&#125;/&gt; PSIf you don’t need the destructive ( red font ), you should write code destructiveButtonIndex={value} the value that you didn’t write in the options.]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React native network library - Axios]]></title>
    <url>%2F2020%2F01%2F08%2F2020-01-08-4%2F</url>
    <content type="text"><![CDATA[How to use axios in React Native Axios InterceptorsAxios interceptors allow us to run code or modify the request and response before the request and response is started. In simple words, it allows you write or execute a piece of your code before the request gets sent. Write into a file to package AxiosThe simple example: import axios from 'axios';axios.defaults.retry = 4;axios.defaults.timeout = 10000;axios.defaults.headers.common['x-dejafashion-ua'] = ' 'axios.defaults.headers.common['uid'] = '0'axios.defaults.headers.common['User-Agent'] = 'iphone ... CFNetwork/1098.7 Darwin/19.0.0'axios.defaults.headers.post['Content-Type'] = 'application/json;charset=UTF-8'const stylepedia_DT = 'https://cloud-dt.co/'const stylepedia_DP = 'http://cloud-dp.co/'const stylepedia_PR = 'https://cloud.co/'axios.interceptors.response.use(undefined, function axiosRetryInterceptor(err) &#123; var config = err.config; // If config does not exist or the retry option is not set, reject if(!config || !config.retry) return Promise.reject(err); // Set the variable for keeping track of the retry count config.__retryCount = config.__retryCount || 0; // Check if we've maxed out the total number of retries if(config.__retryCount &gt;= config.retry) &#123; // Reject with the error return Promise.reject(err); &#125; // Increase the retry count config.__retryCount += 1; // Create new promise to handle exponential backoff var backoff = new Promise(function(resolve) &#123; setTimeout(function() &#123; resolve(); &#125;, config.retryDelay || 1); &#125;); // Return the promise in which recalls axios to retry the request return backoff.then(function() &#123; return axios(config); &#125;);&#125;);export default axios.create(&#123; baseURL: stylepedia_DP&#125;); You can use this file to send a Get requestif you want bring params, don’t forget to use params dictionary to add params For example: import API from '../../Network/api' searchInfluencersRequest() &#123; this.setState(&#123; influencerLoading: true, &#125;); API.get('search/influencers', &#123; params: &#123; key: this.state.searchText, &#125; &#125;).then(res =&gt; &#123; if (res.data.ret === 0 &amp;&amp; res.data.data !== null) &#123; this.setState(&#123; influencerArray: res.data.data.infuencer_item_list, influencerLoading: false, &#125;) &#125; else &#123; this.setState(&#123; influencerArray: [], influencerLoading: false, &#125;) &#125; &#125;).catch(error =&gt; &#123; this.setState(&#123; influencerArray: [], influencerLoading: false, &#125;) &#125;) &#125; You can use this file to send a Post requestSend a Post request, the way is really similar to Get request likeStatusRequest(likeStatus, street_id) &#123; API.post('favourite/favourite_status', &#123; street_id: street_id, like: likeStatus ? 1 : 0, &#125;) .then(res =&gt; &#123; likeStatus ? Toast.show('Added to Favourites', &#123; position: Toast.positions.CENTER, &#125;) : Toast.show('Removed from Favourites', &#123; position: Toast.positions.CENTER, &#125;); &#125;) .catch(error =&gt; &#123; console.log(error); &#125;); &#125; Sometimes you want change defaults headerYou can do it like this: API.defaults.headers.common['uid'] = global.uid;API.defaults.headers.common['sig'] = global.sig; How to send an image to server？You need to new a FormData to add your image path 、image type and image rename. don’t forget to change your ‘Content-Type’ headers. uploadImageRequest() &#123; let formData = new FormData(); let file = &#123;uri: ../.../levi.png, type: 'multipart/form-data', name: 'image.png'&#125;; formData.append("file",file); let config = &#123; headers:&#123;'Content-Type':'multipart/form-data'&#125; &#125;; API.post('customer/upload',formData,config) .then(res =&gt; &#123; this.setState(&#123; imageResponseUrl: res.data.url, &#125;) &#125;) .catch(error =&gt; &#123; console.log(error); this.setState(&#123; isLookLoading: false, noRequest: false, &#125;) &#125;); &#125;]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React native - Search bar]]></title>
    <url>%2F2020%2F01%2F08%2F2020-01-08-3%2F</url>
    <content type="text"><![CDATA[If you want to use SearchBar on React Native, the best choice is React Native Elements Library. you can use SearchBar module from React Native Elements. The website: https://react-native-elements.github.io/react-native-elements/docs/input.html InstallationStep 1: Install react-native-elements yarn add react-native-elements# or with npmnpm install react-native-elements Step 2: Install react-native-vector-icons # yarnyarn add react-native-vector-icons# or with npmnpm i --save react-native-vector-icons# linkreact-native link react-native-vector-icons Ps: if Xcode run error - react-native-vector-icons iOS run error - ‘Multiple commands produce’ error when building with new Xcode build system The solution way : simply remove duplicate reference fonts in “Copy Bundle Resources” NOT in “[CP] Copy Pods Resources” You can correct to run iOS app. How to use search bar on RNYou can write the SearchBar Label to write a UI code like this: import &#123; SearchBar &#125; from 'react-native-elements';&lt;SearchBar inputContainerStyle=&#123;&#123;backgroundColor: '#EFEFEF'&#125;&#125; inputStyle=&#123;&#123;backgroundColor: '#EFEFEF'&#125;&#125; ref=&#123;search =&gt; (this.search = search)&#125; platform="ios" containerStyle=&#123;&#123;backgroundColor: 'white'&#125;&#125; placeholder="Search" showCancel=&#123;true&#125; searchIcon=&#123;false&#125; onChangeText=&#123;searchText =&gt; this.setState(&#123;searchText&#125;, () =&gt; &#123; this.searchTypeGetRequest(); &#125;) &#125; value=&#123;this.state.searchText&#125; cancelButtonProps=&#123;&#123;color: 'black'&#125;&#125; onCancel=&#123;() =&gt; &#123; this.props.navigation.goBack(); &#125;&#125; returnKeyType="search" onFocus=&#123;() =&gt; &#123; this.setState(prevState =&gt; (&#123; LookbookStreetSnapFlatList: false, &#125;)); &#125;&#125; onClear=&#123;() =&gt; &#123; this.setState(prevState =&gt; (&#123; LookbookStreetSnapFlatList: false, &#125;)); this.search.focus(); &#125;&#125; onSubmitEditing=&#123;() =&gt; &#123; // press the search button, something will be happened &#125;&#125;/&gt; If you use this.search.focus(), you can find a bug when you use iOS device. when you inter the search page, you click the cancel button, the keyboard always be there and didn’t dismiss anytime. So you can use setTimeout void to avoid that action. &lt;SearchBar ref=&#123;search =&gt; this.search = search&#125; .../&gt;if (Platform.OS === 'ios') &#123; this.timer = setTimeout(() =&gt; &#123; this.search.focus(); &#125;, 200);&#125; else &#123; this.search.focus();&#125; About the other detail , you can check the API from RN element library website:]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Week Tips | 2019.12.23 - 2019.12.27]]></title>
    <url>%2F2020%2F01%2F08%2F2020-01-08-1%2F</url>
    <content type="text"><![CDATA[Q1 : Android studio Error “Unsupported Modules Detected: Compilation is not supported for following modules” File -&gt; Invalidate Caches / Restart -&gt; Invalidate Caches &amp; Restart. close Android Studio IDE and delete the .idea directory. delete all .iml files open Android Studio IDE and Sync with Gradle. Q2 : React Native iOS StatusBar background colour is not dark in the dark mode.we will change the file about react native library RCT_ENUM_CONVERTER(UIStatusBarStyle, (@&#123; @"default": @(UIStatusBarStyleDefault), @"light-content": @(UIStatusBarStyleLightContent), @"dark-content": @(@available(iOS 13.0, *) ? UIStatusBarStyleDarkContent : UIStatusBarStyleDefault), &#125;), UIStatusBarStyleDefault, integerValue); Q3 : React native share library question - Currently on iOS 13 the app will crashCurrently on iOS 13 the app will crash if you: Open the share sheet Tap something like messages or photos Cancel the dialog Perform any other action This is because shareController.completionWithItemsHandler is called when the dialog box is canceled and currently failureCallback or successCallback will always be called. In the situation above, activityError is nil so successCallback will be called even though completed is false. This leaves us in a state where the callback has been invoked but the ShareSheet is still active, meaning the success or error callback will be invoked again, leading to the crash. This PR adds a check to make sure completed is true before calling successCallback. This way successCallback will only be called when the user has successfully completed an action and the ShareSheet is closed. Only call successCallback when completed is true (iOS 13 crash) shareController.completionWithItemsHandler = ^(NSString *activityType, BOOL completed, __unused NSArray *returnedItems, NSError *activityError) &#123; if (activityError) &#123; failureCallback(activityError); &#125; else if (completed) &#123; successCallback(@[@(completed), RCTNullIfNil(activityType)]); &#125;&#125;; Q4 : The question about React native share - Android release build doesn’t work with react-native@0.60You can run npx jetify in the current react native directory on the terminal.]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Week Tips | 2019.12.30 - 2019.01.03]]></title>
    <url>%2F2020%2F01%2F08%2F2020-01-08-2%2F</url>
    <content type="text"><![CDATA[Q1 : react-native-vector-icons iOS run error - ‘Multiple commands produce’ error when building with new Xcode build systemThe solution way : simply remove duplicate reference fonts in “Copy Bundle Resources” NOT in “[CP] Copy Pods Resources” You can correct to run iOS app. The problem seems to be caused by the new autolinking feature in React Native 0.60 - the line use_native_modules! in ios/Podfile means when you do pod install, any pods found in node_modules are automatically linked. This means that links to all font files are added to [CP] Copy Pods Resources when you do pod install. If you previously installed react-native-vector-icons manually by adding the font files to Copy Bundle Resources, you then get a “Multiple commands produce…” fatal build error. So to fix the problem, just remove the font files from Copy Bundle Resources, so that they are only in [CP] Copy Pods Resources. Q2 : How can I insert a line break into a component in React Native?This should do it: &lt;Text&gt;Hi~&#123;"\n"&#125;this is a test message.&lt;/Text&gt; {“\n”} can be used in the component in React Native.]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[2019 W1 | 9.16-9.22 | Tips Week Summary]]></title>
    <url>%2F2019%2F09%2F19%2F2019-09-19-1%2F</url>
    <content type="text"><![CDATA[Q1 Make a drop shadow effect on a label in SwiftShow my code: private lazy var titleLabel: UILabel = &#123; let titleLabel = UILabel(frame: .zero) titleLabel.textAlignment = .center titleLabel.lineBreakMode = .byTruncatingTail titleLabel.numberOfLines = 2 titleLabel.font = DJFont.boldHelveticaFont(ofSize: 40) titleLabel.text = " " titleLabel.textColor = UIColor(fromHexString: "FFFFFF") titleLabel.layer.shadowColor = UIColor.black.cgColor titleLabel.layer.shadowRadius = 2.0 titleLabel.layer.shadowOpacity = 0.3 titleLabel.layer.shadowOffset = CGSize(width: 4, height: 4) titleLabel.layer.masksToBounds = false return titleLabel&#125;() Q2 What’s different between string.utf16.count and string.count?if you are coding by objective-c, it’s the same, but by swift, it’s really different. There is a good example : extension String &#123; var length: Int &#123; return self.utf16.count &#125;&#125;let emoji = “😆😆😆😆😆😆”emoji.length // return 12emoji.count // return 6 If you print by string.utf16.count, return 12.but you print by string.count, return 6. Does you make sense? Q3 How to increase line spacing in UILabel in swiftYou can use it by label instance let label = UILabel()let stringValue = "Levi\nCherry\nMandy\n"let attrString = NSMutableAttributedString(string: stringValue)var style = NSMutableParagraphStyle()style.lineSpacing = 24 // change line spacing between paragraph like 36 or 48style.minimumLineHeight = 20 // change line spacing between each line like 30 or 40// Line spacing attributeattrString.addAttribute(NSAttributedStringKey.paragraphStyle, value: style, range: NSRange(location: 0, length: stringValue.characters.count))label.attributedText = attrString Q4 No Accounts with iTunes Connect have been found for the Team?I am going to submit my App to App Store, but I am getting the error: “No accounts with iTunes Connect access have been found for the team…” And I resolved by stackoverflow: Quit Xcode completely and re-open it to resolve the problem. Or Please verify if it’s App Store distribution profile or not. If yes then try to login to Xcode with your apple Id which has access to iTunes Connect or App Store Connect. While validating the archive file please choose the same profile. It should work fine. I resolved it by first way.]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[How to Add "…Read More" to the end of UILabel]]></title>
    <url>%2F2019%2F09%2F19%2F2019-09-19%2F</url>
    <content type="text"><![CDATA[Product RequirementsThere is a UILabel, the number of line are three, if the content is more than content in the UILabel, you have to add “… more” to the end of UILabel, and then you can click the text, the UILabel will be unfolded. just like this pic below : How to solve itAt first, I want to calculate the visible text I can put into this UILabel with the current UILabel size by this fitString function. When I get this visible text, and then I will prepare visible text and all UILabel’s text, if this count is the same, I will display it all text, if not I will display the visible text which will replace the last 8 character with “… more”. I think that this method will resolve most question just like this, but there is a question, if the string just like this: “123\n345\n234\n123\n”, the last 8 character will be replace with “… more”, however, this is wrong, the correct way is that you won’t replace 8 character, just add “… more” to the end of visible text. The correct final string is 123123123 ...more And then I resolve it, but unexpectedly, if the string included some Emoji characters, the visible text characters will be wrong, so you will find some bug in the fitString function. - (NSUInteger)fitString:(NSString *)string intoLabel:(UILabel *)label&#123; UIFont *font = label.font; NSLineBreakMode mode = label.lineBreakMode; CGFloat labelWidth = label.frame.size.width; CGFloat labelHeight = label.frame.size.height; CGSize sizeConstraint = CGSizeMake(labelWidth, CGFLOAT_MAX); if (SYSTEM_VERSION_GREATER_THAN(iOS_7)) &#123; NSDictionary *attributes = @&#123; NSFontAttributeName : font &#125;; NSAttributedString *attributedText = [[NSAttributedString alloc] initWithString:string attributes:attributes]; CGRect boundingRect = [attributedText boundingRectWithSize:sizeConstraint options:NSStringDrawingUsesLineFragmentOrigin context:nil]; &#123; if (boundingRect.size.height &gt; labelHeight) &#123; NSUInteger index = 0; NSUInteger prev; NSCharacterSet *characterSet = [NSCharacterSet whitespaceAndNewlineCharacterSet]; do &#123; prev = index; if (mode == NSLineBreakByCharWrapping) index++; else index = [string rangeOfCharacterFromSet:characterSet options:0 range:NSMakeRange(index + 1, [string length] - index - 1)].location; &#125; while (index != NSNotFound &amp;&amp; index &lt; [string length] &amp;&amp; [[string substringToIndex:index] boundingRectWithSize:sizeConstraint options:NSStringDrawingUsesLineFragmentOrigin attributes:attributes context:nil].size.height &lt;= labelHeight); return prev; &#125; &#125; &#125; else &#123; if ([string sizeWithFont:font constrainedToSize:sizeConstraint lineBreakMode:mode].height &gt; labelHeight) &#123; NSUInteger index = 0; NSUInteger prev; NSCharacterSet *characterSet = [NSCharacterSet whitespaceAndNewlineCharacterSet]; do &#123; prev = index; if (mode == NSLineBreakByCharWrapping) index++; else index = [string rangeOfCharacterFromSet:characterSet options:0 range:NSMakeRange(index + 1, [string length] - index - 1)].location; &#125; while (index != NSNotFound &amp;&amp; index &lt; [string length] &amp;&amp; [[string substringToIndex:index] sizeWithFont:font constrainedToSize:sizeConstraint lineBreakMode:mode].height &lt;= labelHeight); return prev; &#125; &#125; return [string length];&#125; Do you find it? Show my codeextension UILabel &#123; func addTrailing(with trailingText: String, moreText: String, moreTextFont: UIFont, moreTextColor: UIColor) &#123; let readMoreText: String = trailingText + moreText let lengthForVisibleString: Int = self.vissibleTextLength let mutableString: String = self.text! let trimmedString: String? = (mutableString as NSString).substring(to: lengthForVisibleString) if ((self.text?.count)! - lengthForVisibleString) &lt;= 0 &#123; let style = NSMutableParagraphStyle() style.lineSpacing = 4.0 // change line spacing between paragraph like 36 or 48 let answerAttributed = NSMutableAttributedString(string: self.text!, attributes: [NSAttributedString.Key.font: self.font, NSAttributedString.Key.paragraphStyle: style]) self.attributedText = answerAttributed return &#125; let leviTrimmedForReadMore = String(trimmedString ?? "") + String("... more") self.text = leviTrimmedForReadMore let ddlengthForVisibleString: Int = self.vissibleTextLength if ((self.text?.count)! - ddlengthForVisibleString) &lt;= 0 &#123; let trimmedForReadMore: String = trimmedString! + trailingText let style = NSMutableParagraphStyle() style.lineSpacing = 4.0 // change line spacing between paragraph like 36 or 48 let answerAttributed = NSMutableAttributedString(string: trimmedForReadMore, attributes: [NSAttributedString.Key.font: self.font, NSAttributedString.Key.paragraphStyle: style]) let readMoreAttributed = NSMutableAttributedString(string: moreText, attributes: [NSAttributedString.Key.font: moreTextFont, NSAttributedString.Key.foregroundColor: moreTextColor, NSAttributedString.Key.paragraphStyle: style]) answerAttributed.append(readMoreAttributed) self.attributedText = answerAttributed &#125; else &#123; let readMoreLength: Int = (readMoreText.utf16.count) let trimmedForReadMore: String = (trimmedString! as NSString).substring(to: (trimmedString?.utf16.count ?? 0) - readMoreLength) + trailingText let style = NSMutableParagraphStyle() style.lineSpacing = 4.0 // change line spacing between paragraph like 36 or 48 let answerAttributed = NSMutableAttributedString(string: trimmedForReadMore, attributes: [NSAttributedString.Key.font: self.font, NSAttributedString.Key.paragraphStyle: style]) let readMoreAttributed = NSMutableAttributedString(string: moreText, attributes: [NSAttributedString.Key.font: moreTextFont, NSAttributedString.Key.foregroundColor: moreTextColor, NSAttributedString.Key.paragraphStyle: style]) answerAttributed.append(readMoreAttributed) self.attributedText = answerAttributed &#125; &#125; var vissibleTextLength: Int &#123; let font: UIFont = self.font let mode: NSLineBreakMode = self.lineBreakMode let labelWidth: CGFloat = self.frame.size.width let labelHeight: CGFloat = self.frame.size.height let sizeConstraint = CGSize(width: labelWidth, height: CGFloat.greatestFiniteMagnitude) let attributes: [AnyHashable: Any] = [NSAttributedString.Key.font: font] let attributedText = NSAttributedString(string: self.text!, attributes: attributes as? [NSAttributedString.Key : Any]) let boundingRect: CGRect = attributedText.boundingRect(with: sizeConstraint, options: .usesLineFragmentOrigin, context: nil) if boundingRect.size.height &gt; labelHeight &#123; var index: Int = 0 var prev: Int = 0 let characterSet = CharacterSet.whitespacesAndNewlines repeat &#123; prev = index if mode == NSLineBreakMode.byCharWrapping &#123; index += 1 &#125; else &#123; index = (self.text! as NSString).rangeOfCharacter(from: characterSet, options: [], range: NSRange(location: index + 1, length: self.text!.count - index - 1)).location &#125; &#125; while index != NSNotFound &amp;&amp; index &lt; self.text!.count &amp;&amp; (self.text! as NSString).substring(to: index).boundingRect(with: sizeConstraint, options: .usesLineFragmentOrigin, attributes: attributes as? [NSAttributedString.Key : Any], context: nil).size.height &lt;= labelHeight return prev &#125; return self.text!.count &#125;&#125;//You can use itif let biography = model.biography &#123; if biography.count &gt;= 10 &#123; let readmoreFont = DJFont.lightHelveticaFont(ofSize: 16.0) let readmoreFontColor = UIColor(fromHexString: "818181") self.contentLabel.addTrailing(with: "... ", moreText: "more", moreTextFont: readmoreFont!, moreTextColor: readmoreFontColor!) &#125;&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React.js/HTML5和iOS双向通信]]></title>
    <url>%2F2019%2F04%2F07%2F2019-04-07%2F</url>
    <content type="text"><![CDATA[最近，我使用WKWebView和React.js进行双向通信,自己写了React.js嵌入到Native中。 Native操作Web，通过两种方式传值第一种，通过JS传值给Native通过这种方式，可以通过Swift执行DOM操作，顺便说一句，webView.evaluateJavaScript返回脚本执行结果的内容。这个处理程序似乎是在主线程上执行的。 Native调用JS代码方法如下: let str = "payResult(true)" webView.evaluateJavaScript(str) &#123; (result, error) in&#125; Javascript处理逻辑方法如下: payResult = value =&gt; &#123; if (value === true) &#123; console.log('true') this.setState(prevState =&gt; (&#123; pushnotice: '1' &#125;)); &#125; else &#123; console.log('false') this.setState(prevState =&gt; (&#123; pushnotice: '0' &#125;)); &#125;&#125; 如果JS的payResult方法没有调用，那就加上这样一句话window.payResult，有可能被组件屏蔽无法全局调用。 constructor(props) &#123; super(props); window.payResult = this.payResult&#125; 第二种，通过get请求传值通过get请求方式将参数传到js的请求URL链接中。 var url = ""if let webUrl = webUrl &#123; url = webUrl if let uid = userID &#123; url += "?" + "uid=" + uid &#125; if let topicId = topicId &#123; url += "&amp;" + "topic=" + topicId &#125; if isRank == true &#123; url += "&amp;" + "type=2" &#125;&#125; react.js通过URL拼接方式解析传递的参数,方法如下: var params = &#123;&#125;let str = this.props.location.searchlet seg = str.replace(/^\?/, '').split('&amp;')let len = seg.lengthfor (var i = 0; i &lt; len; i++) &#123; if (seg[i]) &#123; let p = seg[i].split('='); params[p[0]] = p[1]; &#125;&#125; 通过这种方式params.uid | param.topic | param.type 来获取参数 Native操作Web，通过两种方式传值Native操作 实例化WKWebViewConfiguration和WKUserContentController,userController在JavaScript的注册处理调用名称。并设置实现WKScriptMessageHandler协议的代理。 let webConfiguration = WKWebViewConfiguration()webConfiguration.preferences = WKPreferences()webConfiguration.preferences.minimumFontSize = 10;webConfiguration.preferences.javaScriptEnabled = true;webConfiguration.preferences.javaScriptCanOpenWindowsAutomatically = false;webConfiguration.userContentController = WKUserContentController()webConfiguration.processPool = WKProcessPool()webConfiguration.userContentController.add(self as WKScriptMessageHandler, name:"pushAction")let webView = WKWebView(frame: .zero, configuration: webConfiguration)webView.scrollView.bounces = falsewebView.scrollView.showsVerticalScrollIndicator = falsewebView.scrollView.showsHorizontalScrollIndicator = false 通过WKScriptMessageHandler协议进行监控 func userContentController(_ userContentController: WKUserContentController, didReceive message: WKScriptMessage) &#123; print(message.name) print(message.body) jsInvokeNativeHandler(message)&#125;func jsInvokeNativeHandler(_ message: WKScriptMessage) &#123; if message.isKind(of: WKScriptMessage.self) &#123; let serialQueue = DispatchQueue(label: "com.test.mySerialQueue") serialQueue.sync &#123; if message.name == "pushAction" &#123; if let dict : NSDictionary = message.body as? NSDictionary &#123; if let content = dict["content"] as? String &#123; self.sendPushNotification(content) &#125; &#125; &#125; &#125;&#125; 关于解析，和Web进行协议，我在H5写的代码通过message传过来的是一个字典类型 {content: ‘…’}。 web端操作H5如何传递方法给native？ 传值方法如下，iOS和Android接受的方法不同，要单独进行处理: window.htmlCallMobileDeja = function(handlerMethod, parameters)&#123; try &#123; var u = navigator.userAgent; var isAndroid = u.indexOf('Android') &gt; -1 || u.indexOf('Adr') &gt; -1 var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/) if (isiOS) &#123; if (window.webkit) &#123; window.webkit.messageHandlers[handlerMethod].postMessage(dic); console.log(handlerMethod) &#125; &#125; else if(isAndroid)&#123; window['JsClient'][handlerMethod](parameters) &#125; else &#123; // &#125; &#125; catch(err) &#123; console.log('The native context does not exist yet'); &#125;&#125;; javascript通过这种方式进行传值 var dic = &#123; 'event_name': event_name + '', 'event_first_param': event_first_param + '', 'event_second_param': event_second_param + '',&#125;window.htmlCallMobileDeja('hideMBP', dic)]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Week Tips(2019.4.1-2019.4.7)]]></title>
    <url>%2F2019%2F04%2F07%2F2019-04-07-1%2F</url>
    <content type="text"><![CDATA[H5 react增加loading页面安装插件:npm i react-loading --save npm web:https://www.npmjs.com/package/react-loading Demo展示页面:https://codesandbox.io/s/mqx0ql55qp 使用方法:&lt;ReactLoading type='spokes' color="#262729" height="0.3rem" width="0.3rem"/&gt; loading样式: 模拟iOS loading样式:html: &lt;div className="SnsRankOther-loadingPic"&gt; &lt;ReactLoading type='spokes' color="#262729" height="0.3rem" width="0.3rem"/&gt;&lt;/div&gt; css: .SnsRankOther-loadingPic &#123; background: rgba(230, 230, 230, 0.479); width: 0.8rem; height: 0.8rem; border-radius: 0.05rem; display: flex; flex-direction: row; align-items: center; justify-content: center;&#125; 效果: iOS pod update后React framework报错问题出现: npm install 后 podupdate， Xcode运行报错，错误提示 React google::logmessage出题。 编译报错提示： log: Undefined symbols for architecture x86_64: &quot;google::LogMessage::LogMessage(char const*, int, int)&quot;, referenced from: facebook::react::CxxNativeModule::invoke(unsigned int, folly::dynamic&amp;&amp;, int)::$_1::operator()() const in CxxNativeModule.o facebook::react::JSException::buildMessage(OpaqueJSContext const*, OpaqueJSValue const*, OpaqueJSString*, char const*) in JSCHelpers.o &quot;double_conversion::DoubleToStringConverter::ToShortestIeeeNumber(double, double_conversion::StringBuilder*, double_conversion::DoubleToStringConverter::DtoaMode) const&quot;, referenced from: double_conversion::DoubleToStringConverter::ToShortest(double, double_conversion::StringBuilder*) const in CxxNativeModule.o &quot;double_conversion::DoubleToStringConverter::ToFixed(double, int, double_conversion::StringBuilder*) const&quot;, referenced from: std::__1::enable_if&lt;(std::is_floating_point&lt;double&gt;::value) &amp;&amp; (IsSomeString&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt;::value), void&gt;::type folly::toAppend&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, double&gt;(double, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;*, double_conversion::DoubleToStringConverter::DtoaMode, unsigned int) in CxxNativeModule.o ... 解决方案:working manually adding DoubleConversion and glog to Link Binary With Libraries of React framework target in @CocoaPods project. UITableView回滚到顶部的几种方法问题: tableview每次回滚是滚到了第一个cell上面，但这个tableview是有表头的。 看了下代码: self.tableview.scrollToRow(at: IndexPath(row: 0, section: 0), at: .top, animated: true) 改成如下方式: self.contentTB.setContentOffset(CGPoint(x: 0, y: 0), animated: true) 问题解决 UITableView回滚到顶部的几个方法： //方法一[self.tableView scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:NO];//方法二[self.tableView setContentOffset:CGPointMake(0,0) animated:NO];//方法三NSIndexPath* indexPat = [NSIndexPath indexPathForRow:0 inSection:0];[self.tableView scrollToRowAtIndexPath:indexPat atScrollPosition:UITableViewScrollPositionBottom animated:YES]; 方法一可以回滚到表头，其他两个方法只是回滚到第一个cell. iOS通过Safari调试H5通过数据线，将手机连接电脑打开手机， Settings - safari - Advanced - Web Inspector 开关打开打开电脑safari，preference - Advanced - Show Develop menu in menu bar 开关打开,如图: 打开电脑safari - Develop bar 中会看到你的手机，如图所示，点击进行调试: 点击web后进入了调试页面，可以进行调试了。 JavaScript 获取时间戳转换美国日期简写的方法：需求: 通过服务端传时间戳显示页面如下: 代码如下, request.data.start_date为时间戳类型，通过js方法转换成美国日期简写的正确的方式 let startDate = new Date(request.data.start_date);let startMonth = startDate.toDateString().split(" ")[1]let startDay = startDate.toDateString().split(" ")[2] + 'th'var date = new Date(request.data.end_date);let endDate = new Date(request.data.end_date);let endMonth = endDate.toDateString().split(" ")[1]let endDay = endDate.toDateString().split(" ")[2] + 'th'dateText = startDay + ' ' + startMonth + ' - ' + endDay + ' ' + endMonth iOS倒计时方法：效果如下: 代码如下 internal var timer: Timer!public var timeFormat = "HH:mm:ss"internal var diffDate: NSDate!internal let date1970 = NSDate(timeIntervalSince1970: 0)internal var fromDate: NSDate = NSDate()internal var currentDate: NSDate = NSDate()internal var range: NSRange!internal var targetTime: TimeInterval = 0internal var currentTime: TimeInterval = 0internal var endOfTimer: Bool &#123; return timeCounted &gt;= currentTime&#125; public var timeCounted: TimeInterval &#123; let timeCounted = NSDate().timeIntervalSince(fromDate as Date) return round(timeCounted &lt; 0 ? 0 : timeCounted)&#125; public var dateFormatter: DateFormatter &#123; let df = DateFormatter() df.locale = Locale(identifier: "zh_CN") df.dateStyle = DateFormatter.Style.medium df.timeStyle = DateFormatter.Style.medium df.dateFormat = timeFormat return df&#125; func updateTimer() &#123; disposeTimer() timer = Timer.scheduledTimer(timeInterval: 1.0, target: self, selector: #selector(updateText), userInfo: nil, repeats: true) RunLoop.current.add(timer, forMode: RunLoop.Mode.common)&#125; func disposeTimer() &#123; if timer != nil &#123; timer.invalidate() timer = nil &#125;&#125;func updateText() &#123; guard diffDate != nil else &#123; return &#125; let date = diffDate.addingTimeInterval(round(timeCounted * -1)) as Date let formattedText = timeCounted &lt; 0 ? dateFormatter.string(from: date1970.addingTimeInterval(0) as Date) : self.surplusTime(date) countdownLabel.text = " - Result will be revealed in " + formattedText countdownLabel.sizeToFit() setNeedsDisplay() if endOfTimer &#123; disposeTimer() countdownLabel.text = " " countdownLabel.sizeToFit() &#125;&#125; func surplusTime(_ to1970Date: Date) -&gt; String &#123; let calendar = Calendar.init(identifier: .gregorian); var labelText = timeFormat; let comp = calendar.dateComponents([.day, .hour, .minute, .second], from: NSDate(timeIntervalSince1970: 0) as Date, to: to1970Date) if let day = comp.day ,let _ = timeFormat.range(of: "dd")&#123; labelText = labelText.replacingOccurrences(of: "dd", with: String.init(format: "%02ld", day)) &#125; if let hour = comp.hour ,let _ = timeFormat.range(of: "hh")&#123; labelText = labelText.replacingOccurrences(of: "hh", with: String.init(format: "%02ld", hour)) &#125; if let hour = comp.hour ,let _ = timeFormat.range(of: "HH")&#123; labelText = labelText.replacingOccurrences(of: "HH", with: String.init(format: "%02ld", hour)) &#125; if let minute = comp.minute ,let _ = timeFormat.range(of: "mm")&#123; labelText = labelText.replacingOccurrences(of: "mm", with: String.init(format: "%02ld", minute)) &#125; if let second = comp.second ,let _ = timeFormat.range(of: "ss")&#123; labelText = labelText.replacingOccurrences(of: "ss", with: String.init(format: "%02ld", second)) &#125; return labelText&#125; HTML5 写 REM.js文件方法 复制下面这段代码到你的页面的头部的script标签的最前面。如果是react js，直接放在index.js文件里： import './rem.js' 根据设计稿大小，调整里面的最后两个参数值。 使用1rem=100px转换你的设计稿的像素，例如设计稿上某个块是100px 300px,换算成rem则为1rem 3rem。 var win = window;var doc = win.document;var docEl = doc.documentElement;var tid;function refreshRem()&#123; var width = docEl.clientWidth; var height = docEl.clientHeight; if(width&gt;=640)&#123; docEl.style.fontSize = '100px'; &#125;else&#123; docEl.style.fontSize = 100 * (width / 375) + 'px'; &#125;&#125;win.addEventListener('resize', function() &#123; clearTimeout(tid); tid = setTimeout(refreshRem, 300);&#125;, false);win.addEventListener('pageshow', function(e) &#123; if (e.persisted) &#123; clearTimeout(tid); tid = setTimeout(refreshRem, 300); &#125;&#125;, false);refreshRem();]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[《剑指offer》 数组中出现次数超过一半的数字]]></title>
    <url>%2F2019%2F03%2F13%2F2019-03-13%2F</url>
    <content type="text"><![CDATA[OJ addresswebsite : 《剑指offer》数组中出现次数超过一半的数字 Description数组中有一个数字出现的次数超过数组长度的一半，请找出这个数字。例如输入一个长度为9的数组{1,2,3,2,2,2,5,4,2}。由于数字2在数组中出现了5次，超过数组长度的一半，因此输出2。如果不存在则输出0。 Solution in C++ (one solution)class Solution &#123;public: int MoreThanHalfNum_Solution(vector&lt;int&gt; numbers) &#123; int n = numbers.size(); if (n==0) return 0; sort(numbers.begin(), numbers.end()); int mid = numbers[n/2]; int count = 0; for (int i=0;i&lt;n;++i) &#123; if (numbers[i] == mid) ++count; &#125; if (count*2 &gt; n) return mid; return 0; &#125;&#125;; Solution in C++ (two solution)class Solution &#123;public: int MoreThanHalfNum_Solution(vector&lt;int&gt; numbers) &#123; int n = numbers.size(); if (n==0) return 0; int num = numbers[0]; int count = 1; for (int i=0;i&lt;n;++i) &#123; if (numbers[i] == num) ++count; else --count; if (count == 0) &#123; num = numbers[i]; count = 1; &#125; &#125; count = 0; for (int i=0;i&lt;n;++i) &#123; if (numbers[i] == num) ++count; &#125; if (count*2 &gt; n) return num; return 0; &#125;&#125;; My IdeaSolution one ： 数组排序后，如果符合条件的数存在，则一定是数组中间那个数（比如：1，2，2，2，3；或2，2，2，3，4；或2，3，4，4，4等等） Solution two ： 采用阵地攻守的思想： 第一个数字作为第一个士兵，守阵地；count = 1； 遇到相同元素，count++; 遇到不相同元素，即为敌人，同归于尽,count–；当遇到count为0的情况，又以新的i值作为守阵地的士兵，继续下去，到最后还留在阵地上的士兵，有可能是主元素。 再加一次循环，记录这个士兵的个数看是否大于数组一般即可]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[《剑指offer》 字符串的排列]]></title>
    <url>%2F2019%2F03%2F12%2F2019-03-11-1%2F</url>
    <content type="text"><![CDATA[OJ addresswebsite : 《剑指offer》字符串的排列 Description输入一个字符串,按字典序打印出该字符串中字符的所有排列。例如输入字符串abc,则打印出由字符a,b,c所能排列出来的所有字符串abc,acb,bac,bca,cab和cba。 Solution in C++class Solution &#123;public: vector&lt;string&gt; result; vector&lt;string&gt; Permutation(string str) &#123; if (!str.length()) return result; dfs(str, 0); sort(result.begin(), result.end()); return result; &#125; void dfs(string str, int begin) &#123; if (begin == str.length()) &#123; result.push_back(str); return; &#125; for (int i=begin;str[i]!='\0';++i) &#123; if (i!=begin &amp;&amp; str[begin]==str[i]) &#123; continue; &#125; swap(str[begin], str[i]); dfs(str, begin+1); swap(str[begin], str[i]); &#125; &#125;&#125;; My Idea全排列类型题目。解题思路就是，利用dfs深度遍历，看图说话。图已经很明显了。 把第一个字符与当前字符以及后面每一个字符依次交换，获得首位后面的字符串再次进行递归； 递归的出口，就是只剩一个字符的时候，递归的循环过程，就是从每个子串的第二个字符开始依次与第一个字符交换，然后继续处理子串。 由于全排列就是从第一个数字起，每个数分别与它后面的数字交换，我们先尝试加个这样的判断——如果一个数与后面的数字相同那么这两个数就不交换了。例如abb，第一个数与后面两个数交换得bab，bba。然后abb中第二个数和第三个数相同，就不用交换了。]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[《剑指offer》 二叉搜索树与双向链表]]></title>
    <url>%2F2019%2F03%2F11%2F2019-03-11%2F</url>
    <content type="text"><![CDATA[OJ addresswebsite : 《剑指offer》二叉搜索树与双向链表 Description输入一棵二叉搜索树，将该二叉搜索树转换成一个排序的双向链表。要求不能创建任何新的结点，只能调整树中结点指针的指向。 Solution in C++class Solution &#123;public: TreeNode* Convert(TreeNode* pRootOfTree) &#123; TreeNode *pRootOfDuLInk = pRootOfTree; if (!pRootOfTree) return pRootOfTree; while(pRootOfDuLInk-&gt;left) pRootOfDuLInk = pRootOfDuLInk-&gt;left; TreeNode* pre = 0; traverse(pRootOfTree, pre); return pRootOfDuLInk; &#125; void traverse(TreeNode* node, TreeNode* &amp;pre) &#123; if (node-&gt;left) &#123; traverse(node-&gt;left, pre); &#125; node-&gt;left = pre; if (pre) &#123; pre-&gt;right = node; &#125; pre = node; if (node-&gt;right) &#123; traverse(node-&gt;right, pre); &#125; &#125;&#125;; My Idea解题思路就是，二叉搜索树的中序遍历就是从小到大的一次排序, 需要记录一个pre指针： 通过中序排序，每个节点的next为中序排序的下一个节点。 记录一个pre指针，主要是记录中序排序的前一个节点，这样节点可以通僧哦left指针指向pre指针，就可以完成双链表的操作了。 pre-&gt;right=current; current-&gt;left=pre。 需要保存指向上个节点,需要对指针的引用 TreeNode&amp; ,了解下 &amp; 的连接用法 extension: That is taking the parameter by reference. So in the first case you are taking a pointer parameter by reference so whatever modification you do to the value of the pointer is reflected outside the function. Second is the simlilar to first one with the only difference being that it is a double pointer. See this example: void pass_by_value(int* p)&#123; //Allocate memory for int and store the address in p p = new int;&#125;void pass_by_reference(int*&amp; p)&#123; p = new int;&#125;int main()&#123; int* p1 = NULL; int* p2 = NULL; pass_by_value(p1); //p1 will still be NULL after this call pass_by_reference(p2); //p2 's value is changed to point to the newly allocate memory return 0;&#125;]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[css实现div高度根据自适应宽度（百分比）调整]]></title>
    <url>%2F2019%2F03%2F10%2F2019-03-10-3%2F</url>
    <content type="text"><![CDATA[问题用的最多的标签Div却不能做到自动调整（要么从父级继承，要么自行指定px，要么给百分比。但是这个百分比是根据父级的高度来计算的，根本不是根据元素自身的宽度，那么就做不到Div的宽高达成一定的比例 解决方法通过padding来实现此功能，宽度的自适应是根据viewport的width来调整的，比如{width：50%}就是浏览器可视区域的50%，resize之后也会自动调整。padding是根据viewport的width来调整的，巧就巧在padding-top和padding-bottom也是根据viewport的width来计算的，那么通过设置这个属性就能跟width达成某种比例关系了 我们首先指定元素的width为父级元素的50%,这个时候我们再设置element的height为0，padding-bottom:50%; 实例: .element{width:50%;height:0;padding-bottom:50%;background:#eee;} element就就变成了一个宽度50%，高度为0（但是他有50%width的padding-bottom）的正方形了。 思考与总结这样就可以通过设定父级元素father、我们需要的元素element、子级元素datail来实现任意情况下该需求]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[《剑指offer》 复杂链表的复制]]></title>
    <url>%2F2019%2F03%2F10%2F2019-03-10-2%2F</url>
    <content type="text"><![CDATA[OJ addresswebsite : 《剑指offer》 复杂链表的复制 Description输入一个复杂链表（每个节点中有节点值，以及两个指针，一个指向下一个节点，另一个特殊指针指向任意一个节点），返回结果为复制后复杂链表的head。（注意，输出结果中请不要返回参数中的节点引用，否则判题程序会直接返回空） Solution in C++struct RandomListNode &#123; int label; struct RandomListNode *next, *random; RandomListNode(int x) : label(x), next(NULL), random(NULL) &#123; &#125;&#125;;class Solution &#123;public: RandomListNode* Clone(RandomListNode* pHead) &#123; if (!pHead) return 0; map&lt;RandomListNode *, RandomListNode *&gt; nodeMap; RandomListNode *currentNode = pHead; RandomListNode *newHead = 0; RandomListNode *preNode = 0; RandomListNode *newNode = 0; while(currentNode)&#123; newNode = new RandomListNode(currentNode-&gt;label); nodeMap[currentNode] = newNode; if (!preNode) newHead = newNode; else preNode-&gt;next = newNode; preNode = newNode; currentNode = currentNode-&gt;next; &#125; currentNode = pHead; newNode = newHead; while (currentNode &amp;&amp; newNode) &#123; RandomListNode *randNode = currentNode-&gt;random; RandomListNode *newRandNode = nodeMap[randNode]; newNode-&gt;random = newRandNode; currentNode = currentNode-&gt;next; newNode = newNode-&gt;next; &#125; return newHead; &#125;&#125;; My Idea链表类型题目，主要考察对map和链表的结合应用: 链表有两个节点，第一个是随机节点，第二个是Next节点 第一次遍历，通过next遍历一遍链表，并且copy一份新的链表（包含next指针，但clone的链表random的指针为空），通过map把copy前的链表和Copy后的链表进行一一映射。 第二次遍历链表，并将copy后的链表的random指针指向原链表中对应的节点的copy节点，这个节点怎么找到？通过map集合查找。 map作用就是快速查找random指向的元素。]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Leetcode 22 Generate Parentheses]]></title>
    <url>%2F2019%2F03%2F10%2F2019-03-10-1%2F</url>
    <content type="text"><![CDATA[OJ addressLeetcode website : 22. Generate Parentheses DescriptionGiven n pairs of parentheses, write a function to generate all combinations of well-formed parentheses. For example, given n = 3, a solution set is: [ &quot;((()))&quot;, &quot;(()())&quot;, &quot;(())()&quot;, &quot;()(())&quot;, &quot;()()()&quot;] My Solution in C#include &lt;stdlib.h&gt;#include &lt;string.h&gt;int top = 0;char** generateParenthesis(int n, int* returnSize) &#123; if (n &lt;= 0) &#123; *returnSize = 0; return 0; &#125; top = 0; char **returnArray = calloc(3000, sizeof(char *)); char * newArray = calloc(n*2+1, sizeof(char)); dfs(0, n, returnArray, newArray, 0, 0); *returnSize = top; return returnArray;&#125;void dfs(int index, int n, char **returnArray, char *newArray, int left, int right) &#123; if (right == n) &#123; newArray[n*2] = '\0'; char *array = calloc(n*2+1, sizeof(char)); memcpy(array, newArray, n*2+1); returnArray[top++] = array; return; &#125; if (left &lt; n) &#123; newArray[index] = '('; dfs(index+1, n, returnArray, newArray, left+1, right); &#125; if (right &lt; left) &#123; newArray[index] = ')'; dfs(index+1, n, returnArray, newArray, left, right+1); &#125;&#125; My Idea这是一个很经典的DFS题目，比较easy，但是要注意几个坑： 数组要足够大，不然会报Runtime错误，不要仅仅通过n n n * n以为数组就这么大，其实比你认为的要大很多。 使用memcpy方法时，一定要记得长度和数组长度相同，不然会报错。]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React Native页面出现内存增加不释放问题]]></title>
    <url>%2F2019%2F03%2F10%2F2019-03-10%2F</url>
    <content type="text"><![CDATA[分享解决的一个Bug ， 从iOS页面进入React Native页面会出现内存增加不释放问题，每次进入退出就会一直增加，然后看了下我们的方法，如下: override func loadView() &#123; let url = URL(string: "http://localhost:8081/index.bundle?platform=ios") let rcRootView = RCTRootView(bundleURL: url, moduleName: "RN", initialProperties: properties, launchOptions: nil) view = rcRootView&#125; 对，标准的加载RN页面的方式，但是这样加载，就会出现内存泄漏的情况，是因为RTCBridge内存并没有释放掉导致的这个bug. RCTBridge: 所有的模块都保存在内存的静态常量区域，这个内存空间是在RCTBridge中被初始化的。因此这些模块属于全局的变量，可以在不同的bridge之间共享。 因此每次返回到iOS页面的时候，你要及时将RTCBridge释放掉。 代码如下： var rtcBridge : RCTBridge? init() &#123; super.init(nibName: nil, bundle: nil)&#125; deinit &#123; rtcBridge?.invalidate() rtcBridge = nil;&#125; override func loadView() &#123; let url = URL(string: "http://localhost:8081/index.bundle?platform=ios") let rcRootView = RCTRootView(bundleURL: url, moduleName: "RN", initialProperties: properties, launchOptions: nil) rtcBridge = rcRootView?.bridge view = rcRootView&#125; 这样就可以将内存释放了，这个问题，看上去解决很简单，但不知道多少人不理解原理，而出现这个内存泄漏，而且是很严重的内存泄漏，来回切换几次，程序就会crush了。所以要学学Bottom-up.]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS APP打包上传到App Store的流程]]></title>
    <url>%2F2019%2F03%2F08%2F2019-03-08%2F</url>
    <content type="text"><![CDATA[上传前的操作发版前自测DP生产环境是否有问题 自测所有功能点是否有问题 修改DejaFashion以及PushService的 Version | Build 例如: Build 按照时间方式显示: 2019 | 0305 | 11:10 选择正确的Archivearchive -&gt; Build Configuration : 选择AppStoreDis Upload to App Store.按照默认的选项上传 Next - Upload 上传成功，没有警告才能继续下一步。 iTunes Connect 上传app打开 https://itunesconnect.apple.com/ 按照如下选择广告以及出口信息，并且提交到Appstore审核就OK. 上传成功后的操作master分支合并到release中点击 New merge request 将master merge到 release分支中 打上Tag在gitlab中打一个tags，名称为版本号加日期: ios_7.4.1.190308，后面备注修改内容 Xcode archive appstore dis / dev在Xcode上面archive两个包，分别是AppStoreDis | AppStoreDev 上传到 HockeyApp dev的包需要选择的选项为 Release type: Enterprise Upload file types: .ipa &amp; .dSYM.zip Notify Testers 主要用于测试人员测试线上版本 dis的包需要选择的选项为 Release type: Store Upload file types: Only .dSYM.zip Aviailable in Store dis发布在HockeyApp主要用于crush的实时监控.]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[CS50's Mobile App Development with React Native (Lecture three)]]></title>
    <url>%2F2019%2F02%2F07%2F2019-02-07-1%2F</url>
    <content type="text"><![CDATA[Lecture three: React, Props, State这一节主要都是例子以及Demo，按照上课的顺序，将Code说下 SetSet 集合的定义，constructor是构建起，类似init，初始化的传参。this相当于oc中的self. arr.push(val) 在数组中插入val这个元素arr.filter(x =&gt; x!==val) 过滤掉和val相同的value.arr.includes(x) 是否包含x这个valuearr.length 返回数组长度. 这是讲解类的构造，Set类的功能是插入的元素，不能有相同的元素。 // Set should maintain a list of unique values and should support add, delete, and inclusion// It should also have the ability to get its sizeclass Set &#123; constructor(arr) &#123; this.arr = arr &#125; add(val) &#123; if (!this.has(val)) this.arr.push(val) &#125; delete(val) &#123; this.arr = this.arr.filter(x =&gt; x !== val) &#125; has(val) &#123; return this.arr.includes(val) &#125; get size() &#123; return this.arr.length &#125;&#125;const s = new Set([1,2,3,4,5])// trying to add the same value shouldn't works.add(1)s.add(1)s.add(1)console.log('s should have 5 members and actually has:', s.size)console.log('s should contain 5:', s.has(5))s.add(6)console.log('s should contain 6:', s.has(6))console.log('s should have 6 members and actually has:', s.size)s.delete(6)console.log('s should no longer contain 6:', !s.has(6))console.log('s should have 5 members and actually has:', s.size) Class Extends类扩展方法如下，通过类名后面增加extends. // We can also extend the native implementation of Set if we wanted to do something// like log on addition or create new methodsclass MySet extends Set &#123; constructor(arr) &#123; super(arr) this.originalArray = arr &#125; add(val) &#123; super.add(val) console.log(`added $&#123;val&#125; to the set!`) &#125; toArray() &#123; return Array.from(this) &#125; reset() &#123; return new MySet(this.originalArray) &#125;&#125;const s = new MySet([1,2,3,4,5])s.add(6)s.add(7)console.log(s.toArray())const reset = s.reset()console.log(reset.toArray()) spread …定义：扩展运算符（ spread ）是三个点（…）。它好比 rest 参数的逆运算，将一个数组转为用逗号分隔的参数序列。 将数组转化为遍历的元素，举例说明： console.log(...[1, 2, 3])// 1 2 3console.log(1, ...[2, 3, 4], 5)// 1 2 3 4 5[...document.querySelectorAll('div')] 可以将数组转化为函数体的参数 function push(array, ...items) &#123; array.push(...items);&#125;function add(x, y) &#123; return x + y;&#125;var numbers = [4, 38];add(...numbers) // 42 扩展运算符与正常的函数参数可以结合使用，非常灵活 function f(v, w, x, y, z) &#123; &#125;var args = [0, 1];f(-1, ...args, 2, ...[3]); 扩展运算符内部调用的是数据结构的 Iterator 接口，因此只要具有 Iterator 接口的对象，都可以使用扩展运算符，比如 Map 结构： let map = new Map([ [1, 'one'], [2, 'two'], [3, 'three'],]);let arr = [...map.keys()] .map()From the classic forloop to the forEach() method, various techniques and methods used to iterate through datasets abound JavaScript. However, one of the more popular methods is the .map() method .map() 类似foreach的枚举，就是讲数组中的每个元素执行一个特定的方法。 举例说明： const sweetArray = [2, 3, 4, 5, 35]const sweeterArray = sweetArray.map(sweetItem =&gt; &#123; return sweetItem * 2&#125;)console.log(sweeterArray) // [4, 6, 8, 10, 70] This can even be simplified further to make it cleaner with: // create a function to useconst makeSweeter = sweetItem =&gt; sweetItem * 2;// we have an arrayconst sweetArray = [2, 3, 4, 5, 35];// call the function we made. more readableconst sweeterArray = sweetArray.map(makeSweeter);console.log(sweeterArray); // [4, 6, 8, 10, 70] 还可以Converting a String to an Array，类似 .split()功能 举个栗子： const name = "Chuloo"const map = Array.prototype.mapconst newName = map.call(name, eachLetter =&gt; &#123; return `$&#123;eachLetter&#125;a`&#125;)console.log(newName) // ["Ca", "ha", "ua", "la", "oa", "oa"] Here’s a good example of a React component. Rendering Lists in JavaScript Libraries, for instance: import React from "react";import ReactDOM from "react-dom";const names = ["john", "sean", "mike", "jean", "chris"];const NamesList = () =&gt; ( &lt;div&gt; &lt;ul&gt;&#123;names.map(name =&gt; &lt;li key=&#123;name&#125;&gt; &#123;name&#125; &lt;/li&gt;)&#125;&lt;/ul&gt; &lt;/div&gt;);const rootElement = document.getElementById("root");ReactDOM.render(&lt;NamesList /&gt;, rootElement); How about handling objects in an array? 就是对象在数组中的遍历应用。 const myUsers = [ &#123; name: 'chuloo', likes: 'grilled chicken' &#125;, &#123; name: 'chris', likes: 'cold beer' &#125;, &#123; name: 'sam', likes: 'fish biscuits' &#125;]const usersByFood = myUsers.map(item =&gt; &#123; const container = &#123;&#125;; container[item.name] = item.likes; container.age = item.name.length * 10; return container;&#125;)console.log(usersByFood);// [&#123;chuloo: "grilled chicken", age: 60&#125;, &#123;chris: "cold beer", age: 50&#125;, &#123;sam: "fish biscuits", age: 30&#125;] React‘s example下面这个也是讲解的一个例子，这个用到了JSX的一些特性，.map()，以及扩展运算…都有用到，是个理解React 很好的例子，可以通过 https://codesandbox.io 直接运行查看网页显示。 import React from 'react';import &#123; render &#125; from 'react-dom';let id = 0const Todo = props =&gt; ( &lt;li&gt; &lt;input type="checkbox" checked=&#123;props.todo.checked&#125; onChange=&#123;props.onToggle&#125; /&gt; &lt;button onClick=&#123;props.onDelete&#125;&gt;delete&lt;/button&gt; &lt;span&gt;&#123;props.todo.text&#125;&lt;/span&gt; &lt;/li&gt;)class App extends React.Component &#123; constructor() &#123; super() this.state = &#123; todos: [], &#125; &#125; addTodo() &#123; const text = prompt("TODO text please!") this.setState(&#123; todos: [ ...this.state.todos, &#123;id: id++, text: text, checked: false&#125;, ], &#125;) &#125; removeTodo(id) &#123; this.setState(&#123; todos: this.state.todos.filter(todo =&gt; todo.id !== id) &#125;) &#125; toggleTodo(id) &#123; this.setState(&#123; todos: this.state.todos.map(todo =&gt; &#123; if (todo.id !== id) return todo return &#123; id: todo.id, text: todo.text, checked: !todo.checked, &#125; &#125;) &#125;) &#125; render() &#123; return ( &lt;div&gt; &lt;div&gt;Todo count: &#123;this.state.todos.length&#125;&lt;/div&gt; &lt;div&gt;Unchecked todo count: &#123;this.state.todos.filter(todo =&gt; !todo.checked).length&#125;&lt;/div&gt; &lt;button onClick=&#123;() =&gt; this.addTodo()&#125;&gt;Add TODO&lt;/button&gt; &lt;ul&gt; &#123;this.state.todos.map(todo =&gt; ( &lt;Todo onToggle=&#123;() =&gt; this.toggleTodo(todo.id)&#125; onDelete=&#123;() =&gt; this.removeTodo(todo.id)&#125; todo=&#123;todo&#125; /&gt; ))&#125; &lt;/ul&gt; &lt;/div&gt; ) &#125;&#125;render(&lt;App /&gt;, document.getElementById('root')); That’s all.]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Convert Dictionary to JSON in Swift4.2]]></title>
    <url>%2F2019%2F02%2F07%2F2019-02-07%2F</url>
    <content type="text"><![CDATA[Sometimes it’s necessary to print out server’s response for debugging purposes. Here’s a function I use: extension Dictionary &#123; var json: String &#123; let invalidJson = "Not a valid JSON" do &#123; let jsonData = try JSONSerialization.data(withJSONObject: self, options: .prettyPrinted) return String(bytes: jsonData, encoding: String.Encoding.utf8) ?? invalidJson &#125; catch &#123; return invalidJson &#125; &#125; func printJson() &#123; print(json) &#125;&#125; or print dic directly do &#123; let jsonData = try JSONSerialization.data(withJSONObject: dic, options: .prettyPrinted) print (String(bytes: jsonData, encoding: String.Encoding.utf8) ?? 0)&#125; catch &#123; &#125; 看到这个方法感觉很简单，但是不知道多少iOS开发者，一直通过抓包的方式来查看网络请求的Json，或者在网站上进行转化，而不会通过打印日志的方式将Json按规范格式直接打印在控制台上面。]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Leetcode 17 Letter Combinations of a Phone Number]]></title>
    <url>%2F2019%2F02%2F03%2F2019-02-03%2F</url>
    <content type="text"><![CDATA[OJ addressLeetcode website : 17. Letter Combinations of a Phone Number DescriptionGiven a string containing digits from 2-9 inclusive, return all possible letter combinations that the number could represent. A mapping of digit to letters (just like on the telephone buttons) is given below. Note that 1 does not map to any letters. Example: Input: “23”Output: [“ad”, “ae”, “af”, “bd”, “be”, “bf”, “cd”, “ce”, “cf”]. My Solution in C#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;int indexValue = 0;void dfs(const char *s ,char** letter_matrix, int count, int n, char **returnArray, char *newArray);char** letterCombinations(char* digits, int* returnSize) &#123; if (!strlen(digits)) &#123; *returnSize = 0; return 0; &#125; indexValue = 0; char *letter_matrix[10]; letter_matrix[0] = " "; letter_matrix[1] = " "; letter_matrix[2] = "abc"; letter_matrix[3] = "def"; letter_matrix[4] = "ghi"; letter_matrix[5] = "jkl"; letter_matrix[6] = "mno"; letter_matrix[7] = "pqrs"; letter_matrix[8] = "tuv"; letter_matrix[9] = "wxyz"; char *s = malloc(sizeof(char) * strlen(digits)); memset(s, '\0', strlen(digits)); int j =0; for (int i=0;digits[i]!='\0';++i) &#123; if (digits[i]== '0' || digits[i] == '1') continue; s[j++] = digits[i]; &#125; s[j] = '\0'; int n = strlen(s); if (!n) &#123; *returnSize = 0; return 0; &#125; int sum = 1; for (int i=0;i&lt;n;++i) &#123; if (s[i] == '7' || s[i] == '9') &#123; sum *=4; continue; &#125; sum *=3; &#125; *returnSize = sum; char **returnArray = malloc(sizeof(char *) * sum + 10); memset(returnArray, '\0', sizeof(char *) * sum + 10); char* newArray = malloc(sizeof(char) * (n+1) ); dfs(s, letter_matrix, 0, n, returnArray, newArray); return returnArray;&#125;void dfs(const char *s ,char** letter_matrix, int count, int n, char **returnArray, char *newArray) &#123; if (count == n) &#123; newArray[count] = '\0'; char* array = malloc(sizeof(char) * (n+1) ); memcpy(array, newArray, n); array[count] = '\0'; returnArray[indexValue++] = array; return; &#125; int len = strlen(letter_matrix[s[count]-'0']); for(int i=0;i&lt;len;++i) &#123; newArray[count] = letter_matrix[s[count]-'0'][i]; dfs(s, letter_matrix, count+1, n, returnArray, newArray); &#125;&#125;int main(int argc, char const *argv[])&#123; char *s = "8\0"; int *returnsize = malloc(sizeof(int)*1000); char **dd = letterCombinations(s,returnsize); for(int i=0;i&lt;*returnsize;++i) &#123; printf("%s\n", dd[i]); &#125; return 0;&#125; Others Solution in C++ DFSclass Solution &#123;public: vector&lt;string&gt; letterCombinations(string digits) &#123; if (digits.empty()) return &#123;&#125;; vector&lt;vector&lt;char&gt;&gt; d(10); d[0] = &#123;' '&#125;; d[1] = &#123;&#125;; d[2] = &#123;'a','b','c'&#125;; d[3] = &#123;'d','e','f'&#125;; d[4] = &#123;'g','h','i'&#125;; d[5] = &#123;'j','k','l'&#125;; d[6] = &#123;'m','n','o'&#125;; d[7] = &#123;'p','q','r','s'&#125;; d[8] = &#123;'t','u','v'&#125;; d[9] = &#123;'w','x','y','z'&#125;; string cur; vector&lt;string&gt; ans; dfs(digits, d, 0, cur, ans); return ans; &#125;private: void dfs(const string&amp; digits, const vector&lt;vector&lt;char&gt;&gt;&amp; d, int l, string&amp; cur, vector&lt;string&gt;&amp; ans) &#123; if (l == digits.length()) &#123; ans.push_back(cur); return; &#125; for (const char c : d[digits[l] - '0']) &#123; cur.push_back(c); dfs(digits, d, l + 1, cur, ans); cur.pop_back(); &#125; &#125;&#125;; Others Solution in C++ BFSclass Solution &#123;public: vector&lt;string&gt; letterCombinations(string digits) &#123; if (digits.empty()) return &#123;&#125;; vector&lt;vector&lt;char&gt;&gt; d(10); d[0] = &#123;' '&#125;; d[1] = &#123;&#125;; d[2] = &#123;'a','b','c'&#125;; d[3] = &#123;'d','e','f'&#125;; d[4] = &#123;'g','h','i'&#125;; d[5] = &#123;'j','k','l'&#125;; d[6] = &#123;'m','n','o'&#125;; d[7] = &#123;'p','q','r','s'&#125;; d[8] = &#123;'t','u','v'&#125;; d[9] = &#123;'w','x','y','z'&#125;; vector&lt;string&gt; ans&#123;""&#125;; for (char digit : digits) &#123; vector&lt;string&gt; tmp; for (const string&amp; s : ans) for (char c : d[digit - '0']) tmp.push_back(s + c); ans.swap(tmp); &#125; return ans; &#125;&#125;; My IdeaSolution via DFS: Time complexity: O(4^n), n is the length of the input without ‘0’ and ‘1’.Space complexity: O(4^n + n) Solution via BS: Time complexity: O(4^n)Space complexity: O(4^n * 2) I solve it via C language, it’s so difficult than C++, because ‘char’ is not comfortbal than ‘String’, but I like resolve it by C. You can resolve it via DBS or BFS, the question is medium level. The question check our programming about knowledge of DFS、BFS and double dimensional array. All of them deserve a AC. ps: 花了我一上午的时间解答这道题，太久没玩DFS，手很生，以至于午餐时间都过了，题目不解决，吃饭都没心思。现在解决了，去吃午餐啦.争取今晚搞定一个ARPS.]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[CS50's Mobile App Development with React Native (Lecture two)]]></title>
    <url>%2F2019%2F02%2F02%2F2019-02-02%2F</url>
    <content type="text"><![CDATA[Lecture two: JavaScript, ES6这一节东西有点多，按照上课的顺序，将例子讲解一下. closure Bug关于一个作用域引起的bug，代码如下： function makeFunctionArray() &#123; const arr = [] for (var i = 0; i &lt; 5; i++) &#123; arr.push(function () &#123; console.log(i) &#125;) &#125; return arr&#125;const functionArr = makeFunctionArray()// we expect this to log 0, but it doesn'tfunctionArr[0]() 输出的结果不是0，这个bug估计也只有javascript的程序员才能看得出来。 因为var的作用域的原因，只要i++了，那么之后所有的i值都是最新的，所有打印出来的结果是5,arr保存的是i变量的输出值，所以数组输出都是5.如果用let或者const替换var，输出的结果就是正确答案：（0、1、2、3、4） 这个就是colure可能引起的问题,尽量不要用var，因为var的生命周期太久。 如何用var的方式打印出来不是var的值呢？通过IIFEs进行解决,例子如下: function makefunctionArray() &#123; const arr = [] for (var i=0; i&lt;5; ++i) &#123; arr.push((function (x) &#123; return function () &#123;console.log(x)&#125; &#125;)(i)) &#125; return arr&#125;const functionArr = makefunctionArray()functionArr[0]() 这样的话 functionArr0 打印出来就是我们的excepted result. IIFEs(Immediately Invoked Functions Expressions)是一种用來建立 function 的方法，就是用 function expression 的方式建立函数后并立即执行 建立 function 的方法通常有 function statement 和 function expression，下面是三种建立函数的方法： // function statementfunction sayHello(name) &#123; console.log('Hello ' + name);&#125;sayHello('PJCHEN');// function expressionvar sayWelcome = function(name) &#123; console.log('Welcome, ' + name);&#125;sayWelcome('PJCHEN');// Immediately Invoked Functions Expressions (IIFEs)var sayWelcomeIIFEs = function(name) &#123; console.log('Welcome ' + name);&#125;('Levi'); IIFEs，可以直接用.语法来调用return的函数，这种写法比较奇特，算是javascript专有的特性。 const sayHello = (function () &#123; var message = 'Hello!' function sayHello() &#123; console.log(message) &#125; return sayHello&#125;)()const counter = (function() &#123; let count = 0 return &#123; inc: function() &#123; count = count + 1 &#125;, get: function() &#123; console.log(count) &#125;, &#125;&#125;)()counter.get()counter.inc()counter.get() Higher Order Functions函数的参数是可以传函数进来，下面是例子，这也是JavaScript独到的新特性。 function map(arr, fn) &#123; const newArr = [] arr.forEach(function(val) &#123; newArr.push(fn(val)) &#125;) return newArr&#125;function addOne(num) &#123; return num + 1 &#125;const x = [0,1,2,3]console.log(map(x, addOne))function filter(arr, fn) &#123; const newArr = [] arr.forEach(val =&gt; &#123; if (fn(val)) newArr.push(val) &#125;) return newArr&#125;function reduce(arr, fn, initialVal) &#123; let returnVal = initialVal arr.forEach(val =&gt; &#123; returnVal = fn(returnVal, val) &#125;) return returnVal&#125; async利用setTimeout函数来进行异步线程运行 function printOne() &#123; console.log('one')&#125;function printTwo() &#123; console.log('two')&#125;function printThree() &#123; console.log('three')&#125;// this may not print in the order that you expect, because of the way the JS// function queue workssetTimeout(printOne, 1000)setTimeout(printTwo, 0)printThree() Callback下面是Callback的函数用法，callback类似于objective-c中的block函数，由于函数可以当做参数使用，所以就不需要block的函数定义了，直接传函数进去就好了，这一点javascript是真的方便。 // this is a HOF that invokes the function argument on 1function doSomethingWithOne(callback) &#123; return callback(1)&#125;doSomethingWithOne(console.log)// this is the same thing, but done asynchronouslyfunction doSomethingWithOneAsync(callback) &#123; setTimeout(() =&gt; callback(1), 1000)&#125;doSomethingWithOneAsync(console.log)// this simulates a database call that returns an object representing a personfunction getUserFromDatabase(callback) &#123; // simulates getting data from db setTimeout(() =&gt; callback(&#123;firstName: 'Jordan', lastName: 'Hayashi'&#125;), 1000)&#125;// this is a function that greets a user, which we pass as a callback to getUserFromDatabasefunction greetUser(user) &#123; console.log('Hi, ' + user.firstName)&#125;getUserFromDatabase(greetUser) 需要注意的是 （）=&gt; 这个肥括号的含义，(-&gt;这个叫做瘦括号) 简单例子，用法如下： const func = (x) =&gt; x + 1 相当于 const func = function (x) &#123; return x + 1 &#125; 需要注意的是： 花括號({})是有意義的，如果函式沒回傳東西就要花括號。例如 ()=&gt;{} 只有單一個傳入參數時，括號(())可以不用，例如 x=&gt;x*x 例子： const funcA = x =&gt; x + 1const funcB = x =&gt; &#123; x + 1 &#125;funcA(1) //2funcB(1) //undefined 當沒用花括號({})時，代表會自動加return，也只能在一行的語句的時候使用。使用花括號({})則是可以加入多行的語句，不過return不會自動加，有需要你要自己加上，沒加這個函式最後等於return undefined(註: 這是JavaScript語言中函式的設計)。 callback的一个Demo function login(req, res, callback) &#123; User.findOne(&#123;email: req.body.email&#125;, function(err, user) &#123; if (err) return callback(err) user.comparePassword(req.body.password, (err, isMatch) =&gt; &#123; if (err) return callback(err) if (!isMatch) return res.status(401).send('Incorrect password') // add relevant data to token const payload = &#123;id: user._id, email: user.email&#125; jwt.sign(payload, config.secret, &#123;&#125;, function(err, token) &#123; if (err) return callback(err) user.token = token user.save((err) =&gt; &#123; if (err) return callback(err) res.json(&#123;token&#125;) &#125;) &#125;) &#125;) &#125;)&#125; 当然可以用promise的写法，如下： function login(req, res, callback) &#123; User.findOne(&#123;email: req.body.email&#125;) .then(function(user) &#123; return user.comparePassword(req.body.password) &#125;) .then(function(isMatch) &#123; // have to throw in order to break Promise chain if (!isMatch) &#123; res.status(401).send('Incorrect password') throw &#123;earlyExit: true&#125; &#125; const payload = &#123;id: user._id, email: user.email&#125; return jwt.sign(payload, config.secret, &#123;&#125;) &#125;) .then(function(token) &#123; user.token = token return user.save() &#125;) .then(function() &#123; res.json(&#123;token&#125;) &#125;) .catch(function(err) &#123; if (!err.earlyExit) callback(err) &#125;)&#125; 还有第三种写法，通过await的方式： async function login(req, res, callback) &#123; try &#123; const user = await User.findOne(&#123;email: req.body.email&#125;) const isMatch = await user.comparePassword(req.body.password) if (!isMatch) return res.status(401).send('Incorrect password') const payload = &#123;id: user._id, email: user.email&#125; const token = await jwt.sign(payload, config.secret, &#123;&#125;) user.token = token const success = await user.save() res.json(&#123;token&#125;) &#125; catch (err) &#123; callback(err) &#125;&#125; bind / call / applybind() 方法用于在调用时设置this关键字为提供的值。并且创建一个新的function方法。call()/apply() 方法用于在调用时设置this关键字为提供的值，但不能创建新的function方法，可以进行变量赋值. 例子： const dd = &#123; name : 'levi', greet: function() &#123; return this.name &#125;&#125;const string = dd.greet.call(&#123;name: 'Yowon'&#125;)const func = dd.greet.bind(&#123;name: 'Rayna'&#125;)console.log(string) // 输出 'Yowon'func() // 输出 'Rayna' 关于肥箭头，要注意一点，箭头方法運算式最適合用在非方法的函式。來看看如果要把它們當成方法來用，會發生什麼事 'use strict';var obj = &#123; i: 10, b: () =&gt; console.log(this.i, this), c: function() &#123; console.log(this.i, this); &#125;&#125;obj.b(); // 印出 undefined, Object &#123;...&#125;obj.c(); // 印出 10, Object &#123;...&#125; 箭头沒有自己的 this？ 即使有也只会绑定了全局的this,所以不会绑定变量局部的this. 下面是哈佛老师讲解的例子： // NOTE: this doesn't work as a node script, since they are run as modules// `this` in this case is equal to module.exports, which is an empty objectconsole.log(this)// this logs the global objectfunction whatIsThis() &#123; console.log(this)&#125;whatIsThis()// =======================================const person = &#123; name: 'Jordan', greet: function() &#123; console.log('Hi, ' + this.name) &#125;&#125;person.greet() // Hi, Jordan// =====================================const friend = &#123; name: 'David',&#125;friend.greet = person.greetfriend.greet() // Hi, david// ====================================const greetPerson = person.greetgreetPerson() // Hi, undefined// make greetPerson() work, but not in nodethis.name = 'Global'// browser console or node REPL: Hi, Global// node script: Hi, undefinedgreetPerson()const reallyGreetPerson = person.greet.bind(person)reallyGreetPerson() // Hi, Jordanperson.greet.call(&#123;name: 'Yowon'&#125;) // Hi, Yowonperson.greet.apply(&#123;name: 'Raylen'&#125;) // Hi, Raylen// ====================================const newPerson = &#123; name: 'Jordan', // arrow notation binds `this` lexically greet: () =&gt; console.log('Hi, ' + this.name)&#125;newPerson.greet() // Hi, Global// bound functions cannot be bound againnewPerson.greet.call(person) // Hi, Global]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[2019/1/30 思考感悟]]></title>
    <url>%2F2019%2F01%2F30%2F2019-01-30-1%2F</url>
    <content type="text"><![CDATA[之前听过一句话，如果你对创业成功的可能性有正确认识的话，你根本不会创业。创业者往往是无知无畏、过度自信的人。这些人是认准一个方向先干起来再说，大自然对此表示很愉快，因为总有探索者出去干，才能把那个正确的方向找出来。 成功的反义词一直都不是失败，而是平庸。失败者跟成功者同样光荣，他们都是尝试者。就好比马斯克，今天弄火箭明天弄什么高速交通工具，他一直都在赌博而已。不赌当然永远不会输，但是也永远都不会赢。 以前小布什当总统的时候，打伊拉克，很多记者反对，有一次小布什当局一个什么官员出来开记者会，跟记者说了几句话，非常有意思，大意是说，我们是历史舞台的参与者，我们的一举一动都在左右历史进程，而你们这帮记者只不过是历史的记录者，你们下了很多功夫，记录的很正确，当然有权批评我们，但是你千万别忘了这个事实：你们永远只能旁观议论，真正参与历史的是我们。 慎独，不是说什么自己一个人的时候谨慎小心不做坏事，而是常常担心有什么东西，自己不知道，要主动寻求知识。 Synthesize 意思是你主动去调研所有相关知识然后自己做一个综合判断。 普通人做事总是把”不伤害自己的感情“放在首位，一天到晚，担心这个害怕那个，特别脆弱。如果一个人能克服这些弱点，明确知道自己是谁，自己想要什么，应该怎么做，他就会非常坚定，对生活就有掌控感。]]></content>
      <categories>
        <category>Idea</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[CS50's Mobile App Development with React Native (Lecture one)]]></title>
    <url>%2F2019%2F01%2F30%2F2019-01-30%2F</url>
    <content type="text"><![CDATA[Lecture one: Overview, JavaScript最近在学习RN课程，这是哈佛大学2018年的公开课，再次总结第一节课的知识点，按照slides的顺序进行总结. JavaScript ： 简称JS，解释执行语言，多范式语言，支持面向对象变成，命令式变成以及函数式编程，提供语法来操控文本。 ES6：ECMAScript 6.0,是JavaScript语言的下一代标准，在2015年6月发布， React：用于构建用户界面的 JavaScript 库，React 可以非常轻松地创建用户交互界面。为你应用的每一个状态设计简洁的视图，在数据改变时 React 也可以高效地更新渲染界面 JSX：一种 JavaScript 的语法扩展。 我们推荐在 React 中使用 JSX 来描述用户界面。JSX 乍看起来可能比较像是模版语言，但事实上它完全是在 JavaScript 内部实现的。 Syntex// comments are prefixed with double slashes/* * Multi-line comments look like this */// camelCase is preferred// double-quotes create stringsconst firstName = "jordan";// semicolons are optional// single-quotes also create stringsconst lastName = 'Hayashi'// arrays can be declared inline// arrays can have multiple types (more on types later)const arr = [ 'string', 42, function() &#123; console.log('hi') &#125;,]// this returns the element at the 2nd index and invokes itarr[2]()// this will iterate through the array and console log each elementfor (let i = 0; i &lt; arr.length; i++) &#123; console.log(arr[i])&#125; Typecasting? Coercionconst x = 42;const explicit = String(x); // explicit === "42"const implicit = x + ""; // implicit === "42" == coerces the types=== requires equivalent types New Object声明一个对象，有三种方式如下，可以任选一种方式进行对象初始化 const o = new Object()o.firstName = 'Jordan'o.lastName = 'Hayashi'o.isTeaching = trueo.greet = function() &#123; console.log('Hello!') &#125;console.log(JSON.stringify(o))const o2 = &#123;&#125;o2['firstName'] = 'Jordan'const ab = 'lastName'o2[ab] = 'Hayashi'const o3 = &#123; firstName: 'dd', lastName: 'ee', greet: function() &#123; console.log('hi') &#125;, address: &#123; street: "Main st.", number: '111' &#125;&#125; Deep copyo2 是通过指针进行的浅拷贝，下面是两种深拷贝的方法，o3是通过assign的方法进行的深拷贝，o4是通过函数方法进行的递归深拷贝。 const o = &#123; a: 'a', b: 'b', obj: &#123; key: 'key', &#125;,&#125;const o2 = oo2.a = 'new value'// o and o2 reference the same objectconsole.log(o.a)// this shallow-copies o into o3const o3 = Object.assign(&#123;&#125;, o)// deep copyfunction deepCopy(obj) &#123; // check if vals are objects // if so, copy that object (deep copy) // else return the value const keys = Object.keys(obj) const newObject = &#123;&#125; for (let i = 0; i &lt; keys.length; i++) &#123; const key = keys[i] if (typeof obj[key] === 'object') &#123; newObject[key] = deepCopy(obj[key]) &#125; else &#123; newObject[key] = obj[key] &#125; &#125; return newObject&#125;const o4 = deepCopy(o)o.obj.key = 'new key!'console.log(o4.obj.key) const、var、let通过下面的代码很详细的说明三者的区别 const 定义的变量是不能被改变的,作用域在 block scoped 内。let 定义的变量是可以改变的,作用域在 block scoped 内。var 定义的变量是可以改变的，作用域在整个函数内的，第一行或者最后一行都可以调用。 Lexical scoping (var): from when they’re declared until when theirfunction ends. Block scoping (const, let): until the next } is reached. // "var" is lexically scoped, meaning it exists from time of declaration to end of funcif (true) &#123; var lexicallyScoped = 'This exists until the end of the function'&#125;console.log(lexicallyScoped)// "let" and "const" are block scopedif (true) &#123; let blockScoped = 'This exists until the next &#125;' const alsoBlockScoped = 'As does this'&#125;// this variable doesn't existconsole.log(typeof blockScoped)thisIsAlsoAVariable = "hello"const thisIsAConst = 50// thisIsAConst++ // error!const constObj = &#123;&#125;// consts are still mutableconstObj.a = 'a'let thisIsALet = 51thisIsALet = 50// let thisIsALet = 51 // errors!var thisIsAVar = 50thisIsAVar = 51var thisIsAVar = 'new value!' Function Scope函数的作用域是在整个函数内，后面声明的函数，在声明前面可以直接调用。例如下面代码的hoistedFunction函数。 需要注意的一点是将函数复制给变量的时候，如果赋值给var变量，由于var变量是整个函数内，所以在函数第一行查看这个变量，变量是存在的，函数值不存在。如果赋值给let变量，在第一行查看这个变量就会报错了，因为let的作用域在let定义函数的代码行下方才能调用。 关于变量赋值的函数方法，需要在赋值后才能执行这个function. // functions are hoistedhoistedFunction()// but only if they are declared as functions and not as variables initialized to// anonymous functionsconsole.log("typeof butNotThis: " + typeof butNotThis)function thisShouldWork() &#123; console.log("functions are hoisted")&#125;var butNotThis = function() &#123; console.log("but variables aren't")&#125;butNotThis()console.log("typeof butNotThis: " + typeof butNotThis)function hoistedFunction() &#123; console.log("dd")&#125; The Global Object浏览器和Node.js的全局对象有区别，需要注意下 Browser global object is the window objectNode.js global object is the global object]]></content>
      <categories>
        <category>web</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Leetcode 16 3Sum Closest]]></title>
    <url>%2F2019%2F01%2F28%2F2019-01-28-5%2F</url>
    <content type="text"><![CDATA[OJ addressLeetcode website : 16. 3Sum Closest DescriptionGiven an array nums of n integers and an integer target, find three integers in nums such that the sum is closest to target. Return the sum of the three integers. You may assume that each input would have exactly one solution. Example: Given array nums = [-1, 2, 1, -4], and target = 1.The sum that is closest to the target is 2. (-1 + 2 + 1 = 2). Solution in Cint cmp(const void *a, const void *b) &#123; return *(int*)a - *(int*)b; //由小到大排序&#125;int threeSumClosest(int* nums, int numsSize, int target) &#123; qsort(nums, numsSize, sizeof(int), cmp); if (numsSize &lt; 3) &#123; return 0; &#125; int pre = INT_MAX; int sum = 0; for(int i=0;i&lt;numsSize-2;++i) &#123; if (i&gt;0 &amp;&amp; nums[i] == nums[i-1]) continue; if (nums[i] &gt; target &amp;&amp; pre != INT_MAX) break; for(int j=i+1;j&lt;numsSize-1;++j) &#123; int index = numsSize-1; if (index &lt;= j) break; if (j&gt;i+1 &amp;&amp; nums[j] == nums[j-1]) continue; int res = target - nums[i] - nums[j]; if (res == nums[index]) &#123; return target; &#125; else if (res &lt; nums[index]) &#123; if (abs(res-nums[index]) == pre) &#123; if (nums[i]+nums[j]+nums[index] &gt; sum) sum = nums[i]+nums[j]+nums[index]; &#125; if (abs(res-nums[index]) &lt; pre) &#123; pre = abs(res-nums[index]); sum = nums[i]+nums[j]+nums[index]; &#125; --index; while (index &gt; j) &#123; int res = target - nums[i] - nums[j]; if (res == nums[index]) &#123; return target; &#125; else if (res &lt; nums[index])&#123; if (abs(res-nums[index]) == pre) &#123; if (nums[i]+nums[j]+nums[index] &gt; sum) sum = nums[i]+nums[j]+nums[index]; &#125; if (abs(res-nums[index]) &lt; pre) &#123; pre = abs(res-nums[index]); sum = nums[i]+nums[j]+nums[index]; &#125; --index; &#125; else &#123; if (abs(res-nums[index]) == pre) &#123; if (nums[i]+nums[j]+nums[index] &gt; sum) sum = nums[i]+nums[j]+nums[index]; &#125; if (abs(res-nums[index]) &lt; pre) &#123; pre = abs(res-nums[index]); sum = nums[i]+nums[j]+nums[index]; &#125; break; &#125; &#125; --index; &#125; else &#123; if (abs(res-nums[index]) == pre) &#123; if (nums[i]+nums[j]+nums[index] &gt; sum) sum = nums[i]+nums[j]+nums[index]; &#125; if (abs(res-nums[index]) &lt; pre) &#123; pre = abs(res-nums[index]); sum = nums[i]+nums[j]+nums[index]; &#125; &#125; &#125; &#125; return sum;&#125; My Idea算出三个数值和target最相近的值，如果target为0，如果最近的数字有1，-1，那答案为1，也就是说最近的两个值取大于target值的解。]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Leetcode 15 3Sum]]></title>
    <url>%2F2019%2F01%2F28%2F2019-01-28-4%2F</url>
    <content type="text"><![CDATA[OJ addressLeetcode website : 15. 3Sum DescriptionGiven an array nums of n integers, are there elements a, b, c in nums such that a + b + c = 0? Find all unique triplets in the array which gives the sum of zero. Note: The solution set must not contain duplicate triplets. Example: Given array nums = [-1, 0, 1, 2, -1, -4],A solution set is:[ [-1, 0, 1], [-1, -1, 2]] Solution in C （ONE）/** * Return an array of arrays of size *returnSize. * Note: The returned array must be malloced, assume caller calls free(). */int cmp(const void *a, const void *b) &#123; return *(int*)a - *(int*)b; //由小到大排序&#125;int** threeSum(int* nums, int numsSize, int* returnSize) &#123; qsort(nums, numsSize, sizeof(int), cmp); int **returnArray = (int**)malloc(sizeof(int *) * (numsSize*(numsSize-1)*(numsSize-2))/6); if (numsSize &lt; 3) &#123; *returnSize = 0; return returnArray; &#125; int top = 0; int pre = nums[0]; for(int i=0;i&lt;numsSize-2;++i) &#123; if (i&gt;0 &amp;&amp; nums[i] == nums[i-1]) continue; if (nums[i] &gt; 0) break; int index = numsSize-1; for(int j=i+1;j&lt;numsSize-1;++j) &#123; if (index &lt;= j) break; if (j&gt;i+1 &amp;&amp; nums[j] == nums[j-1]) continue; int res = 0 - nums[i] - nums[j]; if (res == nums[index]) &#123; returnArray[top] = (int*)malloc(3*sizeof(int)); returnArray[top][0] = nums[i]; returnArray[top][1] = nums[j]; returnArray[top][2] = nums[index]; ++top; &#125; else if (res &lt; nums[index]) &#123; --index; while (index &gt; j) &#123; int res = 0 - nums[i] - nums[j]; if (res == nums[index]) &#123; returnArray[top] = (int*)malloc(3*sizeof(int)); returnArray[top][0] = nums[i]; returnArray[top][1] = nums[j]; returnArray[top][2] = nums[index]; ++top; break; &#125; else if (res &lt; nums[index])&#123; --index; &#125; else &#123; break; &#125; &#125; &#125; else &#123; continue; &#125; &#125; &#125; *returnSize = top; return returnArray;&#125; Solution in C （TWO）int cmp(const void *a, const void *b) &#123; return *(int*)a - *(int*)b; //由小到大排序&#125;int** threeSum(int* nums, int numsSize, int* returnSize) &#123; qsort(nums, numsSize, sizeof(int), cmp); int **returnArray = (int**)malloc(sizeof(int *) * (numsSize*(numsSize-1)*(numsSize-2))/6); if (numsSize &lt; 3) &#123; *returnSize = 0; return returnArray; &#125; int top = 0; int pre = nums[0]; for(int i=0;i&lt;numsSize-2;++i) &#123; if (i&gt;0 &amp;&amp; nums[i] == nums[i-1]) continue; if (nums[i] &gt; 0) break; int index = numsSize-1; for(int j=i+1;j&lt;numsSize-1;++j) &#123; if (index &lt;= j) break; if (j&gt;i+1 &amp;&amp; nums[j] == nums[j-1]) continue; int res = 0 - nums[i] - nums[j]; if (res == nums[index]) &#123; returnArray[top] = (int*)malloc(3*sizeof(int)); returnArray[top][0] = nums[i]; returnArray[top][1] = nums[j]; returnArray[top][2] = nums[index]; ++top; &#125; else if (res &lt; nums[index]) &#123; if (index &gt; j+1) &#123; --j; --index; &#125; &#125; else &#123; continue; &#125; &#125; &#125; *returnSize = top; return returnArray;&#125; My Idea关于解题技巧，第一个数字以及第二个数字正常从第一个位置到最后一个位置遍历就好，第三个位置要注意要从后往前数，这样效率会比较高，因为如果三个数相加为0的第三个数字大于最后一个位置的数字，第二个数字直接变动就好，不用每次移动第三个数字，会大大减少移动次数，来提高算法效率。 这道题是很有意思，中等类型，第一次运行，88 ms，速度仅仅打败了30%的人，然后加了一句第一个数字&gt;0： if (nums[i] &gt; 0) break; 瞬间打败了49%的人，就是上面第二种解法，然后在稍微修改了一下，防止多次运行以下两句代码： if (index &lt;= j) break;if (j&gt;i+1 &amp;&amp; nums[j] == nums[j-1]) continue; 就瞬间打败了100%的人，也就是第一种解法，速度是最快的。]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Leetcode 13 Roman to Integer]]></title>
    <url>%2F2019%2F01%2F28%2F2019-01-28-3%2F</url>
    <content type="text"><![CDATA[OJ addressLeetcode website : 13. Roman to Integer DescriptionRoman numerals are represented by seven different symbols: I, V, X, L, C, D and M. Symbol ValueI 1V 5X 10L 50C 100D 500M 1000 For example, two is written as II in Roman numeral, just two one’s added together. Twelve is written as, XII, which is simply X + II. The number twenty seven is written as XXVII, which is XX + V + II. Roman numerals are usually written largest to smallest from left to right. However, the numeral for four is not IIII. Instead, the number four is written as IV. Because the one is before the five we subtract it making four. The same principle applies to the number nine, which is written as IX. There are six instances where subtraction is used: I can be placed before V (5) and X (10) to make 4 and 9.X can be placed before L (50) and C (100) to make 40 and 90.C can be placed before D (500) and M (1000) to make 400 and 900.Given a roman numeral, convert it to an integer. Input is guaranteed to be within the range from 1 to 3999. Example 1: Input: “III”Output: 3Example 2: Input: “IV”Output: 4Example 3: Input: “IX”Output: 9Example 4: Input: “LVIII”Output: 58Explanation: L = 50, V= 5, III = 3.Example 5: Input: “MCMXCIV”Output: 1994Explanation: M = 1000, CM = 900, XC = 90 and IV = 4. Solution in Cint romanToInt(char* s) &#123; int index = 0; int sum = 0; while(s[index] != '\0') &#123; if (s[index] == 'M') sum+=1000; if (s[index] == 'D') sum+=500; if (s[index] == 'C') &#123; if(s[index+1] == 'D' | s[index+1] == 'M') &#123; sum-=100; &#125; else &#123; sum += 100; &#125; &#125; if (s[index] == 'L') sum+=50; if (s[index] == 'X') &#123; if(s[index+1] == 'L' | s[index+1] == 'C') &#123; sum-=10; &#125; else &#123; sum += 10; &#125; &#125; if (s[index] == 'V') sum+=5; if (s[index] == 'I') &#123; if(s[index+1] == 'V' | s[index+1] == 'X') &#123; sum-=1; &#125; else &#123; sum += 1; &#125; &#125; ++index; &#125; return sum;&#125; My Idea这道题是Easy类型，下次不会放博客来说。]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Leetcode 12 Integer to Roman]]></title>
    <url>%2F2019%2F01%2F28%2F2019-01-28-2%2F</url>
    <content type="text"><![CDATA[OJ addressLeetcode website : 12. Integer to Roman DescriptionRoman numerals are represented by seven different symbols: I, V, X, L, C, D and M. Symbol ValueI 1V 5X 10L 50C 100D 500M 1000 For example, two is written as II in Roman numeral, just two one’s added together. Twelve is written as, XII, which is simply X + II. The number twenty seven is written as XXVII, which is XX + V + II. Roman numerals are usually written largest to smallest from left to right. However, the numeral for four is not IIII. Instead, the number four is written as IV. Because the one is before the five we subtract it making four. The same principle applies to the number nine, which is written as IX. There are six instances where subtraction is used: I can be placed before V (5) and X (10) to make 4 and 9.X can be placed before L (50) and C (100) to make 40 and 90.C can be placed before D (500) and M (1000) to make 400 and 900.Given an integer, convert it to a roman numeral. Input is guaranteed to be within the range from 1 to 3999. Example 1: Input: 3Output: &quot;III&quot;Example 2:Input: 4Output: &quot;IV&quot;Example 3:Input: 9Output: &quot;IX&quot;Example 4:Input: 58Output: &quot;LVIII&quot;Explanation: L = 50, V = 5, III = 3.Example 5:Input: 1994Output: &quot;MCMXCIV&quot;Explanation: M = 1000, CM = 900, XC = 90 and IV = 4. Solution in Cchar a[100];int b[4];char* intToRoman(int num) &#123; int index = 0; int tmp = 0; int count = 0; int value = num; while(num &gt; 0) &#123; tmp = num % 10; b[count] = tmp; ++count; num /= 10; &#125; --count; if (count == 3) &#123; int t = b[count]; while(t) &#123; a[index] = 'M'; ++index; --t; &#125; --count; &#125; if (count == 2) &#123; int t = b[count]; if (t &lt;= 3) &#123; while(t) &#123; a[index] = 'C'; ++index; --t; &#125; &#125; else if (t == 4) &#123; a[index] = 'C'; ++index; a[index] = 'D'; ++index; &#125; else if (t == 5) &#123; a[index] = 'D'; ++index; &#125; else if (t &lt;= 8) &#123; a[index] = 'D'; ++index; t -= 5; while(t) &#123; a[index] = 'C'; ++index; --t; &#125; &#125; else &#123; a[index] = 'C'; ++index; a[index] = 'M'; ++index; &#125; --count; &#125; if (count == 1) &#123; int t = b[count]; if (t &lt;= 3) &#123; while(t) &#123; a[index] = 'X'; ++index; --t; &#125; &#125; else if (t == 4) &#123; a[index] = 'X'; ++index; a[index] = 'L'; ++index; &#125; else if (t == 5) &#123; a[index] = 'L'; ++index; &#125; else if (t &lt;= 8) &#123; a[index] = 'L'; ++index; t -= 5; while(t) &#123; a[index] = 'X'; ++index; --t; &#125; &#125; else &#123; a[index] = 'X'; ++index; a[index] = 'C'; ++index; &#125; --count; &#125; if (count == 0) &#123; int t = b[count]; if (t &lt;= 3) &#123; while(t) &#123; a[index] = 'I'; ++index; --t; &#125; &#125; else if (t == 4) &#123; a[index] = 'I'; ++index; a[index] = 'V'; ++index; &#125; else if (t == 5) &#123; a[index] = 'V'; ++index; &#125; else if (t &lt;= 8) &#123; a[index] = 'V'; ++index; t -= 5; while(t) &#123; a[index] = 'I'; ++index; --t; &#125; &#125; else &#123; a[index] = 'I'; ++index; a[index] = 'X'; ++index; &#125; --count; a[index] = '\0'; &#125; return a;&#125; My Idea理解了题目的含义，就很容易，知道罗马数字的表达方式，就很好做。]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Leetcode 11 Container With Most Water]]></title>
    <url>%2F2019%2F01%2F28%2F2019-01-28-1%2F</url>
    <content type="text"><![CDATA[OJ addressLeetcode website : 11. Container With Most Water DescriptionGiven n non-negative integers a1, a2, …, an , where each represents a point at coordinate (i, ai). n vertical lines are drawn such that the two endpoints of line i is at (i, ai) and (i, 0). Find two lines, which together with x-axis forms a container, such that the container contains the most water. Note: You may not slant the container and n is at least 2. The above vertical lines are represented by array [1,8,6,2,5,4,8,3,7]. In this case, the max area of water (blue section) the container can contain is 49. Example: Input: [1,8,6,2,5,4,8,3,7]Output: 49 Solution in C (one)int maxArea(int* height, int heightSize) &#123; int max = 0; for (int i = 0; i &lt; heightSize; ++i) &#123; int left = i-0; int right = heightSize-i-1; int l = 0; int r = heightSize-1; int tmp = 0; while(r &gt; i | l &lt; i) &#123; if (left &lt; right &amp;&amp; i&lt;r) &#123; if (height[r] &gt;= height[i]) &#123; tmp = (r-i)*height[i]; printf("a[%d],a[%d]-&gt;%d\n", r, i, tmp); break; &#125; --r;--right; &#125; else if (left &gt; right &amp;&amp; l&lt;i) &#123; if (height[l] &gt;= height[i]) &#123; tmp = (i-l)*height[i]; printf("a[%d],a[%d]-&gt;%d\n", l, i, tmp); break; &#125; ++l;++left; &#125; else &#123; break; &#125; &#125; max = max&gt;tmp ? max: tmp; &#125; return max;&#125;int main(int argc, char const *argv[])&#123; int a[9] = &#123;1,2,3,4,5,4,3,2,1&#125;; // int a[4] = &#123;1,2,4,3&#125;; printf("%d\n", maxArea(a, 9)); return 0;&#125; Solution in C (two)int maxArea(int* height, int heightSize) &#123; int max = 0; int left = 0; int right = heightSize-1; int sum = 0; while (left &lt; right) &#123; if (height[left] &lt; height[right]) &#123; sum = height[left] * (right - left); ++left; &#125; else &#123; sum = height[right] * (right - left); --right; &#125; max = max &gt; sum ? max : sum; &#125; return max;&#125; My Idea第一种 刚开始，我想的并非是O（n）的方法，是O（n*n）情况下的剪枝方法，打败了50%的people，这个方法就是先选一个长度固定线，然后从最左边和最右边找到最远的比这个固定高度的线还要高的线，找到后，算出两线之间的面积就是这个固定长度线的最大面积，然后再去找其他线，以此类推将求出所有线的最大面积，得出这个答案。这个方法可以AC，但是不是O（n），所以只能达到50%的AC速度。 第二种 O（n）的算法: 初始化最大面积(max_area)以及右边(right)、左边(left)的线，left为0，right则为最右边的线， 两线的长度为 right — left ，求出面积，若面积大于max_area，就取代max_area 比较两条线长度，若左边小，左边的线往右移 left + 1，反之右边的线往左移 right — 1然后继续从 第 2 点开始，直到left == right。]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Leetcode 10 Regular Expression Matching]]></title>
    <url>%2F2019%2F01%2F28%2F2019-01-28%2F</url>
    <content type="text"><![CDATA[OJ addressLeetcode website : 10. Regular Expression Matching DescriptionGiven an input string (s) and a pattern (p), implement regular expression matching with support for ‘.’ and ‘*’. ‘.’ Matches any single character.‘*’ Matches zero or more of the preceding element.The matching should cover the entire input string (not partial). Note: s could be empty and contains only lowercase letters a-z.p could be empty and contains only lowercase letters a-z, and characters like . or *.Example 1: Input:s = &quot;aa&quot;p = &quot;a&quot;Output: falseExplanation: &quot;a&quot; does not match the entire string &quot;aa&quot;.Example 2:Input:s = &quot;aa&quot;p = &quot;a*&quot;Output: trueExplanation: &apos;*&apos; means zero or more of the precedeng element, &apos;a&apos;. Therefore, by repeating &apos;a&apos; once, it becomes &quot;aa&quot;.Example 3:Input:s = &quot;ab&quot;p = &quot;.*&quot;Output: trueExplanation: &quot;.*&quot; means &quot;zero or more (*) of any character (.)&quot;.Example 4:Input:s = &quot;aab&quot;p = &quot;c*a*b&quot;Output: trueExplanation: c can be repeated 0 times, a can be repeated 1 time. Therefore it matches &quot;aab&quot;.Example 5:Input:s = &quot;mississippi&quot;p = &quot;mis*is*p*.&quot;Output: false Solution in C (one)int isMatchLen(char* s, char* p, int sIndex, int pIndex, int slen, int plen) &#123; char s1 = s[sIndex]; char s2 = p[pIndex]; if (plen == 0) return !slen; int result1 = slen &amp;&amp; (s1 == s2 || s2 == '.'); if (plen &gt;= 2 &amp;&amp; p[pIndex+1] == '*') return isMatchLen(s, p, sIndex, pIndex+2, slen, plen-2) | (result1 &amp;&amp; isMatchLen(s, p, sIndex+1, pIndex, slen-1, plen)); else return (result1 &amp;&amp; isMatchLen(s, p, sIndex+1, pIndex+1, slen-1, plen-1));&#125;bool isMatch(char* s, char* p) &#123; int slen = strlen(s); int plen = strlen(p); return isMatchLen(s, p, 0, 0, slen, plen);&#125; Solution in C (two)int isMatchLen(char* s, char* p, int sIndex, int pIndex) &#123; char s1 = s[sIndex]; char s2 = p[pIndex]; if (s1 == '\0' &amp;&amp; s2 == '\0') &#123; return 1; &#125; if (s2 == '\0') return 0; int result1 = 0; int result2 = 0; int result3 = 0; int result4 = 0; int result5 = 0; if (s2 == '.' || s1 == s2) &#123; if (s[sIndex] != '\0') &#123; result5 = isMatchLen(s, p, sIndex+1, pIndex+1); &#125; &#125; if (p[pIndex+1] == '*') &#123; result4 = isMatchLen(s, p, sIndex, pIndex+2); &#125; if (s2 == '*') &#123; result1 = isMatchLen(s, p, sIndex, pIndex+1); char s3 = p[pIndex-1]; if (s3 == '.') &#123; if (s[sIndex] != '\0') result2 = isMatchLen(s, p, sIndex+1, pIndex+1); if (s[sIndex] != '\0') result3 = isMatchLen(s, p, sIndex+1, pIndex); &#125; else &#123; if (s1 == s3) &#123; if (s[sIndex] != '\0') result2 = isMatchLen(s, p, sIndex+1, pIndex+1); if (s[sIndex] != '\0') result3 = isMatchLen(s, p, sIndex+1, pIndex); &#125; else &#123; return result1 | result4 | result5 | 0; &#125; &#125; &#125; else &#123; return result4 | result5 | 0; &#125; return result1 | result2 | result3 | result4 | result5;&#125;bool isMatch(char* s, char* p) &#123; return isMatchLen(s, p, 0, 0);&#125; My Idea题目含义是，该题是正则表达式匹配，要求’.’ 匹配任意单个字符, ‘*’ 匹配零个或多个前面的元素。所谓零个字符代表前面的那个字符是可以省略的。 第一次做的时候，用的是第二种方法，写了很多分支，虽然可以AC，由于分支太多，所以消耗很多时间。所以第二次就减少了大部分分支演变成了第一种的方法。 需要注意的是： 1.’*’ 号前面的字符可以省略掉，因为它的特殊性可以匹配0个字符，就是可以把前面的字符去掉。 递归方程式和条件进行 &amp;&amp;，这样会提高很多效率，并且少写很多代码]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[2018-01-22 Review & Shares]]></title>
    <url>%2F2019%2F01%2F23%2F201912302%2F</url>
    <content type="text"><![CDATA[ReviewThe End of iTunes I hope iTunes will meet the future, it will change better, Apple will never give up this app that is people know and love the brand we have. So I look forward to the change comming soon. About new iTunes Movies and TV Shows app, it’s too silent so that I can’t look forward more. SharesThe high productivity = 15.87%, The first knowledge is Learning Zone, The psychologists define three Zone: Panic Zone/Learning Zone/Comfort Zone.The Comfort Zone is too easy for us, however The Panic Zone is too hard for us.So deliberate practice demand us study between Panic Zone and Comfort Zone, because of the difficult is just the right. The second knowledge is flow channel, if the work challenge is under your skill , it will make you boredom, but the work challenge exceed your skill, it will make you anxiety. If you will solve this question but you don’t know how to solve it, however you make a breakthrough at some point and finish it for sometime, that is flow channel, you can immerse yourself in working, that you forget time. The third knowledge is formula，like = familiar + surprised，a article can collect most of people, it must offer familiar things to readers, however, it make readers feel surprised. That’s a question, because we don’t know proportion. However, a scientist get a conclusion about This proportion, it is 15.87%. 这个比例是通过《最优学习的85%规则》报道的，这是一个AI算法模型的出来的结论，也就是说这个85%规则大部分公式都会通用，例如当你训练AI机器人的时候，要给他85%熟悉的，15%是它感到意外的事情。 又比如说学英语，最好已将中85%是你本来就会的，15%是新技巧。从中可以得到，熟悉最重要，15.78%数值基本上是通用的，具有普遍意义，这里面有一个值得专门强调的精神，就是你应该时刻追求效率的最大化。 如果世界上有一个人，他每次安排学习的内容确保每次15%意外率，85%熟悉的题目，那么这个人的学习效率就达到了最大化，假以时日，他就成为学习效率最高的人，这是多么可怕的一个事实。]]></content>
      <categories>
        <category>Idea</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Leetcode 8 String to Integer(atoi)]]></title>
    <url>%2F2019%2F01%2F23%2F2019012301%2F</url>
    <content type="text"><![CDATA[AlgorithmOJ addressLeetcode website : 8. String to Integer (atoi) DescriptionImplement atoi which converts a string to an integer. The function first discards as many whitespace characters as necessary until the first non-whitespace character is found. Then, starting from this character, takes an optional initial plus or minus sign followed by as many numerical digits as possible, and interprets them as a numerical value. The string can contain additional characters after those that form the integral number, which are ignored and have no effect on the behavior of this function. If the first sequence of non-whitespace characters in str is not a valid integral number, or if no such sequence exists because either str is empty or it contains only whitespace characters, no conversion is performed. If no valid conversion could be performed, a zero value is returned. Note: Only the space character ‘ ‘ is considered as whitespace character.Assume we are dealing with an environment which could only store integers within the 32-bit signed integer range: [−231, 231 − 1]. If the numerical value is out of the range of representable values, INT_MAX (231 − 1) or INT_MIN (−231) is returned.Example 1: Input: “42”Output: 42Example 2: Input: “ -42”Output: -42Explanation: The first non-whitespace character is ‘-‘, which is the minus sign. Then take as many numerical digits as possible, which gets 42.Example 3: Input: “4193 with words”Output: 4193Explanation: Conversion stops at digit ‘3’ as the next character is not a numerical digit.Example 4: Input: “words and 987”Output: 0Explanation: The first non-whitespace character is ‘w’, which is not a numerical digit or a +/- sign. Therefore no valid conversion could be performed.Example 5: Input: “-91283472332”Output: -2147483648Explanation: The number “-91283472332” is out of the range of a 32-bit signed integer. Thefore INT_MIN (−231) is returned. Solution in C#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;#include &lt;limits.h&gt;int myAtoi(char* str) &#123; int mark = 0; int i = 0; while (str[i] == ' ') &#123; ++i; &#125; if (str[i] == '\0' || str[i] &lt; 48 || str[i] &gt; 57) &#123; if (str[i] == '-') &#123; mark = 1; ++i; &#125; else if (str[i] == '+') &#123; mark = 0; ++i; &#125; else return 0; &#125; int j = 0; long long sum = 0; int tmp = 0; int t = 0; int max = 0; while (str[i] == '0') &#123; ++i; &#125; while(str[i] &gt;= 48 &amp;&amp; str[i] &lt;= 57) &#123; ++j; if (j &gt;= 11) &#123; max = 1; break; &#125; sum *= 10; t = str[i]-'0'; sum+=t; ++i; tmp = sum; if (sum &gt; INT_MAX) &#123; max = 1; break; &#125; &#125; if (max == 1 &amp;&amp; mark==0) return INT_MAX; if (max == 1 &amp;&amp; mark==1) return INT_MIN; return mark? sum*-1 : sum;&#125;int main(int argc, char const *argv[])&#123; char *s = "2147483648"; int result = myAtoi(s); printf("%d\n", result); return 0;&#125; My Idea题目含义是，给定一个字符串，转换成INT类型的数字格式。 将前导0去掉，例如0023 - 23，将前面的空格去掉。 去掉”+”符号， “+54” - “54” Int类型最大值尽量用INT_MAX/INT_MIN，引入库函数&lt;limits.h&gt;]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[EP申请结果状态实时通知爬虫文件]]></title>
    <url>%2F2019%2F01%2F21%2F201901211011%2F</url>
    <content type="text"><![CDATA[Before I get my employment pass from Singapore, I will check my EP application status by Mom website, the process is so troublesome，so I write a programme to get status auto by Python script.I will not check my status by website, it’s so convenience that I get my finial status by mobile sms. About how to get status by my mobile, because xxx.139.com will send my email automatically to my sms. I hope this may be useful for you! XD #!/usr/bin/python# -*- coding: utf-8 -*-# coding: utf-8import urllib2import urllibimport reimport smtplibimport sysimport timefrom email.mime.text import MIMETextfrom email.mime.multipart import MIMEMultipartfrom email.mime.image import MIMEImagedef sleeptime(hour,min,sec): return hour*3600 + min*60 + sec;def sendSbmail(to_sbmail,status): # 发送的邮箱 from_mail='once24@126.com' to_mail=to_sbmail reload(sys) sys.setdefaultencoding('gb2312') msg=MIMEMultipart() msg['From']=from_mail msg['To']=to_mail msg['Subject']='请关注status'+status # body内容 body='状态'+ status # 如果图片的话，可以在这里通过HTML格式添加 con=MIMEText('&lt;b&gt;%s&lt;/b&gt;&lt;br&gt;&lt;img src="cid:idreamsky_258.jpg"&gt;&lt;br&gt;' % body,'html',_charset="utf-8") msg.attach(con) # 配置邮箱的STMP server=smtplib.SMTP('smtp.126.com') # 例如 suiyun@me.com 密码 server.login('邮箱名称','邮箱密码') # 发送邮件给我 server.sendmail(from_mail,to_mail,msg.as_string()) server.quit()def sendData(): formdata = &#123;"requesterNRICFIN":"E70330000","requesterName":"Duan Duan","travelDocNo":"E70330000","trvDateBirth":"04/12/1994"&#125; data = urllib.urlencode(formdata) request = urllib2.Request('https://eponline.mom.gov.sg/epol/PEPOLENQM008SubmitAction.do', data = data) try: response = urllib2.urlopen(request) except Exception as ex: print ex return 1 else: content = response.read() t = re.search('Pending', content) a = re.search('Rejected', content) b = re.search('prove', content) if t: print 'Pending', return 1 if a: sendSbmail('你的邮箱@me.com', 'Rejected') return 0 if b: sendSbmail('你的邮箱@me.com', 'prove') return 0 return 1 return 1if __name__ == "__main__": second = sleeptime(0,0,300); status = 1 i = 0 while status: i = i+1 print i, status = sendData() time.sleep(second);]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Leetcode 7 Reverse Integer]]></title>
    <url>%2F2019%2F01%2F21%2F201901211010%2F</url>
    <content type="text"><![CDATA[AlgorithmOJ addressLeetcode website : 7. Reverse Integer DescriptionGiven a 32-bit signed integer, reverse digits of an integer. Example 1: Input: 123Output: 321 Example 2: Input: -123Output: -321 Example 3: Input: 120Output: 21 Note: Assume we are dealing with an environment which could only store integers within the 32-bit signed integer range: [−2的31次方, 2的31次方 − 1]. For the purpose of this problem, assume that your function returns 0 when the reversed integer overflows. Solution in C (one)int reverse(int x) &#123; int t = 0; if (x == 0) return 0; while (!x%10) &#123; x/=10; &#125; int sum = 0; long long reallysum = 0; while (x) &#123; reallysum *=10; sum *= 10; t = x%10; reallysum+=t; sum+=t; x/=10; &#125; if (reallysum != sum) return 0; return sum;&#125; Solution in C (Two)int reverse(int x) &#123; int t = 0; if (x == 0) return 0; while (!x%10) &#123; x/=10; &#125; int sum = 0; int tmp = 0; while (x) &#123; sum *= 10; if (sum/10 != tmp) return 0; t = x%10; sum+=t; x/=10; tmp = sum; &#125; return sum;&#125; My Idea题目含义是，给定一个int类型的整数，然后进行数字反转，输出。 反转后，将前导0去掉，例如2300 -&gt; 0023 -&gt;23 如果超过 INT_MAX , 或者小于 INT_MIN，则输出0，关于这个如何判断，有两种简单的方法，第一种方法是用long long来存取变量，如果大于INT_MAX或者小于INT_MIN，则输出0.第二种方法就是如果超出最大值，或小于最小值，则你最高位后面的尾数是会因为超出最大值而跟着改变的，所以你只要检测尾数如果变化，就输出0即可，这就是我代码里的第二种方法。]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[2018-01-21 Review & Shares]]></title>
    <url>%2F2019%2F01%2F21%2F201901211012%2F</url>
    <content type="text"><![CDATA[ReviewNothing Can Stop Google. DuckDuckGo Is Trying Anyway. When it comes to the internet, trust is something easily lost and difficult to regain. In a sense, every time a giant of the internet surveillance economy is revealed to have sold out its customers in some innovatively horrifying way, the ensuing chaos almost serves as free advertising for DuckDuckGo. “The world keeps going in a bad direction, and it makes people think, ‘Hey, I would like to escape some of the bad stuff on the internet and go to a safer place,’” Weinberg says. “And that’s where we see ourselves.” I like DuckDuckGo, because it make us pay attention to privacy, don’t track you, the little duck is trying to stop Google, by the way protect your privacy. SharesHow now to do “The things must to do” If you have tow months vocation without duty, what will you do? We are a group of adults, I believe us don’t waste time to enjoy life for tow months. Perhaps your study a skill. or you will read a book that you don’t have time to read. however, why didn’t we have two month to do something. Time management demand us divide into two parties: importance and urgency, however, most things is urgent in our routine schedule. We are used to doing “Must Things” instead of “Things want to do”. I think the highest state about time management is not to do “The things must to do”.We must be ahead of the schedule. I like slack status, I don’t like tradeoff, Your time is that we can do anything unconstrained. free time is more expensive than free money. We must do “Must things” and mental activity by the minimum time, and you do nothing in most time. If you like slack status, firstly, you will be brave to say “No”, that make you get “your time”, Secondly, you give up some project. 拥有余闲就有用主动权，就有用创造，冒险改变的可能性，时间就好像金钱，你花了它就不是你的了，可是你一直不花也不是你的，只有在你“可以花也可以不花”的那一刻，它才是你的。]]></content>
      <categories>
        <category>Idea</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS Custom URL Scheme]]></title>
    <url>%2F2019%2F01%2F20%2F201901211013%2F</url>
    <content type="text"><![CDATA[I’m making an app using a custom URL scheme, so I thought I’d share it with everyone else incase they were curious. Step 1Go into your app’s info.plst file. Step 2Add a Row to this and call it “URL types” Step 3Expand the first item in “URL types” and add a row called “URL identifier”, the value of this string should be the reverse domain for your app e.g. “com.yourcompany.myapp”. Step 4Again, add a row into the first item in “URL types” and call it “URL Schemes” Step 5Inside “URL Schemes” you can use each item as a different url you wish to use, so if you wanted to use “myapp://“ you would create an item called “myapp”. After all of this, your structure should look something like this: Using the URL SchemeNow you’ve registered the URL with the app, you can start the application by opening a url with the custom scheme. Here are a few examples: myapp://myapp://a/random/pathmyapp://?foo=1&amp;bar=2 This url will send a message to the UIApplicationDelegate so if you want to provide a custom handler for it, all you need to do is provide an implementation for it in your delegate. Something like this: - (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url &#123; // Do something with the url here&#125; Most people will want to parse the URL and store it in the NSUserDefaults, here is a example of how you could do that: - (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url &#123; if (!url) &#123; return NO; &#125; NSString *URLString = [url absoluteString]; &#125; For example In my project: declare a dictionary hostToAction = @&#123; @"redemption": NSStringFromSelector(@selector(openRedeemptionPage:params:)), @"web": NSStringFromSelector(@selector(openWebViewWithPath:params:absoluteString:))&#125;; handleOpenURL void + (BOOL)handleOpenURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication&#123; if ([url.scheme isEqualToString:DJURLSchema] &amp;&amp; url.host &amp;&amp; hostToAction[url.host]) &#123; [DJLog info:DJ_UI content:@"handleOpenURL %@ from application %@", url.absoluteString, sourceApplication]; NSString *path = url.path.length &gt; 1 ? [url.path substringFromIndex:1] : @""; NSDictionary *params = [self dictionaryWithQuery:url.query]; NSString *absoluteString = url.absoluteString; SEL action = NSSelectorFromString(hostToAction[url.host]); NSInvocation *inv = [NSInvocation invocationWithMethodSignature:[self methodSignatureForSelector:action]]; [inv setSelector:action]; [inv setTarget:self]; // arguments 0 and 1 are self and _cmd respectively, automatically set by NSInvocation [inv setArgument:&amp;(path) atIndex:2]; [inv setArgument:&amp;(params) atIndex:3]; if([url.host isEqualToString:@"web"]) &#123; [inv setArgument:&amp;(absoluteString) atIndex:4]; &#125; [inv invoke]; return YES; &#125; return NO;&#125; openPage void + (void)openRedeemptionPage:(NSString *)path params:(NSDictionary *)params&#123; dispatch_async(dispatch_get_main_queue(), ^&#123; [[DJAppCallContainer sharedInstance] appCallRedeemptionPage:path]; &#125;);&#125;func appCallRedeemptionPage(_ path : String) &#123; if canShowViewController() &#123; gotoRedeemptionPage() &#125;&#125;func gotoRedeemptionPage() &#123; if let vc = DJRedeemptionVC() &#123; if DJAppCall.isTopVC(vc) &#123; DJAppCall.getTopvc().navigationController?.popViewController(animated: false) &#125; DJAppCall.showViewController(vc) &#125;&#125;func canShowViewController() -&gt; Bool &#123; let homeMianVC = MainTabViewController.sharedInstance if let appDelegate = UIApplication.shared.delegate as? AppDelegate&#123; if appDelegate.window.rootViewController == homeMianVC &#123; return true &#125; &#125; return false&#125;+ (BOOL)isTopVC:(UIViewController *)viewController&#123; UIWindow *window = [[[UIApplication sharedApplication] delegate] window]; UITabBarController *mainViewController = (UITabBarController *)window.rootViewController; if ([mainViewController.selectedViewController isKindOfClass:[UINavigationController class]]) &#123; UINavigationController *nvc = (UINavigationController *)mainViewController.selectedViewController; if ([nvc.topViewController isKindOfClass:viewController.class]) &#123; return YES; &#125; &#125; return NO;&#125;+ (UIViewController *)getTopvc&#123; UIWindow *window = [[[UIApplication sharedApplication] delegate] window]; UITabBarController *mainViewController = (UITabBarController *)window.rootViewController; if ([mainViewController.selectedViewController isKindOfClass:[UINavigationController class]]) &#123; UINavigationController *nvc = (UINavigationController *)mainViewController.selectedViewController; return nvc.topViewController; &#125; return nil;&#125;+ (void)showViewController:(UIViewController *)viewController&#123; UIWindow *window = [[[UIApplication sharedApplication] delegate] window]; UITabBarController *mainViewController = (UITabBarController *)window.rootViewController; [mainViewController dismissViewControllerAnimated:NO completion:nil]; for (UIViewController *vc in mainViewController.viewControllers) &#123; [vc dismissViewControllerAnimated:NO completion:nil]; &#125; if ([mainViewController.selectedViewController isKindOfClass:[UINavigationController class]]) &#123; viewController.hidesBottomBarWhenPushed = true; [(UINavigationController *)mainViewController.selectedViewController pushViewController:viewController animated:YES]; &#125;&#125; Thats it!I hope this may be useful for you!]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Redemption Server API]]></title>
    <url>%2F2019%2F01%2F20%2FRedemptionProject%2F</url>
    <content type="text"><![CDATA[Redemption Server APIAPI: Redemption ListDescriptionRedemption页面的CollectionView的网络数据请求List. URLGET: /shop/redeemption_list Query Parameters Parameter Type Description page Int 页码 pageSize Int 一页最多显示的data item Response Parameter Type Description last Bool 是否为最后一页 status Bool true: jump to detail page false: jump to 库存不足页面. shopItems [DJShopItem] 商品类型 API：Redemption detail PageDescriptionRedemption Page‘s shop detail page URLGET /redeemption_shop_item/{shopItemId}/shop_item_group_id/{shopItemGroupId} GET: shop/redeemption_shop_item/%@/shop_item_group_id/%@” Query Parameters Parameter Type Description shopItemId Int 商品Id shopItemGroupId String 品牌Id Response Parameter Type Description shopItems [DJShopItem] 商品类型数组 isOutOfStock Bool 库存不足 isOcbProduct Bool Obc商品 API：Redemption order PageDescriptionRedemption详情页面点击购买，字段跳转到订单页面，订单页面数据网络接口 URLPOST: /redeem/preview Query Parameters Parameter Type Description inventoryItemId Int 库存ID productId Int 产品ID productGroupId String 产品品牌ID size String 尺寸 quantity Int 数量 productName String 产品名称 Response Parameter Type Description result DJCheckoutModel 订单数据模型 API：Redemption订单确认支付接口Description点击Redemption活动的订单页面确认支付，将要请求这个网络接口 URLPOST /redeem/create_and_pay Query ParameterscheckoutModel : DJCheckoutModel Response Parameter Type Description result DJCheckoutCreatandPayModel 订单支付数据模型 Data ModelDJShopItem 商品类型cashback: Intcolor: Stringcurrency : String | 货币类型currentPrice: Intimage: DJShopItemImageimages: [DJShopItemImage]originalPrice: IntrecommendReason: StringshopItemGroupId: StringshopId: StringshopItemId: IntshopItemName: String | 商品名称shopName: String | 品牌名称cashbackDescription: StringbuttonDescription: StringspecialAttribute : [Int] DJShopItemImageheight: CGFloatwidth: CGFloatimageUrl: String DJCheckoutModelshippingAddress : DJAddressInfoorderItemsInShopList = DJOrderItemsInShopInfopaymentPriceDetailInfo = DJPaymentPriceDetailInfo()isOverallOutOfStock : Bool = falseoutOfStockMessage : String DJAddressInfoid: IntfirstName: StringlastName: StringpostalCode: StringfloorUnitNumber: Stringphone : StringisDefault: Bool = falsesearchval: StringblockNumber: StringroadName: Stringbuilding: Stringaddress: StringfullAddress : String = “”country: StringformatAddress : String DJOrderItemsInShopInfocurrency : StringshopId : StringshopName : StringitemCount : IntorderSubtotal : IntselectedShippingMethodInfo = DJShippingMethodInfo()availableShippingMethodInfo = DJShippingMethodInfoshopItemList = DJOrderShopItem DJPaymentPriceDetailInfocashbackDiscount :Int | 使用的返现金额cashbackDiscountMaximum :Int | 最多可以使用多少返现cashbackReward :Int | 可以拿到多少返现currency : String = “”orderCount : Int | 商品总数orderGroupSubtotal :Int | 商品加物流的总费用 ，未减Cashback和PromotionorderGroupTotal :Int | 使用过各种折扣后需要 Card 付的实际金额promotionDiscount :Int | Deja Promotion 的折扣金额cashbackPayRateDescription : String DJShippingMethodInfocurrency : StringshippingMethod = DJShippingMethod()shippingFeeSubtotal : Int DJShippingMethodshippingMethodId : IntshippingMethodName : StringshippingMethod : StringshippingFee : Intcurrency : StringestimatedDeliveryTimeDescription : StringcourierUrl : String DJCheckoutCreatandPayModelcheckTitle : String | the title of payment pop-up windowcheckSubTitle : String | reserved fieldcheckDescription : String | the description of payment pop-up windowcheckBtnName : String | the name of button, for example：Got itcheckType : Int | checkType, return : 20 success , 10 failure]]></content>
      <categories>
        <category>Deja</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Work Style]]></title>
    <url>%2F2019%2F01%2F19%2F201901181009%2F</url>
    <content type="text"><![CDATA[极简版ZTD 用笔记本记下你的任何想法，让事情从头脑中整理出来，不再遗忘。 当你到了办公室或家里，把这些新任务加入到待做事项主清单。这个清单可以在笔记本上创建。 在每天的开端，回顾清单，写下当天你想完成的1~3件要事。这就是你整个的规划系统，不需要其他东西。 尽早完成要事。在处理每项任务时，消除所有干扰，只专注于它，不要同时处理多个任务。完成一项要事之后，再接着处理下一项。 如果完成了要事，查看主清单上第二重要的任务是什么。确定好之后，按照步骤4进行处理。若有必要，再次重复这个流程。 每日基础事项 每天来公司列出一天的工作事项，完成并打钩 两分钟内的事情立即解决，超过两分钟放便签上 重复的事情要想办法固化 下班前写下一天的工作总结 每日基本原则 就像那天给某人的鼓励：要一直坚持做对的事情。“我们坚持做一件事情，不是因为这样做会有效果，而是因为坚信这样做是对的。”Draw a picture. Dream it, make it a belief, then make it come true. 每日事项发出靠谱才能让别人信任你，“凡事有交代，件件有着落，事事有回音。你不一定需要有多大的能力，但你一定要让协作伙伴知道你的能力边界和行动速度。 在公司内只做项目相关事情把项目作为自己的一部分，为自己的代码负责。 培养合作意识保障性，就是你有没有能力协同资源，打一场战役。 对所在场景形成闭环，了解自己的点线面体。能够跨越时间空间，跨越组织的边界，对各种趋势进行预料，并作出预案，进行系统性思考。利用高维打低维的思考能力。 体现自己的个人品牌你不仅能干活，把活干成，还能让社会上所有的人能看见、能评估你干的活。你不仅能主动组织协作，还能让不在你视线里的资源主动找上门来跟你合作。 利用SOP的方法将复杂事情变简单，使周围人放心将某一事件的标准操作步骤和要求以统一的格式描述出来，用来指导和规范日常的工作。有能力把一个复杂系统，包括各种不确定性，封装成一个简单的工作界面。这样才能使周围人放心。]]></content>
      <categories>
        <category>Idea</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Deja Packing]]></title>
    <url>%2F2019%2F01%2F08%2FDejaPacking%2F</url>
    <content type="text"><![CDATA[Auto packingMerge brunch to the master Login in jenkinsAddress: http://172.28.10.64:8080/job/RN_IOS_DT/ Status is free Choose RN_IOS_DT Click config button check “ Branches to build” Branch Specifier (blank for ‘any’) : */master And Save it build it and wait final status If failure , please check log. Manual packingXcode archiveEdit Scheme Choose environment archive DT 环境，证书为：TestDev | TestDis 顾名思义，开发以及测试的环境 DP 环境，证书为：ProductDis | ProductDev 接近真实环境，产品\市场\商务\CTO可以安装DP环境查看 AppStore 正式发布环境 Dis | Dev Dis 指打包发布的证书，Dev Xcode用连接线调试真机运行的证书 Download HockeyApp and Upload New Build Add Release Notes]]></content>
      <categories>
        <category>Deja</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[UICollectionVIew的渐变背景]]></title>
    <url>%2F2019%2F01%2F08%2FUICollectionVIewJianBianMD%2F</url>
    <content type="text"><![CDATA[Demand如图所示，UICollectionVIew的背景渐变，滑动的时候，渐变背景也需要跟着滑动。渐变背景在UICollectionView layer 和 Cell之间存在。 implementation增加新的渐变Layerprivate lazy var gradientLayer : CAGradientLayer = &#123; let TColor : UIColor = UIColor(fromHexString: "FF8E8A") let BColor = UIColor.white let gradientColors: [CGColor] = [TColor.cgColor, BColor.cgColor] let gradientLayer: CAGradientLayer = CAGradientLayer() gradientLayer.colors = gradientColors gradientLayer.startPoint = CGPoint(x: 0, y: 0) gradientLayer.endPoint = CGPoint(x: 0, y: 1) gradientLayer.frame = CGRect(x: 0, y: 0, width: ScreenWidth, height: ScreenHeight) return gradientLayer&#125;() 添加UICollectionViewprivate lazy var flowLayout: UICollectionViewFlowLayout = &#123; let flowLayout = UICollectionViewFlowLayout() flowLayout.scrollDirection = .vertical flowLayout.minimumInteritemSpacing = 15.0 flowLayout.minimumLineSpacing = 15.0 return flowLayout&#125;() private lazy var collectionView: UICollectionView = &#123; let collectionView = UICollectionView(frame: .zero, collectionViewLayout: flowLayout) collectionView.backgroundColor = UIColor.clear collectionView.delegate = self collectionView.dataSource = self collectionView.scrollsToTop = false collectionView.showsVerticalScrollIndicator = false collectionView.register(DJProductCollectionViewCell.self, forCellWithReuseIdentifier: "DJRedeemptionVCstreetSnapCell") collectionView.alwaysBounceVertical = false collectionView.bounces = false refreshControl = DJRefreshControl(in: collectionView) refreshControl?.addTarget(self, action: #selector(pullRefresh), for: .valueChanged) return collectionView&#125;() UICollectionView Delegateextension DJRedeemptionVC : UICollectionViewDelegate &#123; func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) &#123; if let vc = DJRedeemProductDetailVC() &#123; if pageResult.count &gt; indexPath.row &#123; let pageResultItem = pageResult[indexPath.row] if let shopItemId = pageResultItem.shopItemId, let shopItemGroupId = pageResultItem.shopItemGroupId &#123; vc.shopItemId = shopItemId as NSNumber vc.shopItemGroupId = shopItemGroupId self.navigationController?.pushViewController(vc, animated: true) &#125; &#125; &#125; &#125;&#125;extension DJRedeemptionVC : UICollectionViewDataSource &#123; func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -&gt; Int &#123; return pageResult.count &#125; func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -&gt; UICollectionViewCell &#123; let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "DJRedeemptionVCstreetSnapCell", for: indexPath) as! DJProductCollectionViewCell if pageResult.count &gt; indexPath.row &#123; let pageResultItem = pageResult[indexPath.row] if let shopItemId = pageResultItem.shopItemId &#123; cell.shopItemId = shopItemId &#125; cell.setImageUrl(pageResultItem.image?.imageUrl) cell.setBrandName(pageResultItem.shopName) cell.setClothName(pageResultItem.shopItemName) cell.setPriceInfo(pageResultItem.currentPrice, uprice: pageResultItem.originalPrice, currency: pageResultItem.currency) cell.setRecommendReason(pageResultItem.recommendReason) cell.clipsToBounds = true &#125; return cell &#125;&#125;extension DJRedeemptionVC : UICollectionViewDelegateFlowLayout &#123; func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAt indexPath: IndexPath) -&gt; CGSize &#123; return DJProductCollectionViewCell.calculateFixedCellSize() &#125; func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, insetForSectionAt section: Int) -&gt; UIEdgeInsets &#123; return UIEdgeInsets.init(top: 180, left: 23, bottom: 20, right: 23) &#125;&#125; 最关键的两句话collectionView的layer上面插入gradientLayer，位置放在最下面。 之前我写了好多方法都没能成功的把这个layer或者View放在collectionview和cell之间。每次尝试都是新添加的layer或者view依然在cell的上面。 查了一些资料，然后找到一个最适合的方法，只要加一句代码： Layer.zPosition = -1 layer可以通过设置zPosition属性来固定层级关系，默认是0，设置为-1的话就在最下层，值越大层级的关系就越高。CollectionView本来的layer设置为0,所以将新加入的layer设置为-1即可达到需求的效果。 override func viewDidLoad() &#123; super.viewDidLoad() view.backgroundColor = UIColor.white view.addSubview(collectionView) gradientLayer.zPosition = -1 collectionView.layer.insertSublayer(gradientLayer, at: 0)&#125; 下拉刷新的判断方法extension DJRedeemptionVC : UIScrollViewDelegate&#123; func scrollViewDidScroll(_ scrollView: UIScrollView) &#123; if scrollView.contentSize.height &lt; ScreenHeight &#123; return &#125; print("scrollView.contentSize.height: \(scrollView.contentSize.height)") print("scrollView.contentOffset.y: \(scrollView.contentOffset.y)") print("scrollView.frame.size.height: \(scrollView.frame.size.height)") print("scrollView.contentInset.bottom: \(scrollView.contentInset.bottom)") print("scrollView.contentInset.top: \(scrollView.contentInset.top)") print("left Value : \(scrollView.contentSize.height - scrollView.contentOffset.y)") print("&lt;=right Value: \(scrollView.frame.size.height - scrollView.contentInset.bottom + scrollView.contentInset.top + 40)") if scrollView.contentSize.height - scrollView.contentOffset.y &lt;= scrollView.frame.size.height - scrollView.contentInset.bottom + scrollView.contentInset.top + 40 &#123; if (!isLoadingMore &amp;&amp; redeemptionHomeNetTask.last == false) &#123; isLoadingMore = true page += 1 getShopDetailListNetTask(page: page) &#125; &#125; &#125;&#125; Thinking And Summarized上面说的是第一种方法，第二种方法是通过CollectionView增加View来进行实现，这个View在CollectionView和Cell之间插入一个渐变的View.当然View上也可以增加其他label以及imageView 增加DJPassThroughView的类如下：DJPassThroughView创建这个View是为了可以将这个View插入到CollectionView的cell上面，且不会挡住cell的点击事件 // Created by levi duan on 2019/1/13.// Copyright © 2019 Mozat. All rights reserved.//import UIKitclass DJPassThroughView: UIView &#123; override func point(inside point: CGPoint, with event: UIEvent?) -&gt; Bool &#123; for subview in subviews &#123; if !subview.isHidden &amp;&amp; subview.isUserInteractionEnabled &amp;&amp; subview.point(inside: convert(point, to: subview), with: event) &#123; return true &#125; &#125; return false &#125;&#125; 初始化DJPassThroughView的变量private lazy var passThroughView : DJPassThroughView = &#123; let passThroughView = DJPassThroughView(frame: CGRect(x: 0, y: 0, width: ScreenWidth, height: 180+422)) let TColor : UIColor = UIColor(fromHexString: "FF8E8A") let BColor = UIColor.white let gradientColors: [CGColor] = [TColor.cgColor, BColor.cgColor] //创建并实例化 let gradientLayer: CAGradientLayer = CAGradientLayer() gradientLayer.colors = gradientColors //(这里的起始和终止位置就是按照坐标系,四个角分别是左上(0,0),左下(0,1),右上(1,0),右下(1,1)) //渲染的起始位置 gradientLayer.startPoint = CGPoint(x: 0, y: 0) //渲染的终止位置 gradientLayer.endPoint = CGPoint(x: 0, y: 1) //设置frame和插入view的layer gradientLayer.frame = CGRect(x: 0, y: 180, width: ScreenWidth, height: 422) passThroughView.layer.insertSublayer(gradientLayer, at: 0) passThroughView.isUserInteractionEnabled = true return passThroughView&#125;() 最关键的两句话放在Cell下面CollectionView上面可以加上这句话: passThroughView.layer.zPosition = -1; 如果放在Cell上面，不影响点击Cell，可以不加上面这句话 collectionView.addSubview(passThroughView) 到这，需求就结束啦]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS中点击按钮跳转微信小程序]]></title>
    <url>%2F2018%2F12%2F28%2F2020-01-08-17%2F</url>
    <content type="text"><![CDATA[需求在iOS的UIWebView界面，点击button，直接打开微信跳转到微信小程序。 实现方式 接入微信SDK,pod中增加下面一句话 pod ‘WechatOpenSDK’ AppDelegate文件导入&lt;WechatOpenSDK/WXApi.h&gt;并实现代理 初始化你的微信WXAPI，增加代理的时候，会报警告，”Implementing deprecated method”,由于微信没有更新API，就只能用之前版本废了的方法，所以暂时就忽略警告吧，如果微信改了的话，请及时通知我。 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; [WXApi registerApp:@"wxf691476627360000"];//ID为你申请的微信开放ID&#125;- (BOOL)application:(UIApplication *)application handleOpenURL:(nonnull NSURL *)url&#123; return [WXApi handleOpenURL:url delegate:self];&#125;- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url sourceApplication:(nullable NSString *)sourceApplication annotation:(nonnull id)annotation&#123; return [WXApi handleOpenURL:url delegate:self];&#125;-(void) onReq:(BaseReq*)req&#123; NSLog(@"req : %@", req);&#125;-(void) onResp:(BaseResp*)resp&#123; NSLog(@"req : %@", resp);&#125; WKWebView代理 - (void)webView:(WKWebView*)webView decidePolicyForNavigationAction:(WKNavigationAction*)navigationAction decisionHandler:(void(^)(WKNavigationActionPolicy))decisionHandler&#123; WKNavigationActionPolicy policy = WKNavigationActionPolicyAllow; // 之前是打开直接跳转APPSOTRE，所以要WKWebView要加上这句话，才能贴砖到APPSTORE商店 if([[navigationAction.request.URL host] isEqualToString:@"itunes.apple.com"] &amp;&amp; [[UIApplication sharedApplication] openURL:navigationAction.request.URL])&#123; policy = WKNavigationActionPolicyCancel; &#125; decisionHandler(policy);&#125;- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message&#123; if ([message.name isEqualToString:@"OpenWxMinFunc"]) &#123; [_webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:message.body]]]; [Tools enter_weixin_miniProgramid:@“填写申请的小程序名称” path:@“填写路径”]; &#125;&#125;- (void)webView:(WKWebView *)webView didFinishNavigation:(null_unspecified WKNavigation *)navigation&#123; [_hud hideAnimated:YES];&#125;- (void)webView:(WKWebView *)webView didFailNavigation:(null_unspecified WKNavigation *)navigation withError:(NSError *)error&#123; [_hud hideAnimated:YES]; [self goBack];&#125;- (void)gobackVoid&#123; [self goBack];&#125;- (void)goBack&#123; id vc = [self.navigationController popViewControllerAnimated:YES]; if (nil == vc) &#123; [self dismissViewControllerAnimated:YES completion:^&#123; // 无事件处理 &#125;]; &#125;&#125;- (WKWebView *)webView&#123; if (!_webView) &#123; WKWebViewConfiguration *config = [[WKWebViewConfiguration alloc]init]; config.preferences = [[WKPreferences alloc]init]; config.preferences.minimumFontSize = 10; config.preferences.javaScriptEnabled = YES; config.preferences.javaScriptCanOpenWindowsAutomatically = NO; config.userContentController = [[WKUserContentController alloc] init]; config.processPool = [[WKProcessPool alloc] init]; [config.userContentController addScriptMessageHandler:self name:@"OpenWxMinFunc"]; _webView = [[WKWebView alloc] initWithFrame:CGRectZero configuration:config]; _webView.backgroundColor = [UIColor whiteColor]; _webView.scrollView.bounces = YES; NSURL *url = [NSURL URLWithString:@"https://dddd.net/ddd/song_app_list.html"];// 填写你的网址URL [_webView loadRequest:[NSURLRequest requestWithURL:url]]; _webView.navigationDelegate = self; &#125; return _webView;&#125; 微信小程序跳转方法： + (void)enter_weixin_miniProgramid:(NSString *)userName path:(NSString *)path&#123; if (![WXApi isWXAppInstalled]) &#123; [self showMessage:@"您未安装微信，请先安装微信"]; return; &#125; WXLaunchMiniProgramReq *launchMini = [WXLaunchMiniProgramReq object]; launchMini.userName = userName; launchMini.path = path; launchMini.miniProgramType = WXMiniProgramTypeRelease; [WXApi sendReq:launchMini];&#125; 修改info.plist，增加一条： LSApplicationQueriesSchemes weixin wechat 效果如图: 思考与总结： 这是App拉起小程序，请问如果用小程序拉起APP？是通过onResp回调么？ [config.userContentController addScriptMessageHandler:self name:@”OpenWxMinFunc”]，在WKWebView要配置这一条，才能和H5前端联调，请问OpenWxMinFunc这个字段是干嘛用的？]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Ionic环境搭建]]></title>
    <url>%2F2018%2F12%2F28%2F2020-01-08-18%2F</url>
    <content type="text"><![CDATA[安装brew1.命令行输入/usr/bin/ruby -e “$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; brew -v 显示版本号 安装node.js命令： brew install node ps：如果之前曾经安装过但是版本并不是最新版本，请升级版本，步骤如下： 看node版本，没安装的请先安装；node -vsudo npm cache clean -f 安装node版本管理工具’n’;sudo npm install n -g 使用版本管理工具安装指定node或者升级到最新node版本；sudo n stable （安装node最新版本）sudo n 8.9.4 （安装node指定版本8.9.4） 使用node -v查看node版本，如果版本号改变为你想要的则升级成功。 安装 ionic 安装全局的ionic CLInpm install -g ionic 检测ionic是否安装成功：ionic -v 创建ionic项目通过ionic cli命令创建ionic项目：ionic start myApp tabs –type=angular（目前ionic4是beta版，需要加上 –type=angular才能创建基于angular的项目，后面等发布正式版本，就不需要了） 运行ionic项目： ionic serve –lab 可能遇到失败原因： Error: Node Sass does not yet support your current environment: OS X 64-bit with Unsupported runtime (67) 安装 cordova 利用npm命令安装cordova sudo npm install -g cordova 利用cordova创建项目 cordova create HelloWorld 增加iOS开发平台 cordova playform add ios 通过iOS设备进行运行 cordova run ios 利用模拟器进行运行 cordova emulate ios –target iPhone-6s 通过模拟器运行ionic ionic cordova emulate ios – –buildFlag=”-UseModernBuildSystem=0” –verbose 安装UI工具 VSCODE直接在官网安装，没有太多需要注意的地方。 至此环境已经搭建好了，可能遇到的问题： 安装出现的问题问题：-bash: cordova: command not found解决方案： export PATH=$PATH:/usr/local/share/npm/bin npm config get prefix echo “$PATH” npm config set prefix /usr/local sudo npm install -g cordova 问题：无法安装cordova解决方案： sudo npm install –unsafe-perm=true –allow-root –save-dev cordova 问题：无法用iOS虚拟机打开解决方案： ionic cordova emulate ios – –buildFlag=”-UseModernBuildSystem=0” 如果出现这种错误： CordovaError: Promise rejected with non-error: “xcode-select: error: tool ‘xcodebuild’ requires Xcode, but active developer directory ‘/Library/Developer/CommandLineTools’ is a command line tools instance\n” at cli.catch.err (/usr/local/lib/node_modules/cordova/bin/cordova:30:15) at process.internalTickCallback (internal/process/next_tick.js:77:7)[ERROR] An error occurred while running subprocess cordova. cordova emulate ios --buildFlag=-UseModernBuildSystem=0 exited with exit code 1. Re-running this command with the --verbose flag may provide more information. 这种情况是xcodebuild的路径不正确，解决方案： sudo xcode-select –switch /Applications/Xcode.app/Contents/Developer/]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS UICollectionViewCell中的图片数字复用问题]]></title>
    <url>%2F2018%2F12%2F28%2F2020-01-08-19%2F</url>
    <content type="text"><![CDATA[需求如图所示，播放次数:2000，但是要求只能通过图片数字来实现. 实现方式这种情况下，如果仅仅通过拼接数字图片，在cell方法中实现，就会引起cell复用问题。类似这种情况 播放次数:2000万 ， 其中2，0，0，0,万 为5张图片拼接而成 有一种做法是将4个image拼接成一个ImageView上面，这种方式不会引起复用. 由于播放次数最多不会超过10位数，所以就可以申请10个imageView,来承载数字图片，后面用不到的可以将ImageView进行隐藏，这种做法也不会引起复用问题。 我利用的是第二种做法，首先在cell初始化的时候对数字的imageView进行初始化操作，并打上相应的tag值，添加数据的时候，通过tag值找到对应的imageView。 for (int i=0;i&lt;12;++i) &#123; UIImageView *numberImageView = [[UIImageView alloc] init]; numberImageView.tag=i+1000; [self addSubview:numberImageView];&#125; 初始化完毕后，在cell的添加数据的方法中,对数字ImageView进行Frame布局，布局方法如下： CGFloat width = CGRectGetMaxX(playerImage.frame); CGFloat height = CGRectGetMaxY(playerImage.frame); for (int i=1;i&lt;=11;++i) &#123; UIImageView *imageView = (UIImageView *)[self viewWithTag:i+1000]; imageView.hidden = YES; &#125; int top = 0; for (int i=0; i&lt;numberStr.length; ++i) &#123; UIImageView *numberImageView = (UIImageView *)[self viewWithTag:i+1001]; numberImageView.hidden = NO; numberImageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"图片数字_%c",[numberStr characterAtIndex:i]]]; numberImageView.frame = CGRectMake(width, height-numberImageView.image.size.height-1, numberImageView.image.size.width, numberImageView.image.size.height); width += numberImageView.image.size.width; top = i; &#125; ++top; if (flag == 1) &#123; UIImageView *numberImageView = (UIImageView *)[self viewWithTag:top+1001]; numberImageView.hidden = NO; numberImageView.image = [UIImage imageNamed:@"图片-万"]; numberImageView.frame = CGRectMake(width, height-numberImageView.image.size.height, numberImageView.image.size.width, numberImageView.image.size.height);&#125; 思考与总结：关于Cell复用的问题，大部分都是UIView个数不一致导致的，所以一定要保证UIView在每个cell中个数是一致的，如果不显示，你要对此进行隐藏。]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS个人中心透明导航栏简易实现]]></title>
    <url>%2F2018%2F06%2F27%2F2020-01-08-21%2F</url>
    <content type="text"><![CDATA[需求任务进度的圆形区域可以点击(黄色圆圈内的部分都可以点击) 实现方法实现思路 通过上图红色方框的UIView增加手势，如果仅仅是通过touchView.layer.cornerRadius的方式是无法将上图红色矩形的触摸区域变成黄色的圆形触摸区域。 通过hitTest:withEvent方法进行处理，判断圆圈范围，响应其触摸事件。若不在圆圈内，则不处理触摸事件。 代码- (BOOL)touchPointInsideCircle:(CGPoint)center radius:(CGFloat)radius targetPoint:(CGPoint)point&#123; CGFloat dist = sqrtf((point.x - center.x) * (point.x - center.x) + (point.y - center.y) * (point.y - center.y)); return (dist &lt;= radius);&#125;- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event&#123; UIView *hitView = nil; BOOL pointInRound = [self touchPointInsideCircle:self.touchView.center radius:163/2.0 targetPoint:point]; if (pointInRound) &#123; hitView = self.touchView; &#125; else &#123; hitView = self; &#125; return hitView;&#125;- (UIView *)touchView&#123; if (!_touchView) &#123; _touchView = [[UIView alloc] init]; _touchView.frame = CGRectMake(0, 0, 163, 163); _touchView.centerX = self.frame.size.width/2.0; _touchView.centerY = self.frame.size.height/2.0; _touchView.layer.cornerRadius = 163/2.0; _touchView.layer.masksToBounds = YES; _touchView.clipsToBounds = YES; UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(touthVoid)]; [_touchView addGestureRecognizer:tapGesture]; &#125; return _touchView;&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Block循环引用很有意思的一道题目]]></title>
    <url>%2F2018%2F06%2F15%2F2020-01-08-15%2F</url>
    <content type="text"><![CDATA[疑问是在简书中看到的，原地址为：https://www.jianshu.com/p/6d6fd717390e 例一: - (void)viewDidLoad &#123; [super viewDidLoad]; Student *student = [[Student alloc]init]; student.name = @"Hello World"; __weak typeof(student) weakStu = student; Student *strongStu = weakStu; student.study = ^&#123; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; NSLog(@"my name is = %@", strongStu.name); &#125;); &#125;;&#125; 作者原话是： 例1是有内存泄漏的没有走-[Student dealloc]，因为未执行student.study, 所以dispatch_after block也不会走，但是dispatch_after bLock却强引用了strongStu还是发生了循环引用。这个比较好理解。但是下面例2,就改了一行代码 我怎么也想不通为什么 没有发生循环引用，走了-[Student dealloc] . 例2： - (void)viewDidLoad &#123; [super viewDidLoad]; Student *student = [[Student alloc]init]; student.name = @"Hello World"; __weak typeof(student) weakStu = student; student.study = ^&#123; Student *strongStu = weakStu; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; NSLog(@"my name is = %@", strongStu.name); &#125;); &#125;;&#125; dispatch_after block 强引用了外部变量strongStu ，这种不调用student.study()的写法为什么没有循环引用呢，但是如果在ViwDidLoad结尾调用student.study()，那么会在2秒后执行完dispatch_after block才会走-[Student dealloc]，不就说明dispatch_after block持有这个student，走完才回销毁，那如果不执行student.study()的话，按道理讲，应该也会被dispatch_after block持有这个student，为什么 不会产生循环引用呢 匪夷所思如果有哪个大神路过，麻烦给个思路，我真想不明白。 请问这个问题出在哪里？ - 华丽的分割线，思考完再看我的理解。。 - 解答首先说下你对例1场景解答的问题你的解答是：Q：例1是有内存泄漏的没有走-[Student dealloc]，因为未执行student.study, 所以dispatch_after block也不会走，但是dispatch_after bLock却强引用了strongStu还是发生了循环引用。这个比较好理解。但是下面例2,就改了一行代码 我怎么也想不通为什么 没有发生循环引用，走了-[Student dealloc] .A：我先更正下你的解答1.例1的内存泄漏和执行以及未执行student.study没有任何直接关联，如果未执行student.study存在内存泄漏，那么执行也会存在内存泄漏。2.但是dispatch_after bLock却强引用了strongStu还是发生了循环引用，这里面dispatch_after只是干扰因素，和你的内存泄漏没有直接关联。你可以去掉它，也一样会内存泄漏，所以去年的你应该是理解错了，可能今年的你已经解决这个问题了，不过还是针对去年的你说一下问题的原因吧。 Q：例2，dispatch_after block 强引用了外部变量strongStu ，这种不调用student.study()的写法为什么没有循环引用呢，但是如果在ViwDidLoad结尾调用student.study()，那么会在2秒后执行完dispatch_after block才会走-[Student dealloc]，不就说明dispatch_after block持有这个student，走完才回销毁，那如果不执行student.study()的话，按道理讲，应该也会被dispatch_after block持有这个student，为什么 不会产生循环引用呢。A：无论例1还是例2 dispatch_after的block都不会强引用你的变量，强引用变量的是strongStu.name。无论是否调用student.study()和你的内存泄漏没有直接关联。 我对例1的理解例1之所以会内存泄漏是由于，student类中的的方法study是用copy属性修饰的，因此在你调用student.study = ^{ }时，是将strongStu.name这个强引用赋值到了block的堆中，block本来就被strongStu所引用，block又同时引用了StrongStu,导致A,B成为双向引用的保留环。__weak typeof(student) weakStu = student;Student *strongStu = weakStu;这两句话一起写，虽然不明白什么意思，不过weakStu是弱引用，storngStu是强引用。如果你想打破这个环，很简单，就是用弱引用就可以了。把例一这句话改成 NSLog(@”my name is = %@”, weakStu.name);就不会出现内存泄漏了。 我对例2的理解例2，为什么没有循环引用？因为你在block里面将弱引用变成了强引用，这个你应该会懂吧？那为什么例1的强引用就会循环引用，例2就不会呢？很简单，因为例1的StrongStu是block外面的强引用，这个是引用这个block的强引用，而例2的block里面的的强引用是临时变量，在block结束后会自动销毁掉。应该是没理解block外面的强引用和block里面的强引用导致不明白这两个例子的区别。 思考与行动： 为什么dispatch_after的block函数，不需要解决循环引用保留环的问题？ 如果我们常常写网络请求时候，会用到成功的block回调或者失败的block回调，这里的block需要写@weakify或者@strongify么？]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS 设置启动页 LaunchImage 不显示问题]]></title>
    <url>%2F2018%2F06%2F15%2F2020-01-08-16%2F</url>
    <content type="text"><![CDATA[问题新项目搭建好的时候，可能替换启动页图片发现启动页图片不显示问题。 解决 大概率是配置问题，Target-&gt;General-&gt;App Icons and Launch Images 下面有两个选项： Launch Images Source: LaunchImage 这个是启动图文件夹名称，正常会自动匹配,点一下菜单看下是否和你自动图文件名名称相匹配，如果不匹配，重新点一下菜单，它会进行自动匹配，稍等1分钟，就会匹配成功。 看下Launch Screen File: （是否有文件名） 如果有文件名，请把它删掉，大部分人也是因为这个问题，导致启动图显示不出来，一定要保持这个选项为空。 如果还显示不出，那就点击LaunchScreen.storyboard，将右侧栏菜单中的Use as Launch Screen 选项去掉。 如果还不成功，删除手机app, 重新运行App试试。多喝热水，重启Xcode试试。]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS个人中心透明导航栏简易实现]]></title>
    <url>%2F2018%2F06%2F15%2F2020-01-08-20%2F</url>
    <content type="text"><![CDATA[需求iOS项目个人中心需要导航栏随着内容的上滑，导航栏颜色逐渐变深，到指定距离时，导航栏变为不透明，状态栏颜色变黑色，图标颜色从白色变为黑色。如图所示： 实现方法1 在导航栏自定义类中写一个方法方法名为：- (void)animateByOffsetY:(CGFloat)offsety 方法功能是通过滑动的位移，使状态栏的所有View发生透明度改变，代码如下： - (void)animateByOffsetY:(CGFloat)offsety&#123; CGFloat fitHeight = 156; // 导航栏上的图片或者字体，随位移变化透明度也发生变化 self.usernameLabel.alpha = offsety/fitHeight; self.avatarImageView.alpha = offsety/fitHeight; // 个人中心导航栏背景颜色，随位移变化透明度也发生变化 self.backgroundColor = [ColorUtil cl_colorWithHexString:@"#FFFFFF" alpha:offsety/fitHeight]; // 当滑动到一定值之后，更改状态栏的图片，由白色变为黑色 if (offsety &lt; fitHeight*0.7) &#123; self.rightBtnImageView.image = self.isMySelf ? IDSImageNamed(@"ic_nav_setup_w") : IDSImageNamed(@"ic_nav_report_w"); self.gobackImageView.image = IDSImageNamed(@"ic_nav_back_w"); &#125; else &#123; self.rightBtnImageView.image = self.isMySelf ? IDSImageNamed(@"ic_nav_setup_b") : IDSImageNamed(@"ic_nav_report_b"); self.gobackImageView.image = IDSImageNamed(@"ic_nav_back_b"); &#125;&#125; 2 在UIViewController中实现如下方法实现- (void)scrollViewDidScroll:(UIScrollView *)scrollView方法，用来控制状态栏和自定义导航栏的颜色变化，代码如下： /** 方法功能来控制透明导航栏随滑动进行透明度变化，状态栏也会在一定距离发生变化 */- (void)scrollViewDidScroll:(UIScrollView *)scrollView&#123; [self.navigationView animateByOffsetY:scrollView.contentOffset.y-3]; if (scrollView.contentOffset.y &lt;= 0) &#123; [scrollView setContentOffset:CGPointMake(scrollView.contentOffset.x, 0)]; &#125; CGFloat fitHeight = 156; // 下面功能为状态栏色值发生改变的方法 if (scrollView.contentOffset.y &lt; fitHeight) &#123; if (_isNavWhiteColor) &#123; return; &#125; _isNavWhiteColor = YES; if ([self respondsToSelector:@selector(setNeedsStatusBarAppearanceUpdate)]) &#123; [self preferredStatusBarStyle]; [self performSelector:@selector(setNeedsStatusBarAppearanceUpdate)]; &#125; &#125; else &#123; if (!_isNavWhiteColor) &#123; return; &#125; _isNavWhiteColor = NO; if ([self respondsToSelector:@selector(setNeedsStatusBarAppearanceUpdate)]) &#123; [self preferredStatusBarStyle]; [self performSelector:@selector(setNeedsStatusBarAppearanceUpdate)]; &#125; &#125;&#125;/** 修改状态栏颜色 @return 返回状态栏颜色变量 */- (UIStatusBarStyle)preferredStatusBarStyle&#123; if (_isNavWhiteColor) &#123; return UIStatusBarStyleLightContent; &#125; else &#123; return UIStatusBarStyleDefault; &#125;&#125; 思考与行动： 不自定义导航栏，直接利用系统原生的导航栏如何达到这种效果，需要注意什么？ 不自定义导航栏，直接利用系统原生的导航栏，如何实现页面平滑过渡效果？如下gif图所示]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[使用NSTimer定时器出现内存泄漏问题]]></title>
    <url>%2F2018%2F06%2F14%2F2020-01-08-14%2F</url>
    <content type="text"><![CDATA[有没有发现在使用NSTimer类的定时器，实现定时器的类并没有走dealloc方法？这是为什么？ NSTimer常用定时器写法正常我们利用NSTimer方式实现代码如下： @property (nonatomic, strong) NSTimer *tanMukuTimer;- (void)stopTanMuku&#123; [_tanMukuTimer invalidate]; _tanMukuTimer = nil;&#125;- (void)beginTanMuKu&#123; if (_tanMukuTimer == nil) &#123; _tanMukuTimer = [NSTimer scheduledTimerWithTimeInterval:30 target:self selector:@selector(requestNetwork) userInfo:nil repeats:YES]; [[NSRunLoop currentRunLoop] addTimer:_tanMukuTimer forMode:NSDefaultRunLoopMode]; &#125;&#125; 问题用此方法创建的定时器会在指定的间隔时间执行定时器的方法-requestNetwork,知道开发者稍后将其手动关闭为止，target与selector参数标识计时器将在哪个对象上调用哪个方法，计时器会保留目标对象，等到自身失效，才会释放目标对象，因为计时器是用实例变量来存放的，所以实例也保留了计时器，然而就出现了保留环。除非在某个时间点手动调用-stopTanMuku 方法停止计时器，从而打破保留环，但通过调用方法来避免内存哦泄漏，手动干预的方式并不理想。如果想在系统回收本类时调用停止计时器的方案，打破循环引用，就会出现问题，因为计时器对象有引用计数，所以self实例的保留计数不会为0，因此系统就不会调用dealloc方法，而现在有没有人调用停止计时器的方法，所以就会出现内存泄漏，类永远无法被释放掉。如果是计时器调用的是请求数据方法，那就导致更多其他严重的内存泄漏问题。 解决方法这种方法无法通过代码检测出来，因此我们要对这个问题进行避免，可以通过block进行解决，因此要写个NSTimer的分类： @interface NSTimer (WPGBlockSupport)+ (NSTimer *)wpg_scheduledTimerWithTimeInterval:(NSTimeInterval)interval block:(void(^)(void))block repeats:(BOOL)repeats;@end#import "NSTimer+WPGBlockSupport.h"@implementation NSTimer (WPGBlockSupport)+ (NSTimer *)wpg_scheduledTimerWithTimeInterval:(NSTimeInterval)interval block:(void(^)(void))block repeats:(BOOL)repeats&#123; return [self scheduledTimerWithTimeInterval:interval target:self selector:@selector(wpg_blockInvoke:) userInfo:[block copy] repeats:repeats];&#125;+ (void)wpg_blockInvoke:(NSTimer *)timer&#123; void (^block)(void) = timer.userInfo; if (block) &#123; block(); &#125;&#125;@end 将block作为userinfo的参数传进去，只要计时器还有效，就会一直保留着它，传入参数时要通过copy方法将block，copy到堆上，否则等到稍后要执行它的时候，该块可能已经无效了。计时器现在的target是NSTimer的类对象，由于是个单例，所以不用担心产生循环引用的问题。但是这本身还不能解决问题，因为block捕获了self变量，所以block要保留实例，计时器有通过userinfo保留了block，最后实例本身还要保留计时器，不过改成weak引用，就直接打破保留环，打破循环引用。 - (void)upstartQueryTimer&#123; [self upstopQueryTimer]; if (nil == _upqueryNoticeTimer) &#123; __weak typeof(self) weakSelf = self; _upqueryNoticeTimer = [NSTimer wpg_scheduledTimerWithTimeInterval:3.0 block:^&#123; __strong typeof(self) strongself = weakSelf; [strongself startAnimition]; &#125; repeats:NO]; &#125;&#125; 这段代码先定义了弱引用，然后通过weak变量不直接捕获self变量，这样self就不会被计时器所保留，当块开始执行时，而不直接捕获普通的self变量，当开始执行时，立刻在block内生成strong引用，以保证实例执行期间可以存活，但由于是临时变量，strong引用的self并没有存在堆中，执行后自动就被释放了。这样就完美解决了，不会调用系统不会调用dealloc的内存泄漏问题。 思考与行动： 除了通过NSTimer实现计时器外，还有其他实现定时器的方式么？哪个更好用？ 通过GCD实现的定时器会出现内存泄漏的问题吗？GCD是如何实现定时器方法的？]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS App导入自定义字体]]></title>
    <url>%2F2018%2F06%2F12%2F2020-01-08-13%2F</url>
    <content type="text"><![CDATA[需求iOS项目中需要导入第三方字体，来进行显示字体样式。 实现方法1 先找到适合的字体先在字体吧找到漂亮好看的第三方字体，网站如下：http://ziti8.cc/fonts/1057.htm 下载的字体可能三种后缀格式，分别为：ttc/ttf/otf TTC是几个TTF合成的字型，例如包含粗体、细体两种字型，TTF就只有一种字型。 TTF是apple和微软共同推出的字体文件格式，只有一种字型。 OTF是TTF的升级版，支持更高级特性的字体。 2 将字体库添加到项目中直接拉近资源目录就看，如图下所示： 3 Info.plist中添加字体在info.plist文件中高速系统你想连接导入的字体文件，字段为 Key： Fonts provided by application Value: 字体名称.otf/.ttf/.ttc 如图所示： 4 在终端中打印字体名称通过遍历的方式进行打印字体名称，代码如下： for (NSString *fontfamilyname in [UIFont familyNames]) &#123; NSLog(@"family:'%@'",fontfamilyname); for(NSString *fontName in [UIFont fontNamesForFamilyName:fontfamilyname]) &#123; NSLog(@"\tfont:'%@'",fontName); &#125; NSLog(@"-------------"); &#125; 打印出来找到我导入的字体font:后面的字段就是我们想要的字体名称，如下图： 如下图所示，这个字体的名称为中文的，这种情况下，就只能通过字体的中文拼音大写去找，FZCTH，这几个字母刚好能匹配到打印出来的字体FZCTHJW–GB1-0,这个也刚好是我们想要得到的字体。 5 设置字体通过代码将字体设置为导入的这个新字体就可以，方法如下： - (UILabel *)gameNameLabel&#123; if (!_gameNameLabel) &#123; _gameNameLabel = [[UILabel alloc] init]; _gameNameLabel.text = @" "; _gameNameLabel.font = [UIFont fontWithName:@"FZCTHJW--GB1-0" size:55]; _gameNameLabel.textColor = [ColorUtil cl_colorWithHexString:@"#FFFFFF"]; &#125; return _gameNameLabel;&#125; 至此，我们就成功导入并使用 .ttf 文件了。 借鉴作者的链接地址：https://www.jianshu.com/p/e29c37639d81]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS下载H5游戏zip包，并解压在本地运行H5游戏]]></title>
    <url>%2F2018%2F05%2F20%2F2020-01-08%2F</url>
    <content type="text"><![CDATA[前言： 这篇没有太多技术细节以及底层知识，仅仅是解决需求的操作步骤以及解决方案。 代码会放在Github上，希望大家一起讨论下存在的问题，以及更好的解决方案。 正文的代码大部分是伪代码，供学习以及讨论用，因此没有写太多防御式编程的思想，如果用于工作中，需要自己做好防御式编程的措施。 为防止有着同样需求的伙伴无法通过关键字搜索到本文，所以将标题起的如此冗长以及不符合正常标题的起名规范，希望大家谅解，这篇文目的不是为了分享知识，而是为了解决需求以及问题，这个下载器是我们做H5游戏实时匹配对战时用到一个小组件，简要的说下实现原理。 需求如下 从后端API接口下载游戏压缩包，并保存在本地。 在本地沙盒目录进行解压缩 解压成功后保存在本地指定目录，进行文件管理 如果版本号变更，需要将本地游戏删除，并保存最新版本的H5游戏到本地 在本地搭建代理服务器，通过iOS本地服务器以及端口号，运行H5游戏。 我的思路尽量用最简洁的方法来实现功能，尽量用最新的API来解决技术场景，为了供大家理解流程。简化不需要的冗余代码。 一、关于API下载下载流程图 中文版 建立游戏模块Model主要用到的字段有：H5下载链接，游戏唯一标识符，游戏版本号字段等。 /** * 游戏字段 Model */@interface WPGGamePageGames : NSObject// 游戏id@property (nonatomic, copy) NSString *gameId;// H5游戏版本@property (nonatomic, copy) NSString *h5Version;// H5游戏包下载@property (nonatomic, copy) NSString *h5Down;// H5游戏包MD5@property (nonatomic, copy) NSString *h5Md5;@end 调用 NSURLSession API进行请求下载对NSURLSession进行初始化加载： - (NSURLSession *)session&#123; if (!_session) &#123; _session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:[NSOperationQueue mainQueue]]; &#125; return _session;&#125; 建立一个下载请求，如果不需要断点续传，可以自动忽略 (void)pause 和 (void)resume 方法。 @property (nonatomic, strong) NSURLSessionDownloadTask *task;@property (nonatomic, strong) NSData *resumeData;// 开始创建下载请求并进行下载（_gameModel.h5Down 为H5游戏的下载链接）- (void)start&#123; NSURL *url = [NSURL URLWithString:_gameModel.h5Down]; NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url]; request.HTTPMethod = @"GET"; self.task = [self.session downloadTaskWithRequest:request]; [self.task resume];&#125;// 暂停下载请求- (void)pause&#123; __weak __typeof(self) weakSelf = self; [self.task cancelByProducingResumeData:^(NSData * _Nullable resumeData) &#123; weakSelf.resumeData = resumeData; weakSelf.task = nil; &#125;];&#125;// 恢复下载请求进行断点续传- (void)resume&#123; self.task = [self.session downloadTaskWithResumeData:self.resumeData]; [self.task resume]; self.resumeData = nil;&#125; 4个重要下载回调代理如下： - (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didWriteData:(int64_t)bytesWritten totalBytesWritten:(int64_t)totalBytesWritten totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite&#123; // 展示下载进度&#125;- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTaskdidFinishDownloadingToURL:(NSURL *)location&#123; // 下载成功&#125;- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error&#123; if (error) &#123; // 下载失败 &#125;&#125;- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didResumeAtOffset:(int64_t)fileOffset expectedTotalBytes:(int64_t)expectedTotalBytes&#123; // 断点续传的代理&#125; 二、在本地沙盒目录进行解压缩解压缩需要用到第三方库，SSZipArchive下载地址如下：https://github.com/ZipArchive/ZipArchive 注意 SSZipArchive 引入到工程时需要添加 libz.tbd 库，否则编译时通不过。使用SSZipArchive解压文件的方法为： BOOL ret1 = [SSZipArchive unzipFileAtPath:file toDestination:destination delegate:self];if (!ret1) &#123; NSLog(@"解压失败"); return;&#125; SSZipArchive解压缩的代理方法如下 - (void)zipArchiveWillUnzipArchiveAtPath:(NSString *)path zipInfo:(unz_global_info)zipInfo&#123; NSLog(@"将要解压。"); &#125;- (void)zipArchiveDidUnzipArchiveAtPath:(NSString *)path zipInfo:(unz_global_info)zipInfo unzippedPath:(NSString *)unzippedPath&#123; NSLog(@"解压完成！"); &#125; 关于SSZipArchive所有方法说明详细API以及调用方法，已放在附录栏中，不在正文说明。 三、文件管理当游戏较多的时候，我们需要进行本地管理，我的管理目录如下： Library/Caches/Game/(文件夹名为：GameId)/H5游戏资源存放的地方 由于GameId为所有H5游戏的唯一标识符，所以我的做法是将所有H5游戏存放在Caches/Game/文件目录下，文件路径命名为GameId,这便不会出现游戏重名导致游戏覆盖安装的情况。 当版本更新的时候，之前存在沙盒目录中的游戏需要删除，并重新下载安装，我通过本地数据库去存取版本信息。当然首先要装一个本地数据库，我是通过FMDB第三方库进行管理。 数据表字段如下：Id(自增Id),gameId(游戏唯一标识符),version（游戏版本号）,exist（文件是否在本地存在） 版本管理业务逻辑： 1）若数据库表中GameId存在，版本号在数据库列表中不存在，则删除本地GameId的文件夹进行下载2）若数据库表中GameId不存在，则直接进行下载H5游戏保存在本地3）若数据库表中GameId存在且版本号也存在，则直接读取Library/Caches/Game/(文件夹名为：GameId)目录，加载H5游戏资源。4）当游戏下载成功后解压到Library/Caches/Game/(文件夹名为：GameId)目录下，将数据库写入最新的GameId,version字段写入数据表中。表明本地存在Gameid=XX，version=X.X.X的H5游戏。 本地数据库操作代码如下： #import "FMDB.h"static WPGameDownloader *_instance;@interface WPGameDownloader() &lt;NSURLSessionDownloadDelegate, SSZipArchiveDelegate&gt;&#123; FMDatabase *_db;&#125;+ (instancetype)shareManager&#123; if (!_instance) &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; _instance = [[self alloc] init]; &#125;); &#125; return _instance;&#125;- (id)init&#123; if (self = [super init]) &#123; _queenArray = [NSMutableArray new]; _isDownloading = NO; [self createTable]; &#125; return self;&#125;// 创建表- (void)createTable&#123; //先打开数据库,然后创建表,最后关闭数据库 if (![self openDataBase]) &#123; return; &#125; //tableExists 判断表是否存在,当表不存在的时候再去创建 参数:表名 if (![_db tableExists:@"Game_Version_isExist"]) &#123; NSString *sql = @"CREATE TABLE IF NOT EXISTS Game_Version_IsExist ('ID' INTEGER PRIMARY KEY AUTOINCREMENT,'gameid' TEXT NOT NULL, 'version' TEXT NOT NULL,'exist' INTEGER NOT NULL)"; BOOL result = [_db executeUpdate:sql]; if (result) &#123; NSLog(@"create table success"); &#125; &#125; [_db close];&#125;// 打印全部数据- (void)printAllData&#123; if (![self openDataBase]) &#123; return; &#125; FMResultSet *set = [_db executeQuery:@"SELECT * FROM Game_Version_isExist"]; // next 单步查询 while ([set next]) &#123;组 NSLOG(@"===%d,%@,%@,%d", [set intForColumnIndex:0],[set stringForColumn:@"gameid"],[set stringForColumn:@"version"],[set intForColumn:@"exist"]); &#125; [set close]; [_db close];&#125;// 查询全部数据- (NSMutableArray *)selectAllData&#123; if (![self openDataBase]) &#123; return nil; &#125; FMResultSet *set = [_db executeQuery:@"SELECT * FROM Game_Version_isExist"]; NSMutableArray *array = [NSMutableArray array]; // next 单步查询 while ([set next]) &#123; //把每一条数据(包含id,name,phone),存入一个对象，再把对象放入数组 WPGameDataBaseModel *game = [[WPGameDataBaseModel alloc] init]; game.auto_id = [set intForColumnIndex:0]; game.gameId = [set stringForColumn:@"gameid"]; game.version = [set stringForColumn:@"version"]; game.value = [set intForColumn:@"exist"]; //把查询的每一条数据分别放入数组 [array addObject:game]; &#125; [set close]; [_db close]; return array;&#125;- (BOOL)searchDataGameId:(NSString *)gameId versiton:(NSString *)version&#123; [self printAllData]; if (![self openDataBase]) &#123; return NO; &#125; NSString *sql = [NSString stringWithFormat:@"SELECT * FROM Game_Version_isExist WHERE gameid = %@ and version = '%@'", gameId,version]; FMResultSet *set = [_db executeQuery:sql]; BOOL returnValue = NO; while ([set next]) &#123; returnValue = YES; &#125; [set close]; [_db close]; return returnValue;&#125;// 增加数据- (void)inserIntoData:(WPGameDataBaseModel *)gameModel&#123; if ([self openDataBase]) &#123; [_db executeUpdateWithFormat:@"DELETE FROM Game_Version_IsExist WHERE gameid = %@", gameModel.gameId]; [_db executeUpdateWithFormat:@"INSERT INTO Game_Version_IsExist (gameid, version, exist) VALUES (%@,%@,%d)",gameModel.gameId, gameModel.version,gameModel.value]; [_db close]; &#125;&#125;// 通过gameId进行修改- (void)updateData:(WPGameDataBaseModel *)gameModel&#123; //根据id找到具体的联系人 if ([self openDataBase]) &#123; [_db executeUpdateWithFormat:@"UPDATE Game_Version_IsExist SET version = %@, exist = %d WHERE gameid = %@",gameModel.version,gameModel.value,gameModel.gameId]; [_db close]; &#125;&#125;// 删除- (void)deleteData:(NSString *)game_id&#123; if ([self openDataBase]) &#123; //根据联系人的id进行删除 [_db executeUpdateWithFormat:@"DELETE FROM Game_Version_IsExist WHERE gameid = %@",game_id]; [_db close]; &#125;&#125; 三、通过代理服务器运行H5游戏JS游戏想要运行到iOS设备的WebView, 是需要自己搭建一套Web Server的。通过CocoaHTTPServer三方库的这个可以满足我们的需求，CocoaHTTPServer是个很强大的三方库，不但可以通过加载H5游戏运行在本地，还能通过ip局域网和电脑传输文件，作用强大。 项目中, 我使用了 Cocoapods 来管理第三方库.在 podfile 中直接添加下面的代码: pod ‘CocoaHTTPServer’, ‘~&gt; 2.3’ 然后 pod install 即可 主要的核心代码如下: @property (nonatomic, strong) HTTPServer *localHttpServer;- (void)_configLocalHttpServer&#123; NSString *webPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Library/Caches/Game/snake/game/"]; _localHttpServer = [[HTTPServer alloc] init]; [_localHttpServer setType:@"_http.tcp"]; NSFileManager *fileManager = [[NSFileManager alloc] init]; NSLog(@"%@", webPath); if (![fileManager fileExistsAtPath:webPath]) &#123; NSLog(@"File path error!"); &#125; else &#123; NSString *webLocalPath = webPath; [_localHttpServer setDocumentRoot:webLocalPath]; NSLog(@"webLocalPath:%@", webLocalPath); [self _startWebServer]; &#125;&#125;- (void)_startWebServer&#123; NSError *error; if ([_localHttpServer start:&amp;error]) &#123; NSLog(@"Started HTTP Server on port %hu", [_localHttpServer listeningPort]); NSLog(@"Start Server Successfully."); self.port = [NSString stringWithFormat:@"%d", [_localHttpServer listeningPort]]; _startServerSuccess = YES; UIWebView *webView = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height)]; [self.view addSubview:webView]; NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://127.0.0.1:%@/index.html", self.port]]; [webView loadRequest:[NSURLRequest requestWithURL:url]]; &#125; else &#123; NSLog(@"Error starting HTTP Server: %@", error); _startServerSuccess = NO; &#125;&#125; 到这里流程就已经跑通了，然后说一下我下载器的实现。 我的实现代理以及方法.h文件所提供的方法如下： 通过 isExistGame:gameModel 方法来判断本地是否存在这个H5游戏。 通过 downloadGameModel:gameModel 方法来下载游戏，下载多个游戏的时候，是通过串行队列的方式进行下载。 下载进度在delegate中进行监听，下载成功或者失败也在delegate中进行监听 @protocol WPGameDownloaderDelegate &lt;NSObject&gt;// 下载成功回调（通过gameId判断是否为本次下载任务）- (void)downloadSuccess:(WPGameDownloader *)gamedownloader gameId:(NSString *)gameId;// 下载失败回调（通过gameId判断是否为本次下载任务）- (void)downloadFail:(WPGameDownloader *)gamedownloader gameId:(NSString *)gameId;// 下载进度回调（通过gameId判断是否为本次下载任务）- (void)downloadProgress:(NSInteger)progress gamedownloader:(WPGameDownloader *)gamedownloader gameId:(NSString *)gameId;@end@interface WPGameDownloader : NSObject@property (nonatomic, weak) id &lt;WPGameDownloaderDelegate&gt; delegate;// 单例+ (instancetype)shareManager;// 下载游戏- (void)downloadGameModel:(WPGGamePageGames *)gameModel;// 游戏是否下载到本地- (BOOL)isExistGame:(WPGGamePageGames *)gameModel;@end 声明变量并用单例进行实现通过单例对H5游戏下载器进行更安全的控制，以防止并行下载会出现的问题，以及多线程同时读写数据库出现的问题。 @interface WPGameDownloader() &lt;NSURLSessionDownloadDelegate, SSZipArchiveDelegate&gt;&#123; FMDatabase *_db;&#125;@property (nonatomic, strong) NSURLSession *session;@property (nonatomic, strong) NSURLSessionDownloadTask *task;@property (nonatomic, strong) NSMutableArray *queenArray;@property (nonatomic, strong) WPGGamePageGames *gameModel;@property (nonatomic, assign) BOOL isDownloading;@end@implementation WPGameDownloader+ (instancetype)shareManager&#123; if (!_instance) &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; _instance = [[self alloc] init]; &#125;); &#125; return _instance;&#125;- (id)init&#123; if (self = [super init]) &#123; _queenArray = [NSMutableArray new]; _isDownloading = NO; [self createTable]; &#125; return self;&#125; 下载器已经将代码放入github中，关于下载器的部分下载操作如下： - (BOOL)isExistGame:(WPGGamePageGames *)gameModel&#123; return [self searchDataGameId:gameModel.gameId versiton:gameModel.h5Version];&#125;- (void)downloadGameModel:(WPGGamePageGames *)gameModel&#123; [_queenArray addObject:gameModel]; [self startDownLoad];&#125;- (void)startDownLoad&#123; if (_queenArray.count&lt;=0) &#123; return; &#125; if (_isDownloading) &#123; return; &#125; _isDownloading = YES; _gameModel = [_queenArray cl_objectAtIndex:0]; [_queenArray cl_removeObjectAtIndex:0]; [self start];&#125;- (void)removefile&#123; NSFileManager *manager = [NSFileManager defaultManager]; NSString *docsDir = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Library/Caches/Game/%@/", _gameModel.gameId]]; [manager removeItemAtPath:docsDir error:nil];&#125;- (void)downloadFailed&#123; _isDownloading = NO; IDSLOG(@"FAILED : GAMEID: %@", _gameModel.gameId); [self removefile]; [self.session finishTasksAndInvalidate]; _session = nil; if ([self.delegate respondsToSelector:@selector(downloadFail:gameId:)]) &#123; [self.delegate downloadFail:self gameId:_gameModel.gameId]; &#125; [self startDownLoad];&#125;- (void)downloadSuccess&#123; IDSLOG(@"SUEECSS : GAMEID: %@", _gameModel.gameId); WPGameDataBaseModel *model = [[WPGameDataBaseModel alloc] init]; model.gameId = _gameModel.gameId; model.version = _gameModel.h5Version; model.value = 1; [self inserIntoData:model]; if ([self.delegate respondsToSelector:@selector(downloadSuccess:gameId:)]) &#123; [self.delegate downloadSuccess:self gameId:model.gameId]; &#125; _isDownloading = NO; [self startDownLoad];&#125;- (void)start&#123; NSURL *url = [NSURL URLWithString:_gameModel.h5Down]; NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url]; request.HTTPMethod = @"GET"; self.task = [self.session downloadTaskWithRequest:request]; [self.task resume];&#125;# pragma mark - delegate- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didWriteData:(int64_t)bytesWritten totalBytesWritten:(int64_t)totalBytesWritten totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite&#123; if ([self.delegate respondsToSelector:@selector(downloadProgress:gamedownloader:gameId:)]) &#123; [self.delegate downloadProgress:(totalBytesWritten*100/totalBytesExpectedToWrite) gamedownloader:self gameId:_gameModel.gameId]; &#125;&#125;- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTaskdidFinishDownloadingToURL:(NSURL *)location;&#123; [self createGameFolder]; [self createGameFolderName:_gameModel.gameId]; NSString *docPath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Library/Caches/Game/%@/", _gameModel.gameId]]; NSString *file = [docPath stringByAppendingPathComponent:downloadTask.response.suggestedFilename]; NSError *error = nil; NSFileManager *manager = [NSFileManager defaultManager]; BOOL result = [manager fileExistsAtPath:location.path]; NSLog(@"移动之前 这个文件已经存在：%@",result?@"是的":@"不存在"); if ([manager fileExistsAtPath:location.path]) &#123; NSLog(@"移动之前文件大小为: %.1fM", [[manager attributesOfItemAtPath:location.path error:nil] fileSize]/1000000.0); &#125; if (![[manager attributesOfItemAtPath:location.path error:nil] fileSize]) &#123; NSLog(@"文件为空返回"); return; &#125; // 判断文件是否存在 BOOL ret = [manager moveItemAtPath:location.path toPath:file error:&amp;error]; if (!ret) &#123; NSLog(@"MOVE FILE IS WRONG"); &#125; if (error) &#123; NSLog(@"move failed:%@", [error localizedDescription]); &#125; BOOL resultdd = [manager fileExistsAtPath:file]; NSLog(@"移动之后 这个文件已经存在：%@",resultdd?@"是的":@"不存在"); NSLog(@"储存路径 移动之后:%@, \n移动之前:%@",file,location.path); NSString *destination = [NSString stringWithFormat:@"%@/", docPath]; BOOL ret1 = [SSZipArchive unzipFileAtPath:file toDestination:destination delegate:self]; if (!ret1) &#123; NSLog(@"解压失败"); [self downloadFailed]; return; &#125; [manager removeItemAtPath:file error:nil]; // 遍历文件 NSDirectoryEnumerator *dirEnum = [manager enumeratorAtPath:docPath]; NSString *fileName; while (fileName = [dirEnum nextObject]) &#123; NSLog(@"FileFull&gt;&gt;&gt; : %@" , [docPath stringByAppendingPathComponent:fileName]) ; &#125; [self downloadSuccess];&#125;- (long long)fileSizeAtPath:(NSString *)filePath &#123; NSFileManager *manager = [NSFileManager defaultManager]; if ([manager fileExistsAtPath:filePath]) &#123; return [[manager attributesOfItemAtPath:filePath error:nil] fileSize]; &#125; return 0;&#125;- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error&#123; if (error) &#123; [self downloadFailed]; &#125;&#125; 写在最后上面的例子本人亲自实践过的, 给大家提供了一个实现思路, 算是抛砖引玉. 如果想做好这个模式, 还需要很多工作要做, 这里列出来给大家分享一下. 1.游戏资源包管理和下载.2.游戏中需要和 Native 的交互逻辑.3.数据加密.4.移动端游戏本身的加载优化. 代码示例我放在了 GitHub上。下载器代码如下：https://github.com/Yulei-Duan/WPGameDownloader游戏代理服务器代码如下：https://github.com/Yulei-Duan/testProjestAboutGameRun 有问题，请在下面评论, 非常感谢能来看我的Demo分享! 附录SSZipArchive所有方法说明@interface SSZipArchive : NSObject // Unzip 解压 /** * @param path 源文件 * @param destination 目的文件 * @param uniqueId 标记，用于区别多个解压操作 * * @return 返回 YES 表示成功，返回 NO 表示解压失败。 */ + (BOOL)unzipFileAtPath:(NSString *)path toDestination:(NSString *)destination uniqueId:(NSString *)uniqueId; /** * @param path 源文件 * @param destination 目的文件 * @param overwrite YES 会覆盖 destination 路径下的同名文件，NO 则不会。 * @param password 需要输入密码的才能解压的压缩包 * @param error 返回解压时遇到的错误信息 * @param uniqueId 标记，用于区别多个解压操作 * * @return 返回 YES 表示成功，返回 NO 表示解压失败。 */ + (BOOL)unzipFileAtPath:(NSString *)path toDestination:(NSString *)destination overwrite:(BOOL)overwrite password:(NSString *)password error:(NSError **)error uniqueId:(NSString *)uniqueId; /** * @param path 源文件 * @param destination 目的文件 * @param delegate 设置代理 * @param uniqueId 标记，用于区别多个解压操作 * * @return 返回 YES 表示成功，返回 NO 表示解压失败。 */ + (BOOL)unzipFileAtPath:(NSString *)path toDestination:(NSString *)destination delegate:(id&lt;SSZipArchiveDelegate&gt;)delegate uniqueId:(NSString *)uniqueId; /** * @param path 源文件 * @param destination 目的文件 * @param overwrite YES 会覆盖 destination 路径下的同名文件，NO 则不会。 * @param password 需要输入密码的才能解压的压缩包 * @param error 返回解压时遇到的错误信息 * @param delegate 设置代理 * @param uniqueId 标记，用于区别多个解压操作 * * @return 返回 YES 表示成功，返回 NO 表示解压失败。 */ + (BOOL)unzipFileAtPath:(NSString *)path toDestination:(NSString *)destination overwrite:(BOOL)overwrite password:(NSString *)password error:(NSError **)error delegate:(id&lt;SSZipArchiveDelegate&gt;)delegate uniqueId:(NSString *)uniqueId; // Zip 压缩 /** * @param path 目的路径（格式：～／xxx.zip 结尾的路径） * @param filenames 要压缩的文件路径 * * @return 返回 YES 表示成功，返回 NO 表示压缩失败。 */ + (BOOL)createZipFileAtPath:(NSString *)path withFilesAtPaths:(NSArray *)filenames; /** * @param path 目的路径（格式：～／xxx.zip 结尾的路径） * @param filenames 要压缩的文件目录路径 * * @return 返回 YES 表示成功，返回 NO 表示压缩失败。 */ + (BOOL)createZipFileAtPath:(NSString *)path withContentsOfDirectory:(NSString *)directoryPath; /** * 初始化压缩对象 * * @param path 目的路径（格式：～／xxx.zip 结尾的路径） * * @return 初始化后的对像 */ - (id)initWithPath:(NSString *)path; /** * 打开压缩对象 * @return 返回 YES 表示成功，返回 NO 表示失败。 */ - (BOOL)open; /** * 添加要压缩的文件的路径 * * @param path 文件路径 * * @return 返回 YES 表示成功，返回 NO 表示失败。 */ - (BOOL)writeFile:(NSString *)path; /** * 向此路径的文件里写入数据 * * @param data 要写入的数据 * @param filename 文件路径 * * @return 返回 YES 表示成功，返回 NO 表示失败。 */ - (BOOL)writeData:(NSData *)data filename:(NSString *)filename; /** * 关闭压缩对象 * @return 返回 YES 表示成功，返回 NO 表示失败。 */ - (BOOL)close; @end @protocol SSZipArchiveDelegate &lt;NSObject&gt; @optional //将要解压 - (void)zipArchiveWillUnzipArchiveAtPath:(NSString *)path zipInfo:(unz_global_info)zipInfo; //解压完成 - (void)zipArchiveDidUnzipArchiveAtPath:(NSString *)path zipInfo:(unz_global_info)zipInfo unzippedPath:(NSString *)unzippedPat uniqueId:(NSString *)uniqueId; //将要解压 - (void)zipArchiveWillUnzipFileAtIndex:(NSInteger)fileIndex totalFiles:(NSInteger)totalFiles archivePath:(NSString *)archivePath fileInfo:(unz_file_info)fileInfo; //解压完成 - (void)zipArchiveDidUnzipFileAtIndex:(NSInteger)fileIndex totalFiles:(NSInteger)totalFiles archivePath:(NSString *)archivePath fileInfo:(unz_file_info)fileInfo; @end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[前言]]></title>
    <url>%2F2018%2F03%2F26%2F2020-01-08-12%2F</url>
    <content type="text"><![CDATA[如果天总也不亮，那就摸黑过生活；如果发出声音是危险的，那就保持沉默；如果自觉无力发光，那就别去照亮别人。但，不要嘲讽那些比你更勇敢、更有热量的人们。 一篇总结文，既是我为新开的博客写的一篇前言，也是对过去自己的一篇简要总结。 每一次的总结，都是为了更好的出发。 关于这篇文章结构，我会分为如下三个模块： 关于大学 关于工作 关于简书 履历：本科毕业于深圳大学计算机系，热爱算法和一切有趣的技术，毕业之后直接进入了一家知名游戏互联网公司做软件开发。 学生时代计算机软件专业，由于当初自己是一个重度游戏玩家，所以并未在学习上取得显著成就。你把你的时间投资在哪些地方，就意味着你未来会走什么样的路。也就意味着你在放弃你的专业领域，在自我迷失的道路上越走越远。 然而，幸运的是，在大学期间出现了一些改变我人生节点的人，这些人一直在引导我走向正确的路。 关于好友在大学期间，好友Luke带我踏进了计算机行业的大门，引导我去考一些证书，当时一起周末去RHCE红帽学习班，RHCE 全名是 Red Hat Certified Engineer 每周六都会去听课，然后他去考了CCIE证书，我当时仅仅考了OCP证书。然而，每一个中/高级证书并非能证明你的能力，大部分人称之为敲门砖，而对于我来说，它只是一门课程，仅仅证明你了解过而已，关于速成的东西就不要期望能有多少含金量。 考证书的好处只有一个，并非满足你的虚荣心，而是说明你一直热爱着学习。毕竟在计算机领域有所追求的人都想成为有梦想爱学习的实力派，难道不是么？ DD是一位女程序员，深大ACM俱乐部的成员。在一场美丽的知识盛宴邂逅中相遇，引导我打开了代码新世界的大门。然后就开始朝九晚五在实验室刷题，就在那时，我才发现，我是多么热爱刷OJ，多么热爱算法。找到了最适合自己的编程语言，他就是C。 当然还有一个患难与共的好友，海拔，经常陪我通宵在大学自习室学习，一起做的毕设《龙芯平台ZIGBEE网络远程监控系统》拿到了大学优秀毕业设计的评分，让我第一次认识到做出一款软件是多么的有成就感。然后陪伴我一起走向了iOS开发世界的大门。 初入职场在职场中，换过几次岗，当然也犯过很多低级错误。不过如果当年的20多岁，就把人生中所有该犯的错误都犯了，也挺好，不是吗。 关于工作技能，这几年的摸爬滚打，主要做了如下几个岗位： iOS 前端。现在的工作岗位，当时拿了不少offer，然后由于对公司文化的喜欢，就选择了这家游戏公司。 python 后端。由于iOS没有太多紧急任务，而组内后端急缺人手，就将我暂时顶了上去，由于对数据结构和算法比较熟练，所以搞定公司安排的项目并不难，对网络层的知识了解的又更深入了一些。 产品运营。机缘巧合，做了一段时间数据分析，培养自己的产品思维，对于我个人逻辑能力的培养有极大的帮助，努力做一个有产品思维的攻城狮。 在这里，要强调一点，就是当你有了一些产品思维后，整个人都会变得独立起来，看世界的维度也不太一样了，工作不仅仅是通过打工听人安排而活着，还可以反过来通过在公司工作提升自己的技能，让自己可以更加独立且自由的生活。 还有就是想提一点被人误解了的事情，多数人认为在工作中学习和成长速度快。而等你呆了一段时间，就会发现工作不过是提供了一个能够解决实际问题，能跟人讨论的环境。让我们成长的并非工作本身，而是有利的学习环境。 简书前言在过去这几年里，我感觉到自己当初很在意自己的成长，当时写一些博文来记录过去所做，然而写的技术文章并没有形成自己的框架体系。而如今想在这个平台，做一些改变。 写出自己风格体系的技术文章，坚持一直写下去。要写文章就要写没人写过的，或者别人写过我能写的更好的。 成长，并帮助别人成长。体验和经历生活，并帮助别人体验和经历生活。 我会一直写下去。]]></content>
      <categories>
        <category>Idea</category>
      </categories>
  </entry>
</search>
