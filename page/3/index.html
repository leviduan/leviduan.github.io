<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="Lbqbq-u0Mn24a7n3Er0wVtGF9AUxR-o_FZsCOl4YEOQ">














  
  
  <link href="/libs/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Lucida Grande:300,300italic,400,400italic,700,700italic|Zapfino:300,300italic,400,400italic,700,700italic|Monaco:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/libs/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar1.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar1.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar1.jpg?v=5.1.4">


  <link rel="mask-icon" href="/images/avatar1.jpg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, Levi">





  <link rel="alternate" href="/atom.xml" title="Levi's blog" type="application/atom+xml">






<meta name="description" content="Shareness make me happy">
<meta property="og:type" content="website">
<meta property="og:title" content="Levi&#39;s blog">
<meta property="og:url" content="http://leviduan.com/page/3/index.html">
<meta property="og:site_name" content="Levi&#39;s blog">
<meta property="og:description" content="Shareness make me happy">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Levi&#39;s blog">
<meta name="twitter:description" content="Shareness make me happy">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: false,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://leviduan.com/page/3/">





  <title>Levi's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Levi's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-time">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>
            
            Time
          </a>
        </li>
      
        
        <li class="menu-item menu-item-ios">
          <a href="/categories/iOS/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-apple"></i> <br>
            
            iOS
          </a>
        </li>
      
        
        <li class="menu-item menu-item-react-n.">
          <a href="/categories/web/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-html5"></i> <br>
            
            React N.
          </a>
        </li>
      
        
        <li class="menu-item menu-item-algorithm">
          <a href="/categories/Algorithm/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Algorithm
          </a>
        </li>
      
        
        <li class="menu-item menu-item-idea">
          <a href="/categories/Idea/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-music"></i> <br>
            
            Idea
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/03/10/2019-03-10-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/10/2019-03-10-2/" itemprop="url">《剑指offer》 复杂链表的复制</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-10T00:09:00+08:00">
                2019-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/10/2019-03-10-2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/10/2019-03-10-2/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="OJ-address"><a href="#OJ-address" class="headerlink" title="OJ address"></a>OJ address</h3><p>website : <a href="https://www.nowcoder.com/ta/coding-interviews?page=1" target="_blank" rel="noopener">《剑指offer》 复杂链表的复制</a></p>
<h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>输入一个复杂链表（每个节点中有节点值，以及两个指针，一个指向下一个节点，另一个特殊指针指向任意一个节点），返回结果为复制后复杂链表的head。（注意，输出结果中请不要返回参数中的节点引用，否则判题程序会直接返回空）</p>
<h3 id="Solution-in-C"><a href="#Solution-in-C" class="headerlink" title="Solution in C++"></a>Solution in C++</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">RandomListNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> label;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">RandomListNode</span> *<span class="title">next</span>, *<span class="title">random</span>;</span></span><br><span class="line">    RandomListNode(<span class="keyword">int</span> x) :</span><br><span class="line">            label(x), next(<span class="literal">NULL</span>), random(<span class="literal">NULL</span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">RandomListNode* <span class="title">Clone</span><span class="params">(RandomListNode* pHead)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!pHead) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">map</span>&lt;RandomListNode *, RandomListNode *&gt; nodeMap;</span><br><span class="line">        RandomListNode *currentNode = pHead;</span><br><span class="line">        RandomListNode *newHead = <span class="number">0</span>;</span><br><span class="line">        RandomListNode *preNode = <span class="number">0</span>;</span><br><span class="line">        RandomListNode *newNode = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(currentNode)&#123;</span><br><span class="line">            newNode = <span class="keyword">new</span> RandomListNode(currentNode-&gt;label);</span><br><span class="line">            nodeMap[currentNode] = newNode;</span><br><span class="line">            <span class="keyword">if</span> (!preNode) newHead = newNode;</span><br><span class="line">            <span class="keyword">else</span> preNode-&gt;next = newNode;</span><br><span class="line">            preNode = newNode;</span><br><span class="line">            currentNode = currentNode-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        currentNode = pHead;</span><br><span class="line">        newNode = newHead;</span><br><span class="line">        <span class="keyword">while</span> (currentNode &amp;&amp; newNode) &#123;</span><br><span class="line">            RandomListNode *randNode = currentNode-&gt;random;</span><br><span class="line">            RandomListNode *newRandNode = nodeMap[randNode];</span><br><span class="line">            newNode-&gt;random = newRandNode;</span><br><span class="line">            currentNode = currentNode-&gt;next;</span><br><span class="line">            newNode = newNode-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> newHead;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="My-Idea"><a href="#My-Idea" class="headerlink" title="My Idea"></a>My Idea</h3><p>链表类型题目，主要考察对map和链表的结合应用:</p>
<ol>
<li>链表有两个节点，第一个是随机节点，第二个是Next节点</li>
<li>第一次遍历，通过next遍历一遍链表，并且copy一份新的链表（包含next指针，但clone的链表random的指针为空），通过map把copy前的链表和Copy后的链表进行一一映射。</li>
<li>第二次遍历链表，并将copy后的链表的random指针指向原链表中对应的节点的copy节点，这个节点怎么找到？通过map集合查找。</li>
<li>map作用就是快速查找random指向的元素。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/03/10/2019-03-10-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/10/2019-03-10-1/" itemprop="url">Leetcode 22 Generate Parentheses</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-10T00:08:00+08:00">
                2019-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/10/2019-03-10-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/10/2019-03-10-1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="OJ-address"><a href="#OJ-address" class="headerlink" title="OJ address"></a>OJ address</h3><p>Leetcode website : <a href="https://leetcode.com/problems/generate-parentheses/" target="_blank" rel="noopener">22. Generate Parentheses</a></p>
<h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>Given n pairs of parentheses, write a function to generate all combinations of well-formed parentheses.</p>
<p>For example, given n = 3, a solution set is:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">  &quot;((()))&quot;,</span><br><span class="line">  &quot;(()())&quot;,</span><br><span class="line">  &quot;(())()&quot;,</span><br><span class="line">  &quot;()(())&quot;,</span><br><span class="line">  &quot;()()()&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="My-Solution-in-C"><a href="#My-Solution-in-C" class="headerlink" title="My Solution in C"></a>My Solution in C</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> top = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span>** <span class="title">generateParenthesis</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* returnSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        *returnSize = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    top = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> **returnArray = <span class="built_in">calloc</span>(<span class="number">3000</span>, <span class="keyword">sizeof</span>(<span class="keyword">char</span> *));</span><br><span class="line">    <span class="keyword">char</span> * newArray = <span class="built_in">calloc</span>(n*<span class="number">2</span>+<span class="number">1</span>, <span class="keyword">sizeof</span>(<span class="keyword">char</span>));</span><br><span class="line">    dfs(<span class="number">0</span>, n, returnArray, newArray, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    *returnSize = top;</span><br><span class="line">    <span class="keyword">return</span> returnArray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">int</span> n, <span class="keyword">char</span> **returnArray, <span class="keyword">char</span> *newArray, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (right == n) &#123;</span><br><span class="line">        newArray[n*<span class="number">2</span>] = <span class="string">'\0'</span>;</span><br><span class="line">        <span class="keyword">char</span> *<span class="built_in">array</span> = <span class="built_in">calloc</span>(n*<span class="number">2</span>+<span class="number">1</span>, <span class="keyword">sizeof</span>(<span class="keyword">char</span>));</span><br><span class="line">        <span class="built_in">memcpy</span>(<span class="built_in">array</span>, newArray, n*<span class="number">2</span>+<span class="number">1</span>);</span><br><span class="line">        returnArray[top++] = <span class="built_in">array</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (left &lt; n) &#123;</span><br><span class="line">        newArray[index] = <span class="string">'('</span>;</span><br><span class="line">        dfs(index+<span class="number">1</span>, n, returnArray, newArray, left+<span class="number">1</span>, right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (right &lt; left) &#123;</span><br><span class="line">        newArray[index] = <span class="string">')'</span>;</span><br><span class="line">        dfs(index+<span class="number">1</span>, n, returnArray, newArray, left, right+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="My-Idea"><a href="#My-Idea" class="headerlink" title="My Idea"></a>My Idea</h3><p>这是一个很经典的DFS题目，比较easy，但是要注意几个坑：</p>
<ol>
<li>数组要足够大，不然会报Runtime错误，不要仅仅通过n <em> n </em> n * n以为数组就这么大，其实比你认为的要大很多。</li>
<li>使用memcpy方法时，一定要记得长度和数组长度相同，不然会报错。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/03/10/2019-03-10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/10/2019-03-10/" itemprop="url">React Native页面出现内存增加不释放问题</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-10T00:07:00+08:00">
                2019-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/10/2019-03-10/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/10/2019-03-10/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>分享解决的一个Bug ， 从iOS页面进入React Native页面会出现内存增加不释放问题，每次进入退出就会一直增加，然后看了下我们的方法，如下:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">loadView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="type">URL</span>(string: <span class="string">"http://localhost:8081/index.bundle?platform=ios"</span>)</span><br><span class="line">    <span class="keyword">let</span> rcRootView = <span class="type">RCTRootView</span>(bundleURL: url, moduleName: <span class="string">"RN"</span>, initialProperties: properties, launchOptions: <span class="literal">nil</span>)</span><br><span class="line">    view = rcRootView</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对，标准的加载RN页面的方式，但是这样加载，就会出现内存泄漏的情况，是因为RTCBridge内存并没有释放掉导致的这个bug.</p>
<p>RCTBridge: 所有的模块都保存在内存的静态常量区域，这个内存空间是在RCTBridge中被初始化的。因此这些模块属于全局的变量，可以在不同的bridge之间共享。</p>
<p>因此每次返回到iOS页面的时候，你要及时将RTCBridge释放掉。</p>
<p>代码如下：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rtcBridge : <span class="type">RCTBridge</span>?</span><br><span class="line">    </span><br><span class="line"><span class="keyword">init</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>(nibName: <span class="literal">nil</span>, bundle: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">deinit</span> &#123;</span><br><span class="line">    rtcBridge?.invalidate()</span><br><span class="line">    rtcBridge = <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">loadView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="type">URL</span>(string: <span class="string">"http://localhost:8081/index.bundle?platform=ios"</span>)</span><br><span class="line">    <span class="keyword">let</span> rcRootView = <span class="type">RCTRootView</span>(bundleURL: url, moduleName: <span class="string">"RN"</span>, initialProperties: properties, launchOptions: <span class="literal">nil</span>)</span><br><span class="line">    rtcBridge = rcRootView?.bridge</span><br><span class="line">    view = rcRootView</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样就可以将内存释放了，这个问题，看上去解决很简单，但不知道多少人不理解原理，而出现这个内存泄漏，而且是很严重的内存泄漏，来回切换几次，程序就会crush了。所以要学学Bottom-up.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/03/08/2019-03-08/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/08/2019-03-08/" itemprop="url">iOS APP打包上传到App Store的流程</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-08T19:51:00+08:00">
                2019-03-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/08/2019-03-08/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/08/2019-03-08/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="上传前的操作"><a href="#上传前的操作" class="headerlink" title="上传前的操作"></a>上传前的操作</h2><h3 id="发版前自测DP生产环境是否有问题"><a href="#发版前自测DP生产环境是否有问题" class="headerlink" title="发版前自测DP生产环境是否有问题"></a>发版前自测DP生产环境是否有问题</h3><ol>
<li>自测所有功能点是否有问题</li>
<li>修改DejaFashion以及PushService的 Version | Build </li>
</ol>
<p>例如:</p>
<p><img src="/images/15520167907596/15520169723089.jpg" alt></p>
<p>Build 按照时间方式显示: 2019 | 0305 | 11:10</p>
<h3 id="选择正确的Archive"><a href="#选择正确的Archive" class="headerlink" title="选择正确的Archive"></a>选择正确的Archive</h3><p>archive -&gt; Build Configuration : 选择AppStoreDis</p>
<p><img src="/images/15520167907596/15520168423348.jpg" alt></p>
<h3 id="Upload-to-App-Store"><a href="#Upload-to-App-Store" class="headerlink" title="Upload to App Store."></a>Upload to App Store.</h3><p>按照默认的选项上传</p>
<p><img src="/images/15520167907596/15520174440408.jpg" alt></p>
<p><img src="/images/15520167907596/15520174546037.jpg" alt></p>
<p><img src="/images/15520167907596/15520174753889.jpg" alt></p>
<p>Next - Upload 上传成功，没有警告才能继续下一步。</p>
<h3 id="iTunes-Connect-上传app"><a href="#iTunes-Connect-上传app" class="headerlink" title="iTunes Connect 上传app"></a>iTunes Connect 上传app</h3><p>打开 <a href="https://itunesconnect.apple.com/" target="_blank" rel="noopener">https://itunesconnect.apple.com/</a></p>
<p>按照如下选择广告以及出口信息，并且提交到Appstore审核就OK.</p>
<p><img src="/images/15520167907596/15520176492443.jpg" alt></p>
<p><img src="/images/15520167907596/15520179540459.jpg" alt></p>
<h2 id="上传成功后的操作"><a href="#上传成功后的操作" class="headerlink" title="上传成功后的操作"></a>上传成功后的操作</h2><h3 id="master分支合并到release中"><a href="#master分支合并到release中" class="headerlink" title="master分支合并到release中"></a>master分支合并到release中</h3><p>点击 New merge request</p>
<p><img src="/images/15520167907596/15520377000661.jpg" alt></p>
<p>将master merge到 release分支中</p>
<p><img src="/images/15520167907596/15520377344976.jpg" alt></p>
<h3 id="打上Tag"><a href="#打上Tag" class="headerlink" title="打上Tag"></a>打上Tag</h3><p>在gitlab中打一个tags，名称为版本号加日期: ios_7.4.1.190308，后面备注修改内容</p>
<p><img src="/images/15520167907596/15520377895016.jpg" alt></p>
<h3 id="Xcode-archive-appstore-dis-dev"><a href="#Xcode-archive-appstore-dis-dev" class="headerlink" title="Xcode archive appstore dis / dev"></a>Xcode archive appstore dis / dev</h3><p>在Xcode上面archive两个包，分别是AppStoreDis | AppStoreDev</p>
<p><img src="/images/15520167907596/15520379228596.jpg" alt></p>
<p>上传到 HockeyApp</p>
<p><img src="/images/15520167907596/15520379743873.jpg" alt></p>
<p>dev的包需要选择的选项为 </p>
<ol>
<li>Release type: Enterprise</li>
<li>Upload file types: .ipa &amp; .dSYM.zip </li>
<li>Notify Testers</li>
</ol>
<p>主要用于测试人员测试线上版本</p>
<p><img src="/images/15520167907596/15520382616560.jpg" alt></p>
<p>dis的包需要选择的选项为 </p>
<ol>
<li>Release type: Store</li>
<li>Upload file types: Only .dSYM.zip </li>
<li>Aviailable in Store</li>
</ol>
<p><img src="/images/15520167907596/15520383540555.jpg" alt></p>
<p>dis发布在HockeyApp主要用于crush的实时监控.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/02/07/2019-02-07-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/07/2019-02-07-1/" itemprop="url">CS50's Mobile App Development with React Native (Lecture three)</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-07T21:08:00+08:00">
                2019-02-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index">
                    <span itemprop="name">web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/02/07/2019-02-07-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/07/2019-02-07-1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Lecture-three-React-Props-State"><a href="#Lecture-three-React-Props-State" class="headerlink" title="Lecture three: React, Props, State"></a>Lecture three: React, Props, State</h3><p>这一节主要都是例子以及Demo，按照上课的顺序，将Code说下</p>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p>Set 集合的定义，constructor是构建起，类似init，初始化的传参。this相当于oc中的self.</p>
<p>arr.push(val) 在数组中插入val这个元素<br>arr.filter(x =&gt; x!==val) 过滤掉和val相同的value.<br>arr.includes(x) 是否包含x这个value<br>arr.length 返回数组长度.</p>
<p>这是讲解类的构造，Set类的功能是插入的元素，不能有相同的元素。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Set should maintain a list of unique values and should support add, delete, and inclusion</span></span><br><span class="line"><span class="comment">// It should also have the ability to get its size</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Set</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(arr) &#123;</span><br><span class="line">    <span class="keyword">this</span>.arr = arr</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  add(val) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.has(val)) <span class="keyword">this</span>.arr.push(val)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">delete</span>(val) &#123;</span><br><span class="line">    <span class="keyword">this</span>.arr = <span class="keyword">this</span>.arr.filter(<span class="function"><span class="params">x</span> =&gt;</span> x !== val)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  has(val) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.arr.includes(val)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  get size() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.arr.length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// trying to add the same value shouldn't work</span></span><br><span class="line">s.add(<span class="number">1</span>)</span><br><span class="line">s.add(<span class="number">1</span>)</span><br><span class="line">s.add(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'s should have 5 members and actually has:'</span>, s.size)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'s should contain 5:'</span>, s.has(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">s.add(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'s should contain 6:'</span>, s.has(<span class="number">6</span>))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'s should have 6 members and actually has:'</span>, s.size)</span><br><span class="line"></span><br><span class="line">s.delete(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'s should no longer contain 6:'</span>, !s.has(<span class="number">6</span>))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'s should have 5 members and actually has:'</span>, s.size)</span><br></pre></td></tr></table></figure>
<h3 id="Class-Extends"><a href="#Class-Extends" class="headerlink" title="Class Extends"></a>Class Extends</h3><p>类扩展方法如下，通过类名后面增加extends.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// We can also extend the native implementation of Set if we wanted to do something</span></span><br><span class="line"><span class="comment">// like log on addition or create new methods</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySet</span> <span class="keyword">extends</span> <span class="title">Set</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(arr) &#123;</span><br><span class="line">    <span class="keyword">super</span>(arr)</span><br><span class="line">    <span class="keyword">this</span>.originalArray = arr</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  add(val) &#123;</span><br><span class="line">    <span class="keyword">super</span>.add(val)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`added <span class="subst">$&#123;val&#125;</span> to the set!`</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toArray() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  reset() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MySet(<span class="keyword">this</span>.originalArray)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> MySet([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">s.add(<span class="number">6</span>)</span><br><span class="line">s.add(<span class="number">7</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s.toArray())</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reset = s.reset()</span><br><span class="line"><span class="built_in">console</span>.log(reset.toArray())</span><br></pre></td></tr></table></figure>
<h3 id="spread-…"><a href="#spread-…" class="headerlink" title="spread …"></a>spread …</h3><p>定义：扩展运算符（ spread ）是三个点（…）。它好比 rest 参数的逆运算，将一个数组转为用逗号分隔的参数序列。</p>
<p>将数组转化为遍历的元素，举例说明：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment">// 1 2 3</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>, ...[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>)</span><br><span class="line"><span class="comment">// 1 2 3 4 5</span></span><br><span class="line">[...document.querySelectorAll(<span class="string">'div'</span>)]</span><br></pre></td></tr></table></figure>
<p>可以将数组转化为函数体的参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">array, ...items</span>) </span>&#123;</span><br><span class="line">    array.push(...items);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">4</span>, <span class="number">38</span>];</span><br><span class="line">add(...numbers) <span class="comment">// 42</span></span><br></pre></td></tr></table></figure>
<p>扩展运算符与正常的函数参数可以结合使用，非常灵活</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">v, w, x, y, z</span>) </span>&#123; &#125;</span><br><span class="line"><span class="keyword">var</span> args = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line">f(<span class="number">-1</span>, ...args, <span class="number">2</span>, ...[<span class="number">3</span>]);</span><br></pre></td></tr></table></figure>
<p>扩展运算符内部调用的是数据结构的 Iterator 接口，因此只要具有 Iterator 接口的对象，都可以使用扩展运算符，比如 Map 结构：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">    [<span class="number">1</span>, <span class="string">'one'</span>],</span><br><span class="line">    [<span class="number">2</span>, <span class="string">'two'</span>],</span><br><span class="line">    [<span class="number">3</span>, <span class="string">'three'</span>],</span><br><span class="line">]);</span><br><span class="line"><span class="keyword">let</span> arr = [...map.keys()]</span><br></pre></td></tr></table></figure>
<h3 id="map"><a href="#map" class="headerlink" title=".map()"></a>.map()</h3><p>From the classic forloop to the forEach() method, various techniques and methods used to iterate through datasets abound JavaScript. However, one of the more popular methods is the .map() method</p>
<p>.map() 类似foreach的枚举，就是讲数组中的每个元素执行一个特定的方法。</p>
<p>举例说明：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> sweetArray = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">35</span>]</span><br><span class="line"><span class="keyword">const</span> sweeterArray = sweetArray.map(<span class="function"><span class="params">sweetItem</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> sweetItem * <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sweeterArray) <span class="comment">// [4, 6, 8, 10, 70]</span></span><br></pre></td></tr></table></figure>
<p>This can even be simplified further to make it cleaner with:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// create a function to use</span></span><br><span class="line"><span class="keyword">const</span> makeSweeter = <span class="function"><span class="params">sweetItem</span> =&gt;</span> sweetItem * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// we have an array</span></span><br><span class="line"><span class="keyword">const</span> sweetArray = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">35</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// call the function we made. more readable</span></span><br><span class="line"><span class="keyword">const</span> sweeterArray = sweetArray.map(makeSweeter);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sweeterArray); <span class="comment">// [4, 6, 8, 10, 70]</span></span><br></pre></td></tr></table></figure>
<p>还可以Converting a String to an Array，类似 .split()功能</p>
<p>举个栗子：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">"Chuloo"</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="built_in">Array</span>.prototype.map</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newName = map.call(name, eachLetter =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;eachLetter&#125;</span>a`</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(newName) <span class="comment">// ["Ca", "ha", "ua", "la", "oa", "oa"]</span></span><br></pre></td></tr></table></figure>
<p>Here’s a good example of a React component.</p>
<p>Rendering Lists in JavaScript Libraries, for instance:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> names = [<span class="string">"john"</span>, <span class="string">"sean"</span>, <span class="string">"mike"</span>, <span class="string">"jean"</span>, <span class="string">"chris"</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> NamesList = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;ul&gt;&#123;names.map(<span class="function"><span class="params">name</span> =&gt;</span> &lt;li key=&#123;name&#125;&gt; &#123;name&#125; &lt;<span class="regexp">/li&gt;)&#125;&lt;/u</span>l&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const rootElement = document.getElementById("root");</span></span><br><span class="line"><span class="regexp">ReactDOM.render(&lt;NamesList /</span>&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<p>How about handling objects in an array? 就是对象在数组中的遍历应用。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> myUsers = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">'chuloo'</span>, <span class="attr">likes</span>: <span class="string">'grilled chicken'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">'chris'</span>, <span class="attr">likes</span>: <span class="string">'cold beer'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">'sam'</span>, <span class="attr">likes</span>: <span class="string">'fish biscuits'</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> usersByFood = myUsers.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> container = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    container[item.name] = item.likes;</span><br><span class="line">    container.age = item.name.length * <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> container;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(usersByFood);</span><br><span class="line"><span class="comment">// [&#123;chuloo: "grilled chicken", age: 60&#125;, &#123;chris: "cold beer", age: 50&#125;, &#123;sam: "fish biscuits", age: 30&#125;]</span></span><br></pre></td></tr></table></figure>
<h3 id="React‘s-example"><a href="#React‘s-example" class="headerlink" title="React‘s example"></a>React‘s example</h3><p>下面这个也是讲解的一个例子，这个用到了JSX的一些特性，.map()，以及扩展运算…都有用到，是个理解React 很好的例子，可以通过 <a href="https://codesandbox.io" target="_blank" rel="noopener">https://codesandbox.io</a> 直接运行查看网页显示。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> id = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Todo = <span class="function"><span class="params">props</span> =&gt;</span> (</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">    &lt;input type=<span class="string">"checkbox"</span> checked=&#123;props.todo.checked&#125; onChange=&#123;props.onToggle&#125; /&gt;</span><br><span class="line">    &lt;button onClick=&#123;props.onDelete&#125;&gt;<span class="keyword">delete</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;span&gt;&#123;props.todo.text&#125;&lt;/</span>span&gt;</span><br><span class="line">  &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class App extends React.Component &#123;</span></span><br><span class="line"><span class="regexp">  constructor() &#123;</span></span><br><span class="line"><span class="regexp">    super()</span></span><br><span class="line"><span class="regexp">    this.state = &#123;</span></span><br><span class="line"><span class="regexp">      todos: [],</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  addTodo() &#123;</span></span><br><span class="line"><span class="regexp">    const text = prompt("TODO text please!")</span></span><br><span class="line"><span class="regexp">    this.setState(&#123;</span></span><br><span class="line"><span class="regexp">      todos: [</span></span><br><span class="line"><span class="regexp">        ...this.state.todos,</span></span><br><span class="line"><span class="regexp">        &#123;id: id++, text: text, checked: false&#125;,</span></span><br><span class="line"><span class="regexp">      ], </span></span><br><span class="line"><span class="regexp">    &#125;)</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  removeTodo(id) &#123;</span></span><br><span class="line"><span class="regexp">    this.setState(&#123;</span></span><br><span class="line"><span class="regexp">      todos: this.state.todos.filter(todo =&gt; todo.id !== id)</span></span><br><span class="line"><span class="regexp">    &#125;)</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  toggleTodo(id) &#123;</span></span><br><span class="line"><span class="regexp">    this.setState(&#123;</span></span><br><span class="line"><span class="regexp">      todos: this.state.todos.map(todo =&gt; &#123;</span></span><br><span class="line"><span class="regexp">        if (todo.id !== id) return todo</span></span><br><span class="line"><span class="regexp">        return &#123;</span></span><br><span class="line"><span class="regexp">          id: todo.id,</span></span><br><span class="line"><span class="regexp">          text: todo.text,</span></span><br><span class="line"><span class="regexp">          checked: !todo.checked,</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">      &#125;)</span></span><br><span class="line"><span class="regexp">    &#125;)</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div&gt;Todo count: &#123;this.state.todos.length&#125;&lt;/</span>div&gt;</span><br><span class="line">        &lt;div&gt;Unchecked todo count: &#123;<span class="keyword">this</span>.state.todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.checked).length&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; this.addTodo()&#125;&gt;Add TODO&lt;/</span>button&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.state.todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> (</span><br><span class="line">            &lt;Todo</span><br><span class="line">              onToggle=&#123;() =&gt; <span class="keyword">this</span>.toggleTodo(todo.id)&#125;</span><br><span class="line">              onDelete=&#123;() =&gt; <span class="keyword">this</span>.removeTodo(todo.id)&#125;</span><br><span class="line">              todo=&#123;todo&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line">        &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">render(&lt;App /&gt;, document.getElementById('root'));</span><br></pre></td></tr></table></figure>
<p>That’s all.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/02/07/2019-02-07/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/07/2019-02-07/" itemprop="url">Convert Dictionary to JSON in Swift4.2</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-07T21:06:00+08:00">
                2019-02-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/02/07/2019-02-07/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/07/2019-02-07/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Sometimes it’s necessary to print out server’s response for debugging purposes. Here’s a function I use:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Dictionary</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> json: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> invalidJson = <span class="string">"Not a valid JSON"</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> jsonData = <span class="keyword">try</span> <span class="type">JSONSerialization</span>.data(withJSONObject: <span class="keyword">self</span>, options: .prettyPrinted)</span><br><span class="line">            <span class="keyword">return</span> <span class="type">String</span>(bytes: jsonData, encoding: <span class="type">String</span>.<span class="type">Encoding</span>.utf8) ?? invalidJson</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> invalidJson</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">printJson</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(json)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>or print dic directly</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> jsonData = <span class="keyword">try</span> <span class="type">JSONSerialization</span>.data(withJSONObject: dic, options: .prettyPrinted)</span><br><span class="line">    <span class="built_in">print</span> (<span class="type">String</span>(bytes: jsonData, encoding: <span class="type">String</span>.<span class="type">Encoding</span>.utf8) ?? <span class="number">0</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123; &#125;</span><br></pre></td></tr></table></figure>
<p>看到这个方法感觉很简单，但是不知道多少iOS开发者，一直通过抓包的方式来查看网络请求的Json，或者在网站上进行转化，而不会通过打印日志的方式将Json按规范格式直接打印在控制台上面。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/02/03/2019-02-03/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/03/2019-02-03/" itemprop="url">Leetcode 17 Letter Combinations of a Phone Number</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-03T13:52:00+08:00">
                2019-02-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/02/03/2019-02-03/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/03/2019-02-03/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="OJ-address"><a href="#OJ-address" class="headerlink" title="OJ address"></a>OJ address</h3><p>Leetcode website : <a href="https://leetcode.com/problems/letter-combinations-of-a-phone-number/" target="_blank" rel="noopener">17. Letter Combinations of a Phone Number</a></p>
<h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>Given a string containing digits from 2-9 inclusive, return all possible letter combinations that the number could represent.</p>
<p>A mapping of digit to letters (just like on the telephone buttons) is given below. Note that 1 does not map to any letters.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Telephone-keypad2.svg/200px-Telephone-keypad2.svg.png" alt="image"></p>
<p>Example:</p>
<p>Input: “23”<br>Output: [“ad”, “ae”, “af”, “bd”, “be”, “bf”, “cd”, “ce”, “cf”].</p>
<h3 id="My-Solution-in-C"><a href="#My-Solution-in-C" class="headerlink" title="My Solution in C"></a>My Solution in C</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> indexValue = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s ,<span class="keyword">char</span>** letter_matrix, <span class="keyword">int</span> count, <span class="keyword">int</span> n, <span class="keyword">char</span> **returnArray, <span class="keyword">char</span> *newArray)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span>** <span class="title">letterCombinations</span><span class="params">(<span class="keyword">char</span>* digits, <span class="keyword">int</span>* returnSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">strlen</span>(digits)) &#123;</span><br><span class="line">        *returnSize = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    indexValue = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> *letter_matrix[<span class="number">10</span>];</span><br><span class="line">    letter_matrix[<span class="number">0</span>] = <span class="string">" "</span>;</span><br><span class="line">    letter_matrix[<span class="number">1</span>] = <span class="string">" "</span>;</span><br><span class="line">    letter_matrix[<span class="number">2</span>] = <span class="string">"abc"</span>;</span><br><span class="line">    letter_matrix[<span class="number">3</span>] = <span class="string">"def"</span>;</span><br><span class="line">    letter_matrix[<span class="number">4</span>] = <span class="string">"ghi"</span>;</span><br><span class="line">    letter_matrix[<span class="number">5</span>] = <span class="string">"jkl"</span>;</span><br><span class="line">    letter_matrix[<span class="number">6</span>] = <span class="string">"mno"</span>;</span><br><span class="line">    letter_matrix[<span class="number">7</span>] = <span class="string">"pqrs"</span>;</span><br><span class="line">    letter_matrix[<span class="number">8</span>] = <span class="string">"tuv"</span>;</span><br><span class="line">    letter_matrix[<span class="number">9</span>] = <span class="string">"wxyz"</span>;</span><br><span class="line">    <span class="keyword">char</span> *s = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span>) * <span class="built_in">strlen</span>(digits));</span><br><span class="line">    <span class="built_in">memset</span>(s, <span class="string">'\0'</span>, <span class="built_in">strlen</span>(digits));</span><br><span class="line">    <span class="keyword">int</span> j =<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;digits[i]!=<span class="string">'\0'</span>;++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (digits[i]== <span class="string">'0'</span> || digits[i] == <span class="string">'1'</span>) <span class="keyword">continue</span>;</span><br><span class="line">        s[j++] = digits[i];</span><br><span class="line">    &#125;</span><br><span class="line">    s[j] = <span class="string">'\0'</span>;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">if</span> (!n) &#123;</span><br><span class="line">        *returnSize = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] == <span class="string">'7'</span> || s[i] == <span class="string">'9'</span>) &#123;</span><br><span class="line">            sum *=<span class="number">4</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sum *=<span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    *returnSize = sum;</span><br><span class="line">    <span class="keyword">char</span> **returnArray = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span> *) * sum + <span class="number">10</span>);</span><br><span class="line">    <span class="built_in">memset</span>(returnArray, <span class="string">'\0'</span>, <span class="keyword">sizeof</span>(<span class="keyword">char</span> *) * sum + <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">char</span>* newArray = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span>) * (n+<span class="number">1</span>) );</span><br><span class="line">    dfs(s, letter_matrix, <span class="number">0</span>, n, returnArray, newArray);</span><br><span class="line">    <span class="keyword">return</span> returnArray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s ,<span class="keyword">char</span>** letter_matrix, <span class="keyword">int</span> count, <span class="keyword">int</span> n, <span class="keyword">char</span> **returnArray, <span class="keyword">char</span> *newArray)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (count == n) &#123;</span><br><span class="line">        newArray[count] = <span class="string">'\0'</span>;</span><br><span class="line">        <span class="keyword">char</span>* <span class="built_in">array</span> = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">char</span>) * (n+<span class="number">1</span>) );</span><br><span class="line">        <span class="built_in">memcpy</span>(<span class="built_in">array</span>, newArray, n);</span><br><span class="line">        <span class="built_in">array</span>[count] = <span class="string">'\0'</span>;</span><br><span class="line">        returnArray[indexValue++] = <span class="built_in">array</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(letter_matrix[s[count]-<span class="string">'0'</span>]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i) &#123;</span><br><span class="line">        newArray[count] = letter_matrix[s[count]-<span class="string">'0'</span>][i];</span><br><span class="line">        dfs(s, letter_matrix, count+<span class="number">1</span>, n, returnArray, newArray);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *s = <span class="string">"8\0"</span>;</span><br><span class="line">    <span class="keyword">int</span> *returnsize = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>)*<span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">char</span> **dd = letterCombinations(s,returnsize);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;*returnsize;++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, dd[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Others-Solution-in-C-DFS"><a href="#Others-Solution-in-C-DFS" class="headerlink" title="Others Solution in C++ DFS"></a>Others Solution in C++ DFS</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; letterCombinations(<span class="built_in">string</span> digits) &#123;</span><br><span class="line">        <span class="keyword">if</span> (digits.empty()) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt; d(<span class="number">10</span>);</span><br><span class="line">        d[<span class="number">0</span>] = &#123;<span class="string">' '</span>&#125;;</span><br><span class="line">        d[<span class="number">1</span>] = &#123;&#125;;</span><br><span class="line">        d[<span class="number">2</span>] = &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;;</span><br><span class="line">        d[<span class="number">3</span>] = &#123;<span class="string">'d'</span>,<span class="string">'e'</span>,<span class="string">'f'</span>&#125;;</span><br><span class="line">        d[<span class="number">4</span>] = &#123;<span class="string">'g'</span>,<span class="string">'h'</span>,<span class="string">'i'</span>&#125;;</span><br><span class="line">        d[<span class="number">5</span>] = &#123;<span class="string">'j'</span>,<span class="string">'k'</span>,<span class="string">'l'</span>&#125;;</span><br><span class="line">        d[<span class="number">6</span>] = &#123;<span class="string">'m'</span>,<span class="string">'n'</span>,<span class="string">'o'</span>&#125;;</span><br><span class="line">        d[<span class="number">7</span>] = &#123;<span class="string">'p'</span>,<span class="string">'q'</span>,<span class="string">'r'</span>,<span class="string">'s'</span>&#125;;</span><br><span class="line">        d[<span class="number">8</span>] = &#123;<span class="string">'t'</span>,<span class="string">'u'</span>,<span class="string">'v'</span>&#125;;</span><br><span class="line">        d[<span class="number">9</span>] = &#123;<span class="string">'w'</span>,<span class="string">'x'</span>,<span class="string">'y'</span>,<span class="string">'z'</span>&#125;;</span><br><span class="line">        <span class="built_in">string</span> cur;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ans;</span><br><span class="line">        dfs(digits, d, <span class="number">0</span>, cur, ans);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; digits, </span></span></span><br><span class="line"><span class="function"><span class="params">             <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; d, </span></span></span><br><span class="line"><span class="function"><span class="params">             <span class="keyword">int</span> l, <span class="built_in">string</span>&amp; cur, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; ans)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l == digits.length()) &#123;</span><br><span class="line">            ans.push_back(cur);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">char</span> c : d[digits[l] - <span class="string">'0'</span>]) &#123;</span><br><span class="line">            cur.push_back(c);</span><br><span class="line">            dfs(digits, d, l + <span class="number">1</span>, cur, ans);</span><br><span class="line">            cur.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="Others-Solution-in-C-BFS"><a href="#Others-Solution-in-C-BFS" class="headerlink" title="Others Solution in C++ BFS"></a>Others Solution in C++ BFS</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; letterCombinations(<span class="built_in">string</span> digits) &#123;</span><br><span class="line">        <span class="keyword">if</span> (digits.empty()) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt; d(<span class="number">10</span>);</span><br><span class="line">        d[<span class="number">0</span>] = &#123;<span class="string">' '</span>&#125;;</span><br><span class="line">        d[<span class="number">1</span>] = &#123;&#125;;</span><br><span class="line">        d[<span class="number">2</span>] = &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;;</span><br><span class="line">        d[<span class="number">3</span>] = &#123;<span class="string">'d'</span>,<span class="string">'e'</span>,<span class="string">'f'</span>&#125;;</span><br><span class="line">        d[<span class="number">4</span>] = &#123;<span class="string">'g'</span>,<span class="string">'h'</span>,<span class="string">'i'</span>&#125;;</span><br><span class="line">        d[<span class="number">5</span>] = &#123;<span class="string">'j'</span>,<span class="string">'k'</span>,<span class="string">'l'</span>&#125;;</span><br><span class="line">        d[<span class="number">6</span>] = &#123;<span class="string">'m'</span>,<span class="string">'n'</span>,<span class="string">'o'</span>&#125;;</span><br><span class="line">        d[<span class="number">7</span>] = &#123;<span class="string">'p'</span>,<span class="string">'q'</span>,<span class="string">'r'</span>,<span class="string">'s'</span>&#125;;</span><br><span class="line">        d[<span class="number">8</span>] = &#123;<span class="string">'t'</span>,<span class="string">'u'</span>,<span class="string">'v'</span>&#125;;</span><br><span class="line">        d[<span class="number">9</span>] = &#123;<span class="string">'w'</span>,<span class="string">'x'</span>,<span class="string">'y'</span>,<span class="string">'z'</span>&#125;;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ans&#123;<span class="string">""</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> digit : digits) &#123;</span><br><span class="line">            <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; tmp;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">const</span> <span class="built_in">string</span>&amp; s : ans)</span><br><span class="line">               <span class="keyword">for</span> (<span class="keyword">char</span> c : d[digit - <span class="string">'0'</span>])</span><br><span class="line">                    tmp.push_back(s + c);</span><br><span class="line">            ans.swap(tmp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="My-Idea"><a href="#My-Idea" class="headerlink" title="My Idea"></a>My Idea</h3><p>Solution via DFS:</p>
<p>Time complexity: O(4^n), n is the length of the input without ‘0’ and ‘1’.<br>Space complexity: O(4^n + n)</p>
<p>Solution via BS:</p>
<p>Time complexity: O(4^n)<br>Space complexity: O(4^n * 2)</p>
<p>I solve it via C language, it’s so difficult than C++, because ‘char’ is not comfortbal than ‘String’, but I like resolve it by C. You can resolve it via DBS or BFS, the question is medium level.</p>
<p>The question check our programming about knowledge of DFS、BFS and double dimensional array. All of them deserve a AC.</p>
<p>ps: 花了我一上午的时间解答这道题，太久没玩DFS，手很生，以至于午餐时间都过了，题目不解决，吃饭都没心思。现在解决了，去吃午餐啦.争取今晚搞定一个ARPS.</p>
<p><img src="/images/15491727354470.jpg" alt></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/02/02/2019-02-02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/02/2019-02-02/" itemprop="url">CS50's Mobile App Development with React Native (Lecture two)</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-02T00:14:00+08:00">
                2019-02-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index">
                    <span itemprop="name">web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/02/02/2019-02-02/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/02/2019-02-02/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Lecture-two-JavaScript-ES6"><a href="#Lecture-two-JavaScript-ES6" class="headerlink" title="Lecture two: JavaScript, ES6"></a>Lecture two: JavaScript, ES6</h3><p>这一节东西有点多，按照上课的顺序，将例子讲解一下.</p>
<h3 id="closure-Bug"><a href="#closure-Bug" class="headerlink" title="closure Bug"></a>closure Bug</h3><p>关于一个作用域引起的bug，代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeFunctionArray</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> arr = []</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    arr.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(i) &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> functionArr = makeFunctionArray()</span><br><span class="line"></span><br><span class="line"><span class="comment">// we expect this to log 0, but it doesn't</span></span><br><span class="line">functionArr[<span class="number">0</span>]()</span><br></pre></td></tr></table></figure>
<p>输出的结果不是0，这个bug估计也只有javascript的程序员才能看得出来。</p>
<p>因为var的作用域的原因，只要i++了，那么之后所有的i值都是最新的，所有打印出来的结果是5,arr保存的是i变量的输出值，所以数组输出都是5.<br>如果用let或者const替换var，输出的结果就是正确答案：（0、1、2、3、4）</p>
<p>这个就是colure可能引起的问题,尽量不要用var，因为var的生命周期太久。</p>
<p>如何用var的方式打印出来不是var的值呢？通过IIFEs进行解决,例子如下:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makefunctionArray</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; ++i) &#123;</span><br><span class="line">        arr.push((<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(x)&#125;</span><br><span class="line">        &#125;)(i))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> functionArr = makefunctionArray()</span><br><span class="line"></span><br><span class="line">functionArr[<span class="number">0</span>]()</span><br></pre></td></tr></table></figure>
<p>这样的话 functionArr<a href>0</a> 打印出来就是我们的excepted result.</p>
<h3 id="IIFEs-Immediately-Invoked-Functions-Expressions"><a href="#IIFEs-Immediately-Invoked-Functions-Expressions" class="headerlink" title="IIFEs(Immediately Invoked Functions Expressions)"></a>IIFEs(Immediately Invoked Functions Expressions)</h3><p>是一种用來建立 function 的方法，就是用 function expression 的方式建立函数后并立即执行</p>
<p>建立 function 的方法通常有 function statement 和 function expression，下面是三种建立函数的方法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// function statement</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello '</span> + name);</span><br><span class="line">&#125;</span><br><span class="line">sayHello(<span class="string">'PJCHEN'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// function expression</span></span><br><span class="line"><span class="keyword">var</span> sayWelcome = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Welcome, '</span> + name);</span><br><span class="line">&#125;</span><br><span class="line">sayWelcome(<span class="string">'PJCHEN'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Immediately Invoked Functions Expressions (IIFEs)</span></span><br><span class="line"><span class="keyword">var</span> sayWelcomeIIFEs = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Welcome '</span> + name);</span><br><span class="line">&#125;(<span class="string">'Levi'</span>);</span><br></pre></td></tr></table></figure>
<p>IIFEs，可以直接用.语法来调用return的函数，这种写法比较奇特，算是javascript专有的特性。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> sayHello = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> message = <span class="string">'Hello!'</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(message)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> sayHello</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counter = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    inc: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; count = count + <span class="number">1</span> &#125;,</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(count) &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">counter.get()</span><br><span class="line">counter.inc()</span><br><span class="line">counter.get()</span><br></pre></td></tr></table></figure>
<h3 id="Higher-Order-Functions"><a href="#Higher-Order-Functions" class="headerlink" title="Higher Order Functions"></a>Higher Order Functions</h3><p>函数的参数是可以传函数进来，下面是例子，这也是JavaScript独到的新特性。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map</span>(<span class="params">arr, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> newArr = []</span><br><span class="line"></span><br><span class="line">  arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    newArr.push(fn(val))</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newArr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addOne</span>(<span class="params">num</span>) </span>&#123; <span class="keyword">return</span> num + <span class="number">1</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> x = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map(x, addOne))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span>(<span class="params">arr, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> newArr = []</span><br><span class="line">  arr.forEach(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (fn(val)) newArr.push(val)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newArr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reduce</span>(<span class="params">arr, fn, initialVal</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> returnVal = initialVal</span><br><span class="line"></span><br><span class="line">  arr.forEach(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">    returnVal = fn(returnVal, val)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> returnVal</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="async"><a href="#async" class="headerlink" title="async"></a>async</h3><p>利用setTimeout函数来进行异步线程运行</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printOne</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'one'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printTwo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'two'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printThree</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'three'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// this may not print in the order that you expect, because of the way the JS</span></span><br><span class="line"><span class="comment">// function queue works</span></span><br><span class="line">setTimeout(printOne, <span class="number">1000</span>)</span><br><span class="line">setTimeout(printTwo, <span class="number">0</span>)</span><br><span class="line">printThree()</span><br></pre></td></tr></table></figure>
<h3 id="Callback"><a href="#Callback" class="headerlink" title="Callback"></a>Callback</h3><p>下面是Callback的函数用法，callback类似于objective-c中的block函数，由于函数可以当做参数使用，所以就不需要block的函数定义了，直接传函数进去就好了，这一点javascript是真的方便。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// this is a HOF that invokes the function argument on 1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomethingWithOne</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> callback(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">doSomethingWithOne(<span class="built_in">console</span>.log)</span><br><span class="line"></span><br><span class="line"><span class="comment">// this is the same thing, but done asynchronously</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomethingWithOneAsync</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> callback(<span class="number">1</span>), <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">doSomethingWithOneAsync(<span class="built_in">console</span>.log)</span><br><span class="line"></span><br><span class="line"><span class="comment">// this simulates a database call that returns an object representing a person</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserFromDatabase</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// simulates getting data from db</span></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> callback(&#123;<span class="attr">firstName</span>: <span class="string">'Jordan'</span>, <span class="attr">lastName</span>: <span class="string">'Hayashi'</span>&#125;), <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// this is a function that greets a user, which we pass as a callback to getUserFromDatabase</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greetUser</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hi, '</span> + user.firstName)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getUserFromDatabase(greetUser)</span><br></pre></td></tr></table></figure>
<p>需要注意的是 （）=&gt;  这个肥括号的含义，(-&gt;这个叫做瘦括号)</p>
<p>简单例子，用法如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> func = <span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>相当于</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> func = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> x + <span class="number">1</span> &#125;</span><br></pre></td></tr></table></figure>
<p>需要注意的是：</p>
<ol>
<li>花括號({})是有意義的，如果函式沒回傳東西就要花括號。例如 ()=&gt;{}</li>
<li>只有單一個傳入參數時，括號(())可以不用，例如 x=&gt;x*x</li>
</ol>
<p>例子：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> funcA = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span></span><br><span class="line"><span class="keyword">const</span> funcB = <span class="function"><span class="params">x</span> =&gt;</span> &#123; x + <span class="number">1</span> &#125;</span><br><span class="line"></span><br><span class="line">funcA(<span class="number">1</span>) <span class="comment">//2</span></span><br><span class="line">funcB(<span class="number">1</span>) <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<p>當沒用花括號({})時，代表會自動加return，也只能在一行的語句的時候使用。使用花括號({})則是可以加入多行的語句，不過return不會自動加，有需要你要自己加上，沒加這個函式最後等於return undefined(註: 這是JavaScript語言中函式的設計)。</p>
<p>callback的一个Demo</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">req, res, callback</span>) </span>&#123;</span><br><span class="line">  User.findOne(&#123;<span class="attr">email</span>: req.body.email&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, user</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> callback(err)</span><br><span class="line"></span><br><span class="line">    user.comparePassword(req.body.password, (err, isMatch) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">return</span> callback(err)</span><br><span class="line">      <span class="keyword">if</span> (!isMatch) <span class="keyword">return</span> res.status(<span class="number">401</span>).send(<span class="string">'Incorrect password'</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// add relevant data to token</span></span><br><span class="line">      <span class="keyword">const</span> payload = &#123;<span class="attr">id</span>: user._id, <span class="attr">email</span>: user.email&#125;</span><br><span class="line"></span><br><span class="line">      jwt.sign(payload, config.secret, &#123;&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, token</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">return</span> callback(err)</span><br><span class="line"></span><br><span class="line">        user.token = token</span><br><span class="line">        user.save(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (err) <span class="keyword">return</span> callback(err)</span><br><span class="line">          res.json(&#123;token&#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然可以用promise的写法，如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">req, res, callback</span>) </span>&#123;</span><br><span class="line">  User.findOne(&#123;<span class="attr">email</span>: req.body.email&#125;)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> user.comparePassword(req.body.password)</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">isMatch</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// have to throw in order to break Promise chain</span></span><br><span class="line">      <span class="keyword">if</span> (!isMatch) &#123;</span><br><span class="line">        res.status(<span class="number">401</span>).send(<span class="string">'Incorrect password'</span>)</span><br><span class="line">        <span class="keyword">throw</span> &#123;<span class="attr">earlyExit</span>: <span class="literal">true</span>&#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> payload = &#123;<span class="attr">id</span>: user._id, <span class="attr">email</span>: user.email&#125;</span><br><span class="line">      <span class="keyword">return</span> jwt.sign(payload, config.secret, &#123;&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">token</span>) </span>&#123;</span><br><span class="line">      user.token = token</span><br><span class="line">      <span class="keyword">return</span> user.save()</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      res.json(&#123;token&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!err.earlyExit) callback(err)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还有第三种写法，通过await的方式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">req, res, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> User.findOne(&#123;<span class="attr">email</span>: req.body.email&#125;)</span><br><span class="line">    <span class="keyword">const</span> isMatch = <span class="keyword">await</span> user.comparePassword(req.body.password)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!isMatch) <span class="keyword">return</span> res.status(<span class="number">401</span>).send(<span class="string">'Incorrect password'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> payload = &#123;<span class="attr">id</span>: user._id, <span class="attr">email</span>: user.email&#125;</span><br><span class="line">    <span class="keyword">const</span> token = <span class="keyword">await</span> jwt.sign(payload, config.secret, &#123;&#125;)</span><br><span class="line"></span><br><span class="line">    user.token = token</span><br><span class="line">    <span class="keyword">const</span> success = <span class="keyword">await</span> user.save()</span><br><span class="line"></span><br><span class="line">    res.json(&#123;token&#125;)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    callback(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="bind-call-apply"><a href="#bind-call-apply" class="headerlink" title="bind / call / apply"></a>bind / call / apply</h3><p>bind() 方法用于在调用时设置this关键字为提供的值。并且创建一个新的function方法。<br>call()/apply() 方法用于在调用时设置this关键字为提供的值，但不能创建新的function方法，可以进行变量赋值.</p>
<p>例子：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> dd = &#123;</span><br><span class="line">    name : <span class="string">'levi'</span>,</span><br><span class="line">    greet: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.name &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> string = dd.greet.call(&#123;<span class="attr">name</span>: <span class="string">'Yowon'</span>&#125;)</span><br><span class="line"><span class="keyword">const</span> func = dd.greet.bind(&#123;<span class="attr">name</span>: <span class="string">'Rayna'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(string) <span class="comment">// 输出 'Yowon'</span></span><br><span class="line">func()    <span class="comment">// 输出 'Rayna'</span></span><br></pre></td></tr></table></figure>
<p>关于肥箭头，要注意一点，箭头方法運算式最適合用在非方法的函式。來看看如果要把它們當成方法來用，會發生什麼事</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  i: <span class="number">10</span>,</span><br><span class="line">  b: <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="keyword">this</span>.i, <span class="keyword">this</span>),</span><br><span class="line">  c: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.i, <span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.b(); <span class="comment">// 印出 undefined, Object &#123;...&#125;</span></span><br><span class="line">obj.c(); <span class="comment">// 印出 10, Object &#123;...&#125;</span></span><br></pre></td></tr></table></figure>
<p>箭头沒有自己的 this？ 即使有也只会绑定了全局的this,所以不会绑定变量局部的this.</p>
<p>下面是哈佛老师讲解的例子：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// <span class="doctag">NOTE:</span> this doesn't work as a node script, since they are run as modules</span></span><br><span class="line"><span class="comment">// `this` in this case is equal to module.exports, which is an empty object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// this logs the global object</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">whatIsThis</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">whatIsThis()</span><br><span class="line"></span><br><span class="line"><span class="comment">// =======================================</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  name: <span class="string">'Jordan'</span>,</span><br><span class="line">  greet: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'Hi, '</span> + <span class="keyword">this</span>.name) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">person.greet() <span class="comment">// Hi, Jordan</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// =====================================</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> friend = &#123;</span><br><span class="line">  name: <span class="string">'David'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">friend.greet = person.greet</span><br><span class="line"></span><br><span class="line">friend.greet() <span class="comment">// Hi, david</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ====================================</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> greetPerson = person.greet</span><br><span class="line"></span><br><span class="line">greetPerson() <span class="comment">// Hi, undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// make greetPerson() work, but not in node</span></span><br><span class="line"><span class="keyword">this</span>.name = <span class="string">'Global'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// browser console or node REPL: Hi, Global</span></span><br><span class="line"><span class="comment">// node script: Hi, undefined</span></span><br><span class="line">greetPerson()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reallyGreetPerson = person.greet.bind(person)</span><br><span class="line">reallyGreetPerson() <span class="comment">// Hi, Jordan</span></span><br><span class="line"></span><br><span class="line">person.greet.call(&#123;<span class="attr">name</span>: <span class="string">'Yowon'</span>&#125;) <span class="comment">// Hi, Yowon</span></span><br><span class="line">person.greet.apply(&#123;<span class="attr">name</span>: <span class="string">'Raylen'</span>&#125;) <span class="comment">// Hi, Raylen</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ====================================</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newPerson = &#123;</span><br><span class="line">  name: <span class="string">'Jordan'</span>,</span><br><span class="line">  <span class="comment">// arrow notation binds `this` lexically</span></span><br><span class="line">  greet: <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Hi, '</span> + <span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">newPerson.greet() <span class="comment">// Hi, Global</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bound functions cannot be bound again</span></span><br><span class="line">newPerson.greet.call(person) <span class="comment">// Hi, Global</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/01/30/2019-01-30-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/30/2019-01-30-1/" itemprop="url">2019/1/30 思考感悟</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-30T22:50:00+08:00">
                2019-01-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Idea/" itemprop="url" rel="index">
                    <span itemprop="name">Idea</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/30/2019-01-30-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/01/30/2019-01-30-1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><p>之前听过一句话，如果你对创业成功的可能性有正确认识的话，你根本不会创业。创业者往往是无知无畏、过度自信的人。这些人是认准一个方向先干起来再说，大自然对此表示很愉快，因为总有探索者出去干，才能把那个正确的方向找出来。</p>
</li>
<li><p>成功的反义词一直都不是失败，而是平庸。失败者跟成功者同样光荣，他们都是尝试者。就好比马斯克，今天弄火箭明天弄什么高速交通工具，他一直都在赌博而已。不赌当然永远不会输，但是也永远都不会赢。</p>
</li>
<li><p>以前小布什当总统的时候，打伊拉克，很多记者反对，有一次小布什当局一个什么官员出来开记者会，跟记者说了几句话，非常有意思，大意是说，我们是历史舞台的参与者，我们的一举一动都在左右历史进程，而你们这帮记者只不过是历史的记录者，你们下了很多功夫，记录的很正确，当然有权批评我们，但是你千万别忘了这个事实：你们永远只能旁观议论，真正参与历史的是我们。</p>
</li>
<li><p>慎独，不是说什么自己一个人的时候谨慎小心不做坏事，而是常常担心有什么东西，自己不知道，要主动寻求知识。</p>
</li>
<li><p>Synthesize 意思是你主动去调研所有相关知识然后自己做一个综合判断。</p>
</li>
<li><p>普通人做事总是把”不伤害自己的感情“放在首位，一天到晚，担心这个害怕那个，特别脆弱。如果一个人能克服这些弱点，明确知道自己是谁，自己想要什么，应该怎么做，他就会非常坚定，对生活就有掌控感。</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/01/30/2019-01-30/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/30/2019-01-30/" itemprop="url">CS50's Mobile App Development with React Native (Lecture one)</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-30T22:50:00+08:00">
                2019-01-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index">
                    <span itemprop="name">web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/30/2019-01-30/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/01/30/2019-01-30/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Lecture-one-Overview-JavaScript"><a href="#Lecture-one-Overview-JavaScript" class="headerlink" title="Lecture one: Overview, JavaScript"></a>Lecture one: Overview, JavaScript</h3><p>最近在学习RN课程，这是哈佛大学2018年的公开课，再次总结第一节课的知识点，按照slides的顺序进行总结.</p>
<p>JavaScript ： 简称JS，解释执行语言，多范式语言，支持面向对象变成，命令式变成以及函数式编程，提供语法来操控文本。</p>
<p>ES6：ECMAScript 6.0,是JavaScript语言的下一代标准，在2015年6月发布，</p>
<p>React：用于构建用户界面的 JavaScript 库，React 可以非常轻松地创建用户交互界面。为你应用的每一个状态设计简洁的视图，在数据改变时 React 也可以高效地更新渲染界面</p>
<p>JSX：一种 JavaScript 的语法扩展。 我们推荐在 React 中使用 JSX 来描述用户界面。JSX 乍看起来可能比较像是模版语言，但事实上它完全是在 JavaScript 内部实现的。</p>
<h3 id="Syntex"><a href="#Syntex" class="headerlink" title="Syntex"></a>Syntex</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// comments are prefixed with double slashes</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Multi-line comments look like this</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// camelCase is preferred</span></span><br><span class="line"><span class="comment">// double-quotes create strings</span></span><br><span class="line"><span class="keyword">const</span> firstName = <span class="string">"jordan"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// semicolons are optional</span></span><br><span class="line"><span class="comment">// single-quotes also create strings</span></span><br><span class="line"><span class="keyword">const</span> lastName = <span class="string">'Hayashi'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// arrays can be declared inline</span></span><br><span class="line"><span class="comment">// arrays can have multiple types (more on types later)</span></span><br><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  <span class="string">'string'</span>,</span><br><span class="line">  <span class="number">42</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'hi'</span>) &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// this returns the element at the 2nd index and invokes it</span></span><br><span class="line">arr[<span class="number">2</span>]()</span><br><span class="line"></span><br><span class="line"><span class="comment">// this will iterate through the array and console log each element</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Typecasting-Coercion"><a href="#Typecasting-Coercion" class="headerlink" title="Typecasting? Coercion"></a>Typecasting? Coercion</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">const</span> explicit = <span class="built_in">String</span>(x); <span class="comment">// explicit === "42"</span></span><br><span class="line"><span class="keyword">const</span> implicit = x + <span class="string">""</span>; <span class="comment">// implicit === "42"</span></span><br></pre></td></tr></table></figure>
<p>== coerces the types<br>=== requires equivalent types</p>
<h3 id="New-Object"><a href="#New-Object" class="headerlink" title="New Object"></a>New Object</h3><p>声明一个对象，有三种方式如下，可以任选一种方式进行对象初始化</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">o.firstName = <span class="string">'Jordan'</span></span><br><span class="line">o.lastName = <span class="string">'Hayashi'</span></span><br><span class="line">o.isTeaching = <span class="literal">true</span></span><br><span class="line">o.greet = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'Hello!'</span>) &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(o))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o2 = &#123;&#125;</span><br><span class="line">o2[<span class="string">'firstName'</span>] = <span class="string">'Jordan'</span></span><br><span class="line"><span class="keyword">const</span> ab = <span class="string">'lastName'</span></span><br><span class="line">o2[ab] = <span class="string">'Hayashi'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o3 = &#123;</span><br><span class="line">  firstName: <span class="string">'dd'</span>,</span><br><span class="line">  lastName: <span class="string">'ee'</span>,</span><br><span class="line">  greet: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hi'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  address: &#123;</span><br><span class="line">    street: <span class="string">"Main st."</span>,</span><br><span class="line">    number: <span class="string">'111'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Deep-copy"><a href="#Deep-copy" class="headerlink" title="Deep copy"></a>Deep copy</h3><p>o2 是通过指针进行的浅拷贝，下面是两种深拷贝的方法，o3是通过assign的方法进行的深拷贝，o4是通过函数方法进行的递归深拷贝。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> o = &#123;</span><br><span class="line">  a: <span class="string">'a'</span>,</span><br><span class="line">  b: <span class="string">'b'</span>,</span><br><span class="line">  obj: &#123;</span><br><span class="line">    key: <span class="string">'key'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o2 = o</span><br><span class="line"></span><br><span class="line">o2.a = <span class="string">'new value'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// o and o2 reference the same object</span></span><br><span class="line"><span class="built_in">console</span>.log(o.a)</span><br><span class="line"></span><br><span class="line"><span class="comment">// this shallow-copies o into o3</span></span><br><span class="line"><span class="keyword">const</span> o3 = <span class="built_in">Object</span>.assign(&#123;&#125;, o)</span><br><span class="line"></span><br><span class="line"><span class="comment">// deep copy</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// check if vals are objects</span></span><br><span class="line">  <span class="comment">// if so, copy that object (deep copy)</span></span><br><span class="line">  <span class="comment">// else return the value</span></span><br><span class="line">  <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(obj)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> newObject = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> key = keys[i]</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj[key] === <span class="string">'object'</span>) &#123;</span><br><span class="line">      newObject[key] = deepCopy(obj[key])</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      newObject[key] = obj[key]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newObject</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o4 = deepCopy(o)</span><br><span class="line"></span><br><span class="line">o.obj.key = <span class="string">'new key!'</span></span><br><span class="line"><span class="built_in">console</span>.log(o4.obj.key)</span><br></pre></td></tr></table></figure>
<h3 id="const、var、let"><a href="#const、var、let" class="headerlink" title="const、var、let"></a>const、var、let</h3><p>通过下面的代码很详细的说明三者的区别</p>
<p>const 定义的变量是不能被改变的,作用域在 block scoped 内。<br>let 定义的变量是可以改变的,作用域在 block scoped 内。<br>var 定义的变量是可以改变的，作用域在整个函数内的，第一行或者最后一行都可以调用。</p>
<p>Lexical scoping (var): from when they’re declared until when their<br>function ends.</p>
<p>Block scoping (const, let): until the next } is reached.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// "var" is lexically scoped, meaning it exists from time of declaration to end of func</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> lexicallyScoped = <span class="string">'This exists until the end of the function'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(lexicallyScoped)</span><br><span class="line"></span><br><span class="line"><span class="comment">// "let" and "const" are block scoped</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> blockScoped = <span class="string">'This exists until the next &#125;'</span></span><br><span class="line">  <span class="keyword">const</span> alsoBlockScoped = <span class="string">'As does this'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// this variable doesn't exist</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> blockScoped)</span><br><span class="line"></span><br><span class="line">thisIsAlsoAVariable = <span class="string">"hello"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> thisIsAConst = <span class="number">50</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// thisIsAConst++ // error!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> constObj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// consts are still mutable</span></span><br><span class="line">constObj.a = <span class="string">'a'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> thisIsALet = <span class="number">51</span></span><br><span class="line">thisIsALet = <span class="number">50</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// let thisIsALet = 51 // errors!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> thisIsAVar = <span class="number">50</span></span><br><span class="line">thisIsAVar = <span class="number">51</span></span><br><span class="line"><span class="keyword">var</span> thisIsAVar = <span class="string">'new value!'</span></span><br></pre></td></tr></table></figure>
<h3 id="Function-Scope"><a href="#Function-Scope" class="headerlink" title="Function Scope"></a>Function Scope</h3><p>函数的作用域是在整个函数内，后面声明的函数，在声明前面可以直接调用。例如下面代码的hoistedFunction函数。</p>
<p>需要注意的一点是将函数复制给变量的时候，如果赋值给var变量，由于var变量是整个函数内，所以在函数第一行查看这个变量，变量是存在的，函数值不存在。如果赋值给let变量，在第一行查看这个变量就会报错了，因为let的作用域在let定义函数的代码行下方才能调用。</p>
<p>关于变量赋值的函数方法，需要在赋值后才能执行这个function.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// functions are hoisted</span></span><br><span class="line">hoistedFunction()</span><br><span class="line"><span class="comment">// but only if they are declared as functions and not as variables initialized to</span></span><br><span class="line"><span class="comment">// anonymous functions</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"typeof butNotThis: "</span> + <span class="keyword">typeof</span> butNotThis)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">thisShouldWork</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"functions are hoisted"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> butNotThis = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"but variables aren't"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">butNotThis()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"typeof butNotThis: "</span> + <span class="keyword">typeof</span> butNotThis)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hoistedFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"dd"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="The-Global-Object"><a href="#The-Global-Object" class="headerlink" title="The Global Object"></a>The Global Object</h3><p>浏览器和Node.js的全局对象有区别，需要注意下</p>
<p>Browser global object is the <code>window</code> object<br>Node.js global object is the <code>global</code> object</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar1.jpg" alt="Levi Duan">
            
              <p class="site-author-name" itemprop="name">Levi Duan</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">57</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/leviduan" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.reddit.com/user/leviduan" target="_blank" title="Reddit">
                      
                        <i class="fa fa-fw fa-reddit"></i>Reddit</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://medium.com/@suiyun/responses" target="_blank" title="Medium">
                      
                        <i class="fa fa-fw fa-medium"></i>Medium</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                My Favorite
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://juejin.im/user/5a52075e6fb9a01c9d31b107/posts" title="iOS Week" target="_blank">iOS Week</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.nowcoder.com/ta/coding-interviews?page=1" title="Nowcoder" target="_blank">Nowcoder</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://leetcode.com/problemset/all/" title="Leetcode" target="_blank">Leetcode</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://dribbble.com/" title="Dribbble" target="_blank">Dribbble</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://courses.edx.org/dashboard" title="Edx" target="_blank">Edx</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-apple" aria-hidden="true"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Levi Duan</span>

  
</div>

 <span class="with-love">
    <i class="fa fa-heart" aria-hidden="true"></i>
  </span>
   <span id="busuanzi_value_site_uv"></span> visitors | <span class="with-love">
    <i class="fa fa-eye" aria-hidden="true"></i>
  </span>
  <span id="busuanzi_value_site_pv"></span> times.



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/libs/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/libs/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/libs/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/libs/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/libs/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/libs/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://leviduan-com.disqus.com/count.js" async></script>
    

    

  




	





  









<!-- LOCAL: You can save these files to your site and update links -->
    

<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://www.wenjunjiang.win/js/gitment.js"></script>

<!-- END LOCAL -->

    
      <style>
        a.gitment-editor-footer-tip { display: none; }
        .gitment-container.gitment-footer-container { display: none; }
      </style>
    

    







  





  

  

  

  
  
  
  <link rel="stylesheet" href="/libs/needsharebutton/needsharebutton.css">

  
  
  <script src="/libs/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Twitter,Facebook,Reddit,Weibo";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>

  

  

  

  

</body>
</html>
