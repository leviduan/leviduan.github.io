<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="Lbqbq-u0Mn24a7n3Er0wVtGF9AUxR-o_FZsCOl4YEOQ">














  
  
  <link href="/libs/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Lucida Grande:300,300italic,400,400italic,700,700italic|Zapfino:300,300italic,400,400italic,700,700italic|Monaco:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/libs/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar1.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar1.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar1.jpg?v=5.1.4">


  <link rel="mask-icon" href="/images/avatar1.jpg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, Levi">





  <link rel="alternate" href="/atom.xml" title="Levi's blog" type="application/atom+xml">






<meta name="description" content="Shareness make me happy">
<meta property="og:type" content="website">
<meta property="og:title" content="Levi&#39;s blog">
<meta property="og:url" content="http://leviduan.com/page/5/index.html">
<meta property="og:site_name" content="Levi&#39;s blog">
<meta property="og:description" content="Shareness make me happy">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Levi&#39;s blog">
<meta name="twitter:description" content="Shareness make me happy">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: false,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://leviduan.com/page/5/">





  <title>Levi's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Levi's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-time">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>
            
            Time
          </a>
        </li>
      
        
        <li class="menu-item menu-item-ios">
          <a href="/categories/iOS/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-apple"></i> <br>
            
            iOS
          </a>
        </li>
      
        
        <li class="menu-item menu-item-react-n.">
          <a href="/categories/web/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-html5"></i> <br>
            
            React N.
          </a>
        </li>
      
        
        <li class="menu-item menu-item-algorithm">
          <a href="/categories/Algorithm/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Algorithm
          </a>
        </li>
      
        
        <li class="menu-item menu-item-idea">
          <a href="/categories/Idea/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-music"></i> <br>
            
            Idea
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/01/21/201901211012/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/21/201901211012/" itemprop="url">2018-01-21 Review & Shares</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-21T20:46:25+08:00">
                2019-01-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Idea/" itemprop="url" rel="index">
                    <span itemprop="name">Idea</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/21/201901211012/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/01/21/201901211012/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Review"><a href="#Review" class="headerlink" title="Review"></a>Review</h1><p><a href="https://medium.com/s/story/nothing-can-stop-google-duckduckgo-is-trying-anyway-718eb7391423" target="_blank" rel="noopener">Nothing Can Stop Google. DuckDuckGo Is Trying Anyway.</a></p>
<p>When it comes to the internet, trust is something easily lost and difficult to regain. In a sense, every time a giant of the internet surveillance economy is revealed to have sold out its customers in some innovatively horrifying way, the ensuing chaos almost serves as free advertising for DuckDuckGo. “The world keeps going in a bad direction, and it makes people think, ‘Hey, I would like to escape some of the bad stuff on the internet and go to a safer place,’” Weinberg says. “And that’s where we see ourselves.”</p>
<p>I like DuckDuckGo, because it make us pay attention to privacy, don’t track you, the little duck is trying to stop Google, by the way protect your privacy.</p>
<h1 id="Shares"><a href="#Shares" class="headerlink" title="Shares"></a>Shares</h1><p>How now to do “The things must to do”</p>
<p>If you have tow months vocation without duty, what will you do? We are a group of adults, I believe us don’t waste time to enjoy life for tow months. Perhaps your study a skill. or you will read a book that you don’t have time to read. however, why didn’t we have two month to do something.</p>
<p>Time management demand us divide into two parties: importance and urgency, however, most things is urgent in our routine schedule. We are used to doing “Must Things” instead of “Things want to do”. </p>
<p>I think the highest state about time management is not to do “The things must to do”.We must be ahead of the schedule. I like slack status, I don’t like tradeoff, Your time is that we can do anything unconstrained. free time is more expensive than free money. We must do “Must things” and mental activity by the minimum time, and you do nothing in most time.</p>
<p>If you like slack status, firstly, you will be brave to say “No”, that make you get “your time”, Secondly, you give up some project.</p>
<p>拥有余闲就有用主动权，就有用创造，冒险改变的可能性，时间就好像金钱，你花了它就不是你的了，可是你一直不花也不是你的，只有在你“可以花也可以不花”的那一刻，它才是你的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/01/20/201901211013/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/20/201901211013/" itemprop="url">iOS Custom URL Scheme</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-20T20:46:25+08:00">
                2019-01-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/20/201901211013/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/01/20/201901211013/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>I’m making an app using a custom URL scheme, so I thought I’d share it with everyone else incase they were curious.</p>
<p>Step 1<br>Go into your app’s info.plst file.</p>
<p>Step 2<br>Add a Row to this and call it “URL types”</p>
<p>Step 3<br>Expand the first item in “URL types” and add a row called “URL identifier”, the value of this string should be the reverse domain for your app e.g. “com.yourcompany.myapp”.</p>
<p>Step 4<br>Again, add a row into the first item in “URL types” and call it “URL Schemes”</p>
<p>Step 5<br>Inside “URL Schemes” you can use each item as a different url you wish to use, so if you wanted to use “myapp://“ you would create an item called “myapp”.</p>
<p>After all of this, your structure should look something like this:</p>
<p><img src="/images/15480510567498.png" alt></p>
<p>Using the URL Scheme<br>Now you’ve registered the URL with the app, you can start the application by opening a url with the custom scheme.</p>
<p>Here are a few examples:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">myapp://</span><br><span class="line">myapp://a/random/path</span><br><span class="line">myapp://?foo=1&amp;bar=2</span><br></pre></td></tr></table></figure>
<p>This url will send a message to the UIApplicationDelegate so if you want to provide a custom handler for it, all you need to do is provide an implementation for it in your delegate.</p>
<p>Something like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url &#123;</span><br><span class="line">  // Do something with the url here</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Most people will want to parse the URL and store it in the NSUserDefaults, here is a example of how you could do that:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url &#123;</span><br><span class="line">  if (!url) &#123; </span><br><span class="line">    return NO; </span><br><span class="line">  &#125; </span><br><span class="line">  NSString *URLString = [url absoluteString]; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For example In my project:</p>
<p>declare a dictionary</p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">hostToAction = @&#123;</span><br><span class="line">    <span class="string">@"redemption"</span>: <span class="built_in">NSStringFromSelector</span>(<span class="keyword">@selector</span>(openRedeemptionPage:params:)), </span><br><span class="line">    <span class="string">@"web"</span>: <span class="built_in">NSStringFromSelector</span>(<span class="keyword">@selector</span>(openWebViewWithPath:params:absoluteString:))</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>handleOpenURL void</p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">+ (<span class="built_in">BOOL</span>)handleOpenURL:(<span class="built_in">NSURL</span> *)url sourceApplication:(<span class="built_in">NSString</span> *)sourceApplication</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ([url.scheme isEqualToString:DJURLSchema] &amp;&amp; url.host &amp;&amp; hostToAction[url.host]) &#123;</span><br><span class="line">        [DJLog info:DJ_UI content:<span class="string">@"handleOpenURL %@ from application %@"</span>, url.absoluteString, sourceApplication];</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSString</span> *path = url.path.length &gt; <span class="number">1</span> ? [url.path substringFromIndex:<span class="number">1</span>] : <span class="string">@""</span>;</span><br><span class="line">        <span class="built_in">NSDictionary</span> *params = [<span class="keyword">self</span> dictionaryWithQuery:url.query];</span><br><span class="line">        <span class="built_in">NSString</span> *absoluteString = url.absoluteString;</span><br><span class="line">        </span><br><span class="line">        SEL action = <span class="built_in">NSSelectorFromString</span>(hostToAction[url.host]);</span><br><span class="line">        <span class="built_in">NSInvocation</span> *inv = [<span class="built_in">NSInvocation</span> invocationWithMethodSignature:[<span class="keyword">self</span> methodSignatureForSelector:action]];</span><br><span class="line">        [inv setSelector:action];</span><br><span class="line">        [inv setTarget:<span class="keyword">self</span>];</span><br><span class="line">        <span class="comment">// arguments 0 and 1 are self and _cmd respectively, automatically set by NSInvocation</span></span><br><span class="line">        [inv setArgument:&amp;(path) atIndex:<span class="number">2</span>];</span><br><span class="line">        [inv setArgument:&amp;(params) atIndex:<span class="number">3</span>];</span><br><span class="line">        <span class="keyword">if</span>([url.host isEqualToString:<span class="string">@"web"</span>]) &#123;</span><br><span class="line">            [inv setArgument:&amp;(absoluteString) atIndex:<span class="number">4</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        [inv invoke];</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>openPage void</p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)openRedeemptionPage:(<span class="built_in">NSString</span> *)path params:(<span class="built_in">NSDictionary</span> *)params</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        [[DJAppCallContainer sharedInstance] appCallRedeemptionPage:path];</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func appCallRedeemptionPage(_ path : String) &#123;</span><br><span class="line">    <span class="keyword">if</span> canShowViewController() &#123;</span><br><span class="line">        gotoRedeemptionPage()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func gotoRedeemptionPage() &#123;</span><br><span class="line">    <span class="keyword">if</span> let vc = DJRedeemptionVC() &#123;</span><br><span class="line">        <span class="keyword">if</span> DJAppCall.isTopVC(vc) &#123;</span><br><span class="line">            DJAppCall.getTopvc().navigationController?.popViewController(animated: <span class="literal">false</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        DJAppCall.showViewController(vc)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func canShowViewController() -&gt; Bool &#123;</span><br><span class="line">    let homeMianVC = MainTabViewController.sharedInstance</span><br><span class="line">    <span class="keyword">if</span> let appDelegate = <span class="built_in">UIApplication</span>.shared.delegate as? AppDelegate&#123;</span><br><span class="line">        <span class="keyword">if</span> appDelegate.window.rootViewController == homeMianVC &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (<span class="built_in">BOOL</span>)isTopVC:(<span class="built_in">UIViewController</span> *)viewController</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UIWindow</span> *window = [[[<span class="built_in">UIApplication</span> sharedApplication] delegate] window];</span><br><span class="line">    <span class="built_in">UITabBarController</span> *mainViewController = (<span class="built_in">UITabBarController</span> *)window.rootViewController;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ([mainViewController.selectedViewController isKindOfClass:[<span class="built_in">UINavigationController</span> <span class="keyword">class</span>]])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">UINavigationController</span> *nvc = (<span class="built_in">UINavigationController</span> *)mainViewController.selectedViewController;</span><br><span class="line">        <span class="keyword">if</span> ([nvc.topViewController isKindOfClass:viewController.class])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (<span class="built_in">UIViewController</span> *)getTopvc</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UIWindow</span> *window = [[[<span class="built_in">UIApplication</span> sharedApplication] delegate] window];</span><br><span class="line">    <span class="built_in">UITabBarController</span> *mainViewController = (<span class="built_in">UITabBarController</span> *)window.rootViewController;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ([mainViewController.selectedViewController isKindOfClass:[<span class="built_in">UINavigationController</span> <span class="keyword">class</span>]])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">UINavigationController</span> *nvc = (<span class="built_in">UINavigationController</span> *)mainViewController.selectedViewController;</span><br><span class="line">        <span class="keyword">return</span> nvc.topViewController;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+ (<span class="keyword">void</span>)showViewController:(<span class="built_in">UIViewController</span> *)viewController</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UIWindow</span> *window = [[[<span class="built_in">UIApplication</span> sharedApplication] delegate] window];</span><br><span class="line">    <span class="built_in">UITabBarController</span> *mainViewController = (<span class="built_in">UITabBarController</span> *)window.rootViewController;</span><br><span class="line">    [mainViewController dismissViewControllerAnimated:<span class="literal">NO</span> completion:<span class="literal">nil</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">UIViewController</span> *vc <span class="keyword">in</span> mainViewController.viewControllers) &#123;</span><br><span class="line">        [vc dismissViewControllerAnimated:<span class="literal">NO</span> completion:<span class="literal">nil</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ([mainViewController.selectedViewController isKindOfClass:[<span class="built_in">UINavigationController</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        viewController.hidesBottomBarWhenPushed = <span class="literal">true</span>;</span><br><span class="line">        [(<span class="built_in">UINavigationController</span> *)mainViewController.selectedViewController pushViewController:viewController animated:<span class="literal">YES</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Thats it!<br>I hope this may be useful for you!</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/01/20/RedemptionProject/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/20/RedemptionProject/" itemprop="url">Redemption Server API</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-20T20:46:25+08:00">
                2019-01-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Deja/" itemprop="url" rel="index">
                    <span itemprop="name">Deja</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/20/RedemptionProject/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/01/20/RedemptionProject/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Redemption-Server-API"><a href="#Redemption-Server-API" class="headerlink" title="Redemption Server API"></a>Redemption Server API</h2><h3 id="API-Redemption-List"><a href="#API-Redemption-List" class="headerlink" title="API: Redemption List"></a>API: Redemption List</h3><h4 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h4><p>Redemption页面的CollectionView的网络数据请求List.</p>
<h4 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h4><p>GET: /shop/redeemption_list</p>
<h4 id="Query-Parameters"><a href="#Query-Parameters" class="headerlink" title="Query Parameters"></a>Query Parameters</h4><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>page</td>
<td>Int</td>
<td>页码</td>
</tr>
<tr>
<td>pageSize</td>
<td>Int</td>
<td>一页最多显示的data item</td>
</tr>
</tbody>
</table>
<h4 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h4><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>last</td>
<td>Bool</td>
<td>是否为最后一页</td>
</tr>
<tr>
<td>status</td>
<td>Bool</td>
<td>true: jump to detail page false: jump to 库存不足页面.</td>
</tr>
<tr>
<td>shopItems</td>
<td>[DJShopItem]</td>
<td>商品类型</td>
</tr>
</tbody>
</table>
<h3 id="API：Redemption-detail-Page"><a href="#API：Redemption-detail-Page" class="headerlink" title="API：Redemption detail Page"></a>API：Redemption detail Page</h3><h4 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h4><p>Redemption Page‘s shop detail page</p>
<h4 id="URL-1"><a href="#URL-1" class="headerlink" title="URL"></a>URL</h4><p>GET /redeemption_shop_item/{shopItemId}/shop_item_group_id/{shopItemGroupId}</p>
<p>GET: shop/redeemption_shop_item/%@/shop_item_group_id/%@”</p>
<h4 id="Query-Parameters-1"><a href="#Query-Parameters-1" class="headerlink" title="Query Parameters"></a>Query Parameters</h4><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>shopItemId</td>
<td>Int</td>
<td>商品Id</td>
</tr>
<tr>
<td>shopItemGroupId</td>
<td>String</td>
<td>品牌Id</td>
</tr>
</tbody>
</table>
<h4 id="Response-1"><a href="#Response-1" class="headerlink" title="Response"></a>Response</h4><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>shopItems</td>
<td>[DJShopItem]</td>
<td>商品类型数组</td>
</tr>
<tr>
<td>isOutOfStock</td>
<td>Bool</td>
<td>库存不足</td>
</tr>
<tr>
<td>isOcbProduct</td>
<td>Bool</td>
<td>Obc商品</td>
</tr>
</tbody>
</table>
<h3 id="API：Redemption-order-Page"><a href="#API：Redemption-order-Page" class="headerlink" title="API：Redemption order Page"></a>API：Redemption order Page</h3><h4 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h4><p>Redemption详情页面点击购买，字段跳转到订单页面，订单页面数据网络接口</p>
<h4 id="URL-2"><a href="#URL-2" class="headerlink" title="URL"></a>URL</h4><p>POST: /redeem/preview</p>
<h4 id="Query-Parameters-2"><a href="#Query-Parameters-2" class="headerlink" title="Query Parameters"></a>Query Parameters</h4><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>inventoryItemId</td>
<td>Int</td>
<td>库存ID</td>
</tr>
<tr>
<td>productId</td>
<td>Int</td>
<td>产品ID</td>
</tr>
<tr>
<td>productGroupId</td>
<td>String</td>
<td>产品品牌ID</td>
</tr>
<tr>
<td>size</td>
<td>String</td>
<td>尺寸</td>
</tr>
<tr>
<td>quantity</td>
<td>Int</td>
<td>数量</td>
</tr>
<tr>
<td>productName</td>
<td>String</td>
<td>产品名称</td>
</tr>
</tbody>
</table>
<h4 id="Response-2"><a href="#Response-2" class="headerlink" title="Response"></a>Response</h4><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>DJCheckoutModel</td>
<td>订单数据模型</td>
</tr>
</tbody>
</table>
<h3 id="API：Redemption订单确认支付接口"><a href="#API：Redemption订单确认支付接口" class="headerlink" title="API：Redemption订单确认支付接口"></a>API：Redemption订单确认支付接口</h3><h4 id="Description-3"><a href="#Description-3" class="headerlink" title="Description"></a>Description</h4><p>点击Redemption活动的订单页面确认支付，将要请求这个网络接口</p>
<h4 id="URL-3"><a href="#URL-3" class="headerlink" title="URL"></a>URL</h4><p>POST /redeem/create_and_pay</p>
<h4 id="Query-Parameters-3"><a href="#Query-Parameters-3" class="headerlink" title="Query Parameters"></a>Query Parameters</h4><p>checkoutModel : DJCheckoutModel</p>
<h4 id="Response-3"><a href="#Response-3" class="headerlink" title="Response"></a>Response</h4><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>DJCheckoutCreatandPayModel</td>
<td>订单支付数据模型</td>
</tr>
</tbody>
</table>
<h3 id="Data-Model"><a href="#Data-Model" class="headerlink" title="Data Model"></a>Data Model</h3><h4 id="DJShopItem-商品类型"><a href="#DJShopItem-商品类型" class="headerlink" title="DJShopItem 商品类型"></a>DJShopItem 商品类型</h4><p>cashback: Int<br>color: String<br>currency : String | 货币类型<br>currentPrice: Int<br>image: DJShopItemImage<br>images: [DJShopItemImage]<br>originalPrice: Int<br>recommendReason: String<br>shopItemGroupId: String<br>shopId: String<br>shopItemId: Int<br>shopItemName: String | 商品名称<br>shopName: String | 品牌名称<br>cashbackDescription: String<br>buttonDescription: String<br>specialAttribute : [Int]</p>
<h4 id="DJShopItemImage"><a href="#DJShopItemImage" class="headerlink" title="DJShopItemImage"></a>DJShopItemImage</h4><p>height: CGFloat<br>width: CGFloat<br>imageUrl: String</p>
<h4 id="DJCheckoutModel"><a href="#DJCheckoutModel" class="headerlink" title="DJCheckoutModel"></a>DJCheckoutModel</h4><p>shippingAddress : DJAddressInfo<br>orderItemsInShopList = <a href>DJOrderItemsInShopInfo</a><br>paymentPriceDetailInfo = DJPaymentPriceDetailInfo()<br>isOverallOutOfStock : Bool = false<br>outOfStockMessage : String</p>
<h4 id="DJAddressInfo"><a href="#DJAddressInfo" class="headerlink" title="DJAddressInfo"></a>DJAddressInfo</h4><p>id: Int<br>firstName: String<br>lastName: String<br>postalCode: String<br>floorUnitNumber: String<br>phone : String<br>isDefault: Bool = false<br>searchval: String<br>blockNumber: String<br>roadName: String<br>building: String<br>address: String<br>fullAddress : String = “”<br>country: String<br>formatAddress : String</p>
<h4 id="DJOrderItemsInShopInfo"><a href="#DJOrderItemsInShopInfo" class="headerlink" title="DJOrderItemsInShopInfo"></a>DJOrderItemsInShopInfo</h4><p>currency : String<br>shopId : String<br>shopName : String<br>itemCount : Int<br>orderSubtotal : Int<br>selectedShippingMethodInfo = DJShippingMethodInfo()<br>availableShippingMethodInfo = <a href>DJShippingMethodInfo</a><br>shopItemList = <a href>DJOrderShopItem</a></p>
<h4 id="DJPaymentPriceDetailInfo"><a href="#DJPaymentPriceDetailInfo" class="headerlink" title="DJPaymentPriceDetailInfo"></a>DJPaymentPriceDetailInfo</h4><p>cashbackDiscount :Int           | 使用的返现金额<br>cashbackDiscountMaximum :Int    | 最多可以使用多少返现<br>cashbackReward :Int             | 可以拿到多少返现<br>currency : String = “”<br>orderCount : Int                | 商品总数<br>orderGroupSubtotal :Int         | 商品加物流的总费用 ，未减Cashback和Promotion<br>orderGroupTotal :Int            | 使用过各种折扣后需要 Card 付的实际金额<br>promotionDiscount :Int          | Deja Promotion 的折扣金额<br>cashbackPayRateDescription : String</p>
<h4 id="DJShippingMethodInfo"><a href="#DJShippingMethodInfo" class="headerlink" title="DJShippingMethodInfo"></a>DJShippingMethodInfo</h4><p>currency : String<br>shippingMethod = DJShippingMethod()<br>shippingFeeSubtotal : Int</p>
<h4 id="DJShippingMethod"><a href="#DJShippingMethod" class="headerlink" title="DJShippingMethod"></a>DJShippingMethod</h4><p>shippingMethodId : Int<br>shippingMethodName : String<br>shippingMethod : String<br>shippingFee : Int<br>currency : String<br>estimatedDeliveryTimeDescription : String<br>courierUrl : String</p>
<h4 id="DJCheckoutCreatandPayModel"><a href="#DJCheckoutCreatandPayModel" class="headerlink" title="DJCheckoutCreatandPayModel"></a>DJCheckoutCreatandPayModel</h4><p>checkTitle : String            | the title of payment pop-up window<br>checkSubTitle : String         | reserved field<br>checkDescription : String      | the description of payment pop-up window<br>checkBtnName : String          | the name of button, for example：Got it<br>checkType : Int                | checkType, return : 20 success , 10 failure</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/01/19/201901181009/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/19/201901181009/" itemprop="url">Work Style</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-19T20:46:25+08:00">
                2019-01-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Idea/" itemprop="url" rel="index">
                    <span itemprop="name">Idea</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/19/201901181009/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/01/19/201901181009/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="极简版ZTD"><a href="#极简版ZTD" class="headerlink" title="极简版ZTD"></a>极简版ZTD</h2><ol>
<li>用笔记本记下你的任何想法，让事情从头脑中整理出来，不再遗忘。</li>
<li>当你到了办公室或家里，把这些新任务加入到待做事项主清单。这个清单可以在笔记本上创建。</li>
<li>在每天的开端，回顾清单，写下当天你想完成的1~3件要事。这就是你整个的规划系统，不需要其他东西。</li>
<li>尽早完成要事。在处理每项任务时，消除所有干扰，只专注于它，不要同时处理多个任务。完成一项要事之后，再接着处理下一项。</li>
<li>如果完成了要事，查看主清单上第二重要的任务是什么。确定好之后，按照步骤4进行处理。若有必要，再次重复这个流程。</li>
</ol>
<h2 id="每日基础事项"><a href="#每日基础事项" class="headerlink" title="每日基础事项"></a>每日基础事项</h2><ol>
<li>每天来公司列出一天的工作事项，完成并打钩</li>
<li>两分钟内的事情立即解决，超过两分钟放便签上</li>
<li>重复的事情要想办法固化</li>
<li>下班前写下一天的工作总结</li>
</ol>
<h2 id="每日基本原则"><a href="#每日基本原则" class="headerlink" title="每日基本原则"></a>每日基本原则</h2><blockquote>
<p>就像那天给某人的鼓励：要一直坚持做对的事情。<br>“我们坚持做一件事情，不是因为这样做会有效果，而是因为坚信这样做是对的。”<br>Draw a picture. Dream it, make it a belief, then make it come true.</p>
</blockquote>
<h3 id="每日事项发出"><a href="#每日事项发出" class="headerlink" title="每日事项发出"></a>每日事项发出</h3><p>靠谱才能让别人信任你，“凡事有交代，件件有着落，事事有回音。你不一定需要有多大的能力，但你一定要让协作伙伴知道你的能力边界和行动速度。</p>
<h3 id="在公司内只做项目相关事情"><a href="#在公司内只做项目相关事情" class="headerlink" title="在公司内只做项目相关事情"></a>在公司内只做项目相关事情</h3><p>把项目作为自己的一部分，为自己的代码负责。</p>
<h3 id="培养合作意识"><a href="#培养合作意识" class="headerlink" title="培养合作意识"></a>培养合作意识</h3><p>保障性，就是你有没有能力协同资源，打一场战役。</p>
<h3 id="对所在场景形成闭环，了解自己的点线面体。"><a href="#对所在场景形成闭环，了解自己的点线面体。" class="headerlink" title="对所在场景形成闭环，了解自己的点线面体。"></a>对所在场景形成闭环，了解自己的点线面体。</h3><p>能够跨越时间空间，跨越组织的边界，对各种趋势进行预料，并作出预案，进行系统性思考。利用高维打低维的思考能力。</p>
<h3 id="体现自己的个人品牌"><a href="#体现自己的个人品牌" class="headerlink" title="体现自己的个人品牌"></a>体现自己的个人品牌</h3><p>你不仅能干活，把活干成，还能让社会上所有的人能看见、能评估你干的活。你不仅能主动组织协作，还能让不在你视线里的资源主动找上门来跟你合作。</p>
<h3 id="利用SOP的方法将复杂事情变简单，使周围人放心"><a href="#利用SOP的方法将复杂事情变简单，使周围人放心" class="headerlink" title="利用SOP的方法将复杂事情变简单，使周围人放心"></a>利用SOP的方法将复杂事情变简单，使周围人放心</h3><p>将某一事件的标准操作步骤和要求以统一的格式描述出来，用来指导和规范日常的工作。有能力把一个复杂系统，包括各种不确定性，封装成一个简单的工作界面。这样才能使周围人放心。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/01/08/DejaPacking/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/08/DejaPacking/" itemprop="url">Deja Packing</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-08T22:50:02+08:00">
                2019-01-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Deja/" itemprop="url" rel="index">
                    <span itemprop="name">Deja</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/08/DejaPacking/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/01/08/DejaPacking/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Auto-packing"><a href="#Auto-packing" class="headerlink" title="Auto packing"></a>Auto packing</h3><h4 id="Merge-brunch-to-the-master"><a href="#Merge-brunch-to-the-master" class="headerlink" title="Merge brunch to the master"></a>Merge brunch to the master</h4><p><img src="/images/15476298540557.jpg" alt></p>
<h4 id="Login-in-jenkins"><a href="#Login-in-jenkins" class="headerlink" title="Login in jenkins"></a>Login in jenkins</h4><p>Address: <a href="http://172.28.10.64:8080/job/RN_IOS_DT/" target="_blank" rel="noopener">http://172.28.10.64:8080/job/RN_IOS_DT/</a></p>
<p><img src="/images/15476254017511.jpg" alt></p>
<h4 id="Status-is-free"><a href="#Status-is-free" class="headerlink" title="Status is free"></a>Status is free</h4><p><img src="/images/15476254655838.jpg" alt></p>
<h4 id="Choose-RN-IOS-DT"><a href="#Choose-RN-IOS-DT" class="headerlink" title="Choose RN_IOS_DT"></a>Choose RN_IOS_DT</h4><p><img src="/images/15476255019800.jpg" alt></p>
<h4 id="Click-config-button"><a href="#Click-config-button" class="headerlink" title="Click config button"></a>Click config button</h4><p><img src="/images/15476302681541.jpg" alt></p>
<h4 id="check-“-Branches-to-build”"><a href="#check-“-Branches-to-build”" class="headerlink" title="check “    Branches to build”"></a>check “    Branches to build”</h4><p><img src="/images/15476303213823.jpg" alt></p>
<p>Branch Specifier (blank for ‘any’) : */master  And Save it</p>
<h4 id="build-it-and-wait-final-status"><a href="#build-it-and-wait-final-status" class="headerlink" title="build it and wait final status"></a>build it and wait final status</h4><p><img src="/images/15476310854899.jpg" alt></p>
<h4 id="If-failure-please-check-log"><a href="#If-failure-please-check-log" class="headerlink" title="If failure , please check log."></a>If failure , please check log.</h4><p><img src="/images/15476311703819.jpg" alt></p>
<h3 id="Manual-packing"><a href="#Manual-packing" class="headerlink" title="Manual packing"></a>Manual packing</h3><h4 id="Xcode-archive"><a href="#Xcode-archive" class="headerlink" title="Xcode archive"></a>Xcode archive</h4><p>Edit Scheme</p>
<p><img src="/images/15476321982741.jpg" alt></p>
<h4 id="Choose-environment-archive"><a href="#Choose-environment-archive" class="headerlink" title="Choose environment archive"></a>Choose environment archive</h4><ol>
<li>DT 环境，证书为：TestDev | TestDis 顾名思义，开发以及测试的环境</li>
<li>DP 环境，证书为：ProductDis | ProductDev 接近真实环境，产品\市场\商务\CTO可以安装DP环境查看</li>
<li>AppStore 正式发布环境</li>
<li>Dis | Dev  Dis 指打包发布的证书，Dev Xcode用连接线调试真机运行的证书</li>
</ol>
<p><img src="/images/15476322420307.jpg" alt></p>
<h4 id="Download-HockeyApp-and-Upload-New-Build"><a href="#Download-HockeyApp-and-Upload-New-Build" class="headerlink" title="Download HockeyApp and Upload New Build"></a>Download HockeyApp and Upload New Build</h4><p><img src="/images/15476313116787.jpg" alt></p>
<h4 id="Add-Release-Notes"><a href="#Add-Release-Notes" class="headerlink" title="Add Release Notes"></a>Add Release Notes</h4><p><img src="/images/15476315416367.jpg" alt></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2019/01/08/UICollectionVIewJianBianMD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/08/UICollectionVIewJianBianMD/" itemprop="url">UICollectionVIew的渐变背景</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-08T22:50:02+08:00">
                2019-01-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/08/UICollectionVIewJianBianMD/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/01/08/UICollectionVIewJianBianMD/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Demand"><a href="#Demand" class="headerlink" title="Demand"></a>Demand</h2><p>如图所示，UICollectionVIew的背景渐变，滑动的时候，渐变背景也需要跟着滑动。渐变背景在UICollectionView layer 和 Cell之间存在。</p>
<p><img src="/images/15477101810038.jpg" alt></p>
<h2 id="implementation"><a href="#implementation" class="headerlink" title="implementation"></a>implementation</h2><h3 id="增加新的渐变Layer"><a href="#增加新的渐变Layer" class="headerlink" title="增加新的渐变Layer"></a>增加新的渐变Layer</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> gradientLayer : <span class="type">CAGradientLayer</span> = &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="type">TColor</span> : <span class="type">UIColor</span> = <span class="type">UIColor</span>(fromHexString: <span class="string">"FF8E8A"</span>)</span><br><span class="line">    <span class="keyword">let</span> <span class="type">BColor</span> = <span class="type">UIColor</span>.white</span><br><span class="line">    <span class="keyword">let</span> gradientColors: [<span class="type">CGColor</span>] = [<span class="type">TColor</span>.cgColor, <span class="type">BColor</span>.cgColor]</span><br><span class="line">    <span class="keyword">let</span> gradientLayer: <span class="type">CAGradientLayer</span> = <span class="type">CAGradientLayer</span>()</span><br><span class="line">    gradientLayer.colors = gradientColors</span><br><span class="line">    gradientLayer.startPoint = <span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="number">0</span>)</span><br><span class="line">    gradientLayer.endPoint = <span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="number">1</span>)</span><br><span class="line">    gradientLayer.frame = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="type">ScreenWidth</span>, height: <span class="type">ScreenHeight</span>)</span><br><span class="line">    <span class="keyword">return</span> gradientLayer</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>
<h3 id="添加UICollectionView"><a href="#添加UICollectionView" class="headerlink" title="添加UICollectionView"></a>添加UICollectionView</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> flowLayout: <span class="type">UICollectionViewFlowLayout</span> = &#123;</span><br><span class="line">    <span class="keyword">let</span> flowLayout = <span class="type">UICollectionViewFlowLayout</span>()</span><br><span class="line">    flowLayout.scrollDirection = .vertical</span><br><span class="line">    flowLayout.minimumInteritemSpacing = <span class="number">15.0</span></span><br><span class="line">    flowLayout.minimumLineSpacing = <span class="number">15.0</span></span><br><span class="line">    <span class="keyword">return</span> flowLayout</span><br><span class="line">&#125;()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> collectionView: <span class="type">UICollectionView</span> = &#123;</span><br><span class="line">    <span class="keyword">let</span> collectionView = <span class="type">UICollectionView</span>(frame: .zero, collectionViewLayout: flowLayout)</span><br><span class="line">    collectionView.backgroundColor = <span class="type">UIColor</span>.clear</span><br><span class="line">    collectionView.delegate = <span class="keyword">self</span></span><br><span class="line">    collectionView.dataSource = <span class="keyword">self</span></span><br><span class="line">    collectionView.scrollsToTop = <span class="literal">false</span></span><br><span class="line">    collectionView.showsVerticalScrollIndicator = <span class="literal">false</span></span><br><span class="line">    collectionView.register(<span class="type">DJProductCollectionViewCell</span>.<span class="keyword">self</span>, forCellWithReuseIdentifier: <span class="string">"DJRedeemptionVCstreetSnapCell"</span>)</span><br><span class="line">    collectionView.alwaysBounceVertical = <span class="literal">false</span></span><br><span class="line">    collectionView.bounces = <span class="literal">false</span></span><br><span class="line">    refreshControl = <span class="type">DJRefreshControl</span>(<span class="keyword">in</span>: collectionView)</span><br><span class="line">    refreshControl?.addTarget(<span class="keyword">self</span>, action: #selector(pullRefresh), <span class="keyword">for</span>: .valueChanged)</span><br><span class="line">    <span class="keyword">return</span> collectionView</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>
<h3 id="UICollectionView-Delegate"><a href="#UICollectionView-Delegate" class="headerlink" title="UICollectionView Delegate"></a>UICollectionView Delegate</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">DJRedeemptionVC</span> : <span class="title">UICollectionViewDelegate</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> vc = <span class="type">DJRedeemProductDetailVC</span>() &#123;</span><br><span class="line">            <span class="keyword">if</span> pageResult.<span class="built_in">count</span> &gt; indexPath.row &#123;</span><br><span class="line">                <span class="keyword">let</span> pageResultItem = pageResult[indexPath.row]</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> shopItemId = pageResultItem.shopItemId, <span class="keyword">let</span> shopItemGroupId = pageResultItem.shopItemGroupId &#123;</span><br><span class="line">                    vc.shopItemId = shopItemId <span class="keyword">as</span> <span class="type">NSNumber</span></span><br><span class="line">                    vc.shopItemGroupId = shopItemGroupId</span><br><span class="line">                    <span class="keyword">self</span>.navigationController?.pushViewController(vc, animated: <span class="literal">true</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">DJRedeemptionVC</span> : <span class="title">UICollectionViewDataSource</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, numberOfItemsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pageResult.<span class="built_in">count</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, cellForItemAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UICollectionViewCell</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> cell = collectionView.dequeueReusableCell(withReuseIdentifier: <span class="string">"DJRedeemptionVCstreetSnapCell"</span>, <span class="keyword">for</span>: indexPath) <span class="keyword">as</span>! <span class="type">DJProductCollectionViewCell</span></span><br><span class="line">        <span class="keyword">if</span> pageResult.<span class="built_in">count</span> &gt; indexPath.row &#123;</span><br><span class="line">            <span class="keyword">let</span> pageResultItem = pageResult[indexPath.row]</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> shopItemId = pageResultItem.shopItemId &#123;</span><br><span class="line">                cell.shopItemId = shopItemId</span><br><span class="line">            &#125;</span><br><span class="line">            cell.setImageUrl(pageResultItem.image?.imageUrl)</span><br><span class="line">            cell.setBrandName(pageResultItem.shopName)</span><br><span class="line">            cell.setClothName(pageResultItem.shopItemName)</span><br><span class="line">            cell.setPriceInfo(pageResultItem.currentPrice, uprice: pageResultItem.originalPrice, currency: pageResultItem.currency)</span><br><span class="line">            cell.setRecommendReason(pageResultItem.recommendReason)</span><br><span class="line">            cell.clipsToBounds = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cell</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">DJRedeemptionVC</span> : <span class="title">UICollectionViewDelegateFlowLayout</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAt indexPath: IndexPath)</span></span> -&gt; <span class="type">CGSize</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">DJProductCollectionViewCell</span>.calculateFixedCellSize()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, insetForSectionAt section: Int)</span></span> -&gt; <span class="type">UIEdgeInsets</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">UIEdgeInsets</span>.<span class="keyword">init</span>(top: <span class="number">180</span>, <span class="keyword">left</span>: <span class="number">23</span>, bottom: <span class="number">20</span>, <span class="keyword">right</span>: <span class="number">23</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="最关键的两句话"><a href="#最关键的两句话" class="headerlink" title="最关键的两句话"></a>最关键的两句话</h3><p>collectionView的layer上面插入gradientLayer，位置放在最下面。</p>
<p>之前我写了好多方法都没能成功的把这个layer或者View放在collectionview和cell之间。每次尝试都是新添加的layer或者view依然在cell的上面。</p>
<p>查了一些资料，然后找到一个最适合的方法，只要加一句代码：</p>
<p>Layer.zPosition = -1</p>
<p>layer可以通过设置zPosition属性来固定层级关系，默认是0，设置为-1的话就在最下层，值越大层级的关系就越高。CollectionView本来的layer设置为0,所以将新加入的layer设置为-1即可达到需求的效果。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">override func viewDidLoad() &#123;</span><br><span class="line">    super.viewDidLoad()</span><br><span class="line">    view.backgroundColor = UIColor.white</span><br><span class="line">    view.addSubview(collectionView)</span><br><span class="line">    gradientLayer.zPosition = -1</span><br><span class="line">    collectionView.layer.insertSublayer(gradientLayer, at: 0)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="下拉刷新的判断方法"><a href="#下拉刷新的判断方法" class="headerlink" title="下拉刷新的判断方法"></a>下拉刷新的判断方法</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">DJRedeemptionVC</span> : <span class="title">UIScrollViewDelegate</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">scrollViewDidScroll</span><span class="params">(<span class="number">_</span> scrollView: UIScrollView)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> scrollView.contentSize.height &lt; <span class="type">ScreenHeight</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"scrollView.contentSize.height: \(scrollView.contentSize.height)"</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"scrollView.contentOffset.y: \(scrollView.contentOffset.y)"</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"scrollView.frame.size.height: \(scrollView.frame.size.height)"</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"scrollView.contentInset.bottom: \(scrollView.contentInset.bottom)"</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"scrollView.contentInset.top: \(scrollView.contentInset.top)"</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"left Value : \(scrollView.contentSize.height - scrollView.contentOffset.y)"</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"&lt;=right Value: \(scrollView.frame.size.height - scrollView.contentInset.bottom + scrollView.contentInset.top + 40)"</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> scrollView.contentSize.height - scrollView.contentOffset.y &lt;= scrollView.frame.size.height - scrollView.contentInset.bottom + scrollView.contentInset.top + <span class="number">40</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!isLoadingMore &amp;&amp; redeemptionHomeNetTask.last == <span class="literal">false</span>) &#123;</span><br><span class="line">                isLoadingMore = <span class="literal">true</span></span><br><span class="line">                page += <span class="number">1</span></span><br><span class="line">                getShopDetailListNetTask(page: page)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Thinking-And-Summarized"><a href="#Thinking-And-Summarized" class="headerlink" title="Thinking And Summarized"></a>Thinking And Summarized</h2><p>上面说的是第一种方法，第二种方法是通过CollectionView增加View来进行实现，这个View在CollectionView和Cell之间插入一个渐变的View.当然View上也可以增加其他label以及imageView</p>
<h3 id="增加DJPassThroughView的类如下："><a href="#增加DJPassThroughView的类如下：" class="headerlink" title="增加DJPassThroughView的类如下："></a>增加DJPassThroughView的类如下：</h3><p>DJPassThroughView创建这个View是为了可以将这个View插入到CollectionView的cell上面，且不会挡住cell的点击事件</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  Created by levi duan on 2019/1/13.</span></span><br><span class="line"><span class="comment">//  Copyright © 2019 Mozat. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DJPassThroughView</span>: <span class="title">UIView</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">point</span><span class="params">(inside point: CGPoint, with event: UIEvent?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> subview <span class="keyword">in</span> subviews &#123;</span><br><span class="line">            <span class="keyword">if</span> !subview.isHidden &amp;&amp; subview.isUserInteractionEnabled &amp;&amp; subview.point(inside: convert(point, to: subview), with: event) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="初始化DJPassThroughView的变量"><a href="#初始化DJPassThroughView的变量" class="headerlink" title="初始化DJPassThroughView的变量"></a>初始化DJPassThroughView的变量</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">lazy</span> <span class="keyword">var</span> passThroughView : <span class="type">DJPassThroughView</span> = &#123;</span><br><span class="line">    <span class="keyword">let</span> passThroughView = <span class="type">DJPassThroughView</span>(frame: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="type">ScreenWidth</span>, height: <span class="number">180</span>+<span class="number">422</span>))</span><br><span class="line">    <span class="keyword">let</span> <span class="type">TColor</span> : <span class="type">UIColor</span> = <span class="type">UIColor</span>(fromHexString: <span class="string">"FF8E8A"</span>)</span><br><span class="line">    <span class="keyword">let</span> <span class="type">BColor</span> = <span class="type">UIColor</span>.white</span><br><span class="line">    <span class="keyword">let</span> gradientColors: [<span class="type">CGColor</span>] = [<span class="type">TColor</span>.cgColor, <span class="type">BColor</span>.cgColor]</span><br><span class="line">    <span class="comment">//创建并实例化</span></span><br><span class="line">    <span class="keyword">let</span> gradientLayer: <span class="type">CAGradientLayer</span> = <span class="type">CAGradientLayer</span>()</span><br><span class="line">    gradientLayer.colors = gradientColors</span><br><span class="line">    <span class="comment">//(这里的起始和终止位置就是按照坐标系,四个角分别是左上(0,0),左下(0,1),右上(1,0),右下(1,1))</span></span><br><span class="line">    <span class="comment">//渲染的起始位置</span></span><br><span class="line">    gradientLayer.startPoint = <span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="number">0</span>)</span><br><span class="line">    <span class="comment">//渲染的终止位置</span></span><br><span class="line">    gradientLayer.endPoint = <span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="number">1</span>)</span><br><span class="line">    <span class="comment">//设置frame和插入view的layer</span></span><br><span class="line">    gradientLayer.frame = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">180</span>, width: <span class="type">ScreenWidth</span>, height: <span class="number">422</span>)</span><br><span class="line">    passThroughView.layer.insertSublayer(gradientLayer, at: <span class="number">0</span>)</span><br><span class="line">    passThroughView.isUserInteractionEnabled = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> passThroughView</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>
<h3 id="最关键的两句话-1"><a href="#最关键的两句话-1" class="headerlink" title="最关键的两句话"></a>最关键的两句话</h3><p>放在Cell下面CollectionView上面可以加上这句话:</p>
<p>passThroughView.layer.zPosition = -1;</p>
<p>如果放在Cell上面，不影响点击Cell，可以不加上面这句话</p>
<p>collectionView.addSubview(passThroughView)</p>
<p>到这，需求就结束啦</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2018/12/28/2020-01-08-17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/28/2020-01-08-17/" itemprop="url">iOS中点击按钮跳转微信小程序</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-28T22:53:02+08:00">
                2018-12-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/28/2020-01-08-17/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/12/28/2020-01-08-17/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><p>在iOS的UIWebView界面，点击button，直接打开微信跳转到微信小程序。</p>
<h3 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h3><ol>
<li>接入微信SDK,pod中增加下面一句话</li>
</ol>
<p>pod ‘WechatOpenSDK’</p>
<ol start="2">
<li>AppDelegate文件导入&lt;WechatOpenSDK/WXApi.h&gt;并实现代理 <wxapidelegate></wxapidelegate></li>
</ol>
<p>初始化你的微信WXAPI，增加代理的时候，会报警告，”Implementing deprecated method”,由于微信没有更新API，就只能用之前版本废了的方法，所以暂时就忽略警告吧，如果微信改了的话，请及时通知我。</p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line">    [WXApi registerApp:<span class="string">@"wxf691476627360000"</span>];<span class="comment">//ID为你申请的微信开放ID</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application handleOpenURL:(<span class="keyword">nonnull</span> <span class="built_in">NSURL</span> *)url</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> [WXApi handleOpenURL:url delegate:<span class="keyword">self</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)app openURL:(<span class="built_in">NSURL</span> *)url sourceApplication:(<span class="keyword">nullable</span> <span class="built_in">NSString</span> *)sourceApplication annotation:(<span class="keyword">nonnull</span> <span class="keyword">id</span>)annotation</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> [WXApi handleOpenURL:url delegate:<span class="keyword">self</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>) onReq:(BaseReq*)req</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"req : %@"</span>, req);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>) onResp:(BaseResp*)resp</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"req : %@"</span>, resp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>WKWebView代理</li>
</ol>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span>*)webView decidePolicyForNavigationAction:(<span class="built_in">WKNavigationAction</span>*)navigationAction decisionHandler:(<span class="keyword">void</span>(^)(<span class="built_in">WKNavigationActionPolicy</span>))decisionHandler&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">WKNavigationActionPolicy</span> policy = <span class="built_in">WKNavigationActionPolicyAllow</span>;</span><br><span class="line">    <span class="comment">// 之前是打开直接跳转APPSOTRE，所以要WKWebView要加上这句话，才能贴砖到APPSTORE商店</span></span><br><span class="line">    <span class="keyword">if</span>([[navigationAction.request.URL host] isEqualToString:<span class="string">@"itunes.apple.com"</span>] &amp;&amp; [[<span class="built_in">UIApplication</span> sharedApplication] openURL:navigationAction.request.URL])&#123;</span><br><span class="line">        policy = <span class="built_in">WKNavigationActionPolicyCancel</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    decisionHandler(policy);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)userContentController:(<span class="built_in">WKUserContentController</span> *)userContentController didReceiveScriptMessage:(<span class="built_in">WKScriptMessage</span> *)message</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ([message.name isEqualToString:<span class="string">@"OpenWxMinFunc"</span>]) &#123;</span><br><span class="line">        [_webView loadRequest:[<span class="built_in">NSURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:message.body]]];</span><br><span class="line">        [Tools enter_weixin_miniProgramid:@“填写申请的小程序名称” path:@“填写路径”];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView didFinishNavigation:(<span class="keyword">null_unspecified</span> <span class="built_in">WKNavigation</span> *)navigation</span><br><span class="line">&#123;</span><br><span class="line">    [_hud hideAnimated:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView didFailNavigation:(<span class="keyword">null_unspecified</span> <span class="built_in">WKNavigation</span> *)navigation withError:(<span class="built_in">NSError</span> *)error</span><br><span class="line">&#123;</span><br><span class="line">    [_hud hideAnimated:<span class="literal">YES</span>];</span><br><span class="line">    [<span class="keyword">self</span> goBack];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)gobackVoid</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">self</span> goBack];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)goBack</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">id</span> vc = [<span class="keyword">self</span>.navigationController popViewControllerAnimated:<span class="literal">YES</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">nil</span> == vc) &#123;</span><br><span class="line">        [<span class="keyword">self</span> dismissViewControllerAnimated:<span class="literal">YES</span> completion:^&#123;</span><br><span class="line">            <span class="comment">// 无事件处理</span></span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">WKWebView</span> *)webView</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!_webView) &#123;</span><br><span class="line">        <span class="built_in">WKWebViewConfiguration</span> *config = [[<span class="built_in">WKWebViewConfiguration</span> alloc]init];</span><br><span class="line">        config.preferences = [[<span class="built_in">WKPreferences</span> alloc]init];</span><br><span class="line">        config.preferences.minimumFontSize = <span class="number">10</span>;</span><br><span class="line">        config.preferences.javaScriptEnabled = <span class="literal">YES</span>;</span><br><span class="line">        config.preferences.javaScriptCanOpenWindowsAutomatically = <span class="literal">NO</span>;</span><br><span class="line">        config.userContentController = [[<span class="built_in">WKUserContentController</span> alloc] init];</span><br><span class="line">        config.processPool = [[<span class="built_in">WKProcessPool</span> alloc] init];</span><br><span class="line">        [config.userContentController addScriptMessageHandler:<span class="keyword">self</span> name:<span class="string">@"OpenWxMinFunc"</span>];</span><br><span class="line">        </span><br><span class="line">        _webView = [[<span class="built_in">WKWebView</span> alloc] initWithFrame:<span class="built_in">CGRectZero</span> configuration:config];</span><br><span class="line">        _webView.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">        _webView.scrollView.bounces = <span class="literal">YES</span>;</span><br><span class="line">        <span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:<span class="string">@"https://dddd.net/ddd/song_app_list.html"</span>];<span class="comment">// 填写你的网址URL</span></span><br><span class="line">        [_webView loadRequest:[<span class="built_in">NSURLRequest</span> requestWithURL:url]];</span><br><span class="line">        _webView.navigationDelegate = <span class="keyword">self</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _webView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>微信小程序跳转方法：</li>
</ol>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)enter_weixin_miniProgramid:(<span class="built_in">NSString</span> *)userName path:(<span class="built_in">NSString</span> *)path</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (![WXApi isWXAppInstalled]) &#123;</span><br><span class="line">        [<span class="keyword">self</span> showMessage:<span class="string">@"您未安装微信，请先安装微信"</span>];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    WXLaunchMiniProgramReq *launchMini = [WXLaunchMiniProgramReq object];</span><br><span class="line">    launchMini.userName = userName;</span><br><span class="line">    launchMini.path = path;</span><br><span class="line">    launchMini.miniProgramType = WXMiniProgramTypeRelease;</span><br><span class="line">    [WXApi sendReq:launchMini];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>修改info.plist，增加一条：</li>
</ol>
<p><key>LSApplicationQueriesSchemes</key></p>
<array><br> <string>weixin</string><br> <string>wechat</string><br></array>

<p>效果如图:</p>
<p><img src="https://upload-images.jianshu.io/upload_images/11043052-98f791916503430f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="15459766640174.jpg"></p>
<h3 id="思考与总结："><a href="#思考与总结：" class="headerlink" title="思考与总结："></a>思考与总结：</h3><ol>
<li>这是App拉起小程序，请问如果用小程序拉起APP？是通过onResp回调么？</li>
<li>[config.userContentController addScriptMessageHandler:self name:@”OpenWxMinFunc”]，在WKWebView要配置这一条，才能和H5前端联调，请问OpenWxMinFunc这个字段是干嘛用的？</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2018/12/28/2020-01-08-18/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/28/2020-01-08-18/" itemprop="url">Ionic环境搭建</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-28T22:53:02+08:00">
                2018-12-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/28/2020-01-08-18/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/12/28/2020-01-08-18/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="安装brew"><a href="#安装brew" class="headerlink" title="安装brew"></a>安装brew</h2><p>1.命令行输入<br>/usr/bin/ruby -e “$(curl -fsSL <a href="https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;" target="_blank" rel="noopener">https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</a> </p>
<ol start="2">
<li>brew -v 显示版本号</li>
</ol>
<h2 id="安装node-js"><a href="#安装node-js" class="headerlink" title="安装node.js"></a>安装node.js</h2><p>命令： brew install node</p>
<p>ps：如果之前曾经安装过但是版本并不是最新版本，请升级版本，步骤如下：</p>
<ol>
<li><p>看node版本，没安装的请先安装；<br>node -v<br>sudo npm cache clean -f  </p>
</li>
<li><p>安装node版本管理工具’n’;<br>sudo npm install n -g</p>
</li>
<li><p>使用版本管理工具安装指定node或者升级到最新node版本；<br>sudo n stable  （安装node最新版本）<br>sudo n 8.9.4 （安装node指定版本8.9.4）</p>
</li>
<li><p>使用node -v查看node版本，如果版本号改变为你想要的则升级成功。</p>
</li>
</ol>
<h2 id="安装-ionic"><a href="#安装-ionic" class="headerlink" title="安装 ionic"></a>安装 ionic</h2><ol>
<li><p>安装全局的ionic CLI<br>npm install -g ionic</p>
</li>
<li><p>检测ionic是否安装成功：<br>ionic -v</p>
</li>
<li><p>创建ionic项目<br>通过ionic cli命令创建ionic项目：<br>ionic start myApp tabs –type=angular<br>（目前ionic4是beta版，需要加上 –type=angular才能创建基于angular的项目，后面等发布正式版本，就不需要了）</p>
</li>
<li><p>运行ionic项目： ionic serve –lab</p>
</li>
</ol>
<p>可能遇到失败原因：</p>
<ol>
<li>Error: Node Sass does not yet support your current environment: OS X 64-bit with Unsupported runtime (67)</li>
</ol>
<h2 id="安装-cordova"><a href="#安装-cordova" class="headerlink" title="安装 cordova"></a>安装 cordova</h2><ol>
<li>利用npm命令安装cordova<br> sudo npm install -g cordova</li>
<li>利用cordova创建项目<br> cordova create HelloWorld</li>
<li>增加iOS开发平台<br> cordova playform add ios</li>
<li>通过iOS设备进行运行<br> cordova run ios</li>
<li>利用模拟器进行运行<br> cordova emulate ios –target iPhone-6s</li>
<li>通过模拟器运行ionic<br> ionic cordova emulate ios – –buildFlag=”-UseModernBuildSystem=0” –verbose</li>
</ol>
<h2 id="安装UI工具-VSCODE"><a href="#安装UI工具-VSCODE" class="headerlink" title="安装UI工具 VSCODE"></a>安装UI工具 VSCODE</h2><p>直接在官网安装，没有太多需要注意的地方。</p>
<p>至此环境已经搭建好了，可能遇到的问题：</p>
<h2 id="安装出现的问题"><a href="#安装出现的问题" class="headerlink" title="安装出现的问题"></a>安装出现的问题</h2><h4 id="问题：-bash-cordova-command-not-found"><a href="#问题：-bash-cordova-command-not-found" class="headerlink" title="问题：-bash: cordova: command not found"></a>问题：-bash: cordova: command not found</h4><p>解决方案：</p>
<ol>
<li>export PATH=$PATH:/usr/local/share/npm/bin</li>
<li>npm config get prefix</li>
<li>echo “$PATH”</li>
<li>npm config set prefix /usr/local</li>
<li>sudo npm install -g cordova</li>
</ol>
<h4 id="问题：无法安装cordova"><a href="#问题：无法安装cordova" class="headerlink" title="问题：无法安装cordova"></a>问题：无法安装cordova</h4><p>解决方案：</p>
<ol>
<li>sudo npm install –unsafe-perm=true –allow-root –save-dev cordova</li>
</ol>
<h4 id="问题：无法用iOS虚拟机打开"><a href="#问题：无法用iOS虚拟机打开" class="headerlink" title="问题：无法用iOS虚拟机打开"></a>问题：无法用iOS虚拟机打开</h4><p>解决方案：</p>
<ol>
<li>ionic cordova emulate ios – –buildFlag=”-UseModernBuildSystem=0”</li>
</ol>
<p>如果出现这种错误：</p>
<p>CordovaError: Promise rejected with non-error: “xcode-select: error: tool ‘xcodebuild’ requires Xcode, but active developer directory ‘/Library/Developer/CommandLineTools’ is a command line tools instance\n”<br>    at cli.catch.err (/usr/local/lib/node_modules/cordova/bin/cordova:30:15)<br>    at process.internalTickCallback (internal/process/next_tick.js:77:7)<br>[ERROR] An error occurred while running subprocess cordova.</p>
<pre><code>cordova emulate ios --buildFlag=-UseModernBuildSystem=0 exited with exit code 1.

Re-running this command with the --verbose flag may provide more information.
</code></pre><p>这种情况是xcodebuild的路径不正确，解决方案：</p>
<p>sudo xcode-select –switch /Applications/Xcode.app/Contents/Developer/</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2018/12/28/2020-01-08-19/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/28/2020-01-08-19/" itemprop="url">iOS UICollectionViewCell中的图片数字复用问题</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-28T22:53:02+08:00">
                2018-12-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/28/2020-01-08-19/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/12/28/2020-01-08-19/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><p>如图所示，播放次数:2000，但是要求只能通过图片数字来实现.</p>
<p><img src="https://upload-images.jianshu.io/upload_images/11043052-526bf845fd443a3e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="15457057064366.jpg"></p>
<h3 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h3><p>这种情况下，如果仅仅通过拼接数字图片，在cell方法中实现，就会引起cell复用问题。<br>类似这种情况  播放次数:2000万 ， 其中2，0，0，0,万 为5张图片拼接而成</p>
<ol>
<li>有一种做法是将4个image拼接成一个ImageView上面，这种方式不会引起复用.</li>
<li>由于播放次数最多不会超过10位数，所以就可以申请10个imageView,来承载数字图片，后面用不到的可以将ImageView进行隐藏，这种做法也不会引起复用问题。</li>
</ol>
<p>我利用的是第二种做法，首先在cell初始化的时候对数字的imageView进行初始化操作，并打上相应的tag值，添加数据的时候，通过tag值找到对应的imageView。</p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">12</span>;++i) &#123;</span><br><span class="line">    <span class="built_in">UIImageView</span> *numberImageView = [[<span class="built_in">UIImageView</span> alloc] init];</span><br><span class="line">    numberImageView.tag=i+<span class="number">1000</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:numberImageView];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>初始化完毕后，在cell的添加数据的方法中,对数字ImageView进行Frame布局，布局方法如下：</p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">    <span class="built_in">CGFloat</span> width = <span class="built_in">CGRectGetMaxX</span>(playerImage.frame);</span><br><span class="line">    <span class="built_in">CGFloat</span> height = <span class="built_in">CGRectGetMaxY</span>(playerImage.frame);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">11</span>;++i) &#123;</span><br><span class="line">        <span class="built_in">UIImageView</span> *imageView = (<span class="built_in">UIImageView</span> *)[<span class="keyword">self</span> viewWithTag:i+<span class="number">1000</span>];</span><br><span class="line">        imageView.hidden = <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> top = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;numberStr.length; ++i) &#123;</span><br><span class="line">        <span class="built_in">UIImageView</span> *numberImageView = (<span class="built_in">UIImageView</span> *)[<span class="keyword">self</span> viewWithTag:i+<span class="number">1001</span>];</span><br><span class="line">        numberImageView.hidden = <span class="literal">NO</span>;</span><br><span class="line">        numberImageView.image = [<span class="built_in">UIImage</span> imageNamed:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"图片数字_%c"</span>,[numberStr characterAtIndex:i]]];</span><br><span class="line">        numberImageView.frame = <span class="built_in">CGRectMake</span>(width, height-numberImageView.image.size.height<span class="number">-1</span>, numberImageView.image.size.width, numberImageView.image.size.height);</span><br><span class="line">        width += numberImageView.image.size.width;</span><br><span class="line">        top = i;</span><br><span class="line">    &#125;</span><br><span class="line">    ++top;</span><br><span class="line">    <span class="keyword">if</span> (flag == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">UIImageView</span> *numberImageView = (<span class="built_in">UIImageView</span> *)[<span class="keyword">self</span> viewWithTag:top+<span class="number">1001</span>];</span><br><span class="line">        numberImageView.hidden = <span class="literal">NO</span>;</span><br><span class="line">        numberImageView.image = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"图片-万"</span>];</span><br><span class="line">        numberImageView.frame = <span class="built_in">CGRectMake</span>(width, height-numberImageView.image.size.height, numberImageView.image.size.width, numberImageView.image.size.height);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="思考与总结："><a href="#思考与总结：" class="headerlink" title="思考与总结："></a>思考与总结：</h3><p>关于Cell复用的问题，大部分都是UIView个数不一致导致的，所以一定要保证UIView在每个cell中个数是一致的，如果不显示，你要对此进行隐藏。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://leviduan.com/2018/06/27/2020-01-08-21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Levi Duan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Levi's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/27/2020-01-08-21/" itemprop="url">iOS个人中心透明导航栏简易实现</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-27T22:53:02+08:00">
                2018-06-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/06/27/2020-01-08-21/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/06/27/2020-01-08-21/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><p>任务进度的圆形区域可以点击(黄色圆圈内的部分都可以点击)</p>
<p><img src="https://upload-images.jianshu.io/upload_images/11043052-658b025b5efb171e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="15300833198943.jpg"></p>
<h3 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h3><h4 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h4><ol>
<li>通过上图红色方框的UIView增加手势，如果仅仅是通过touchView.layer.cornerRadius的方式是无法将上图红色矩形的触摸区域变成黄色的圆形触摸区域。</li>
<li>通过hitTest:withEvent方法进行处理，判断圆圈范围，响应其触摸事件。若不在圆圈内，则不处理触摸事件。</li>
</ol>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)touchPointInsideCircle:(<span class="built_in">CGPoint</span>)center radius:(<span class="built_in">CGFloat</span>)radius targetPoint:(<span class="built_in">CGPoint</span>)point</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> dist = sqrtf((point.x - center.x) * (point.x - center.x) +</span><br><span class="line">                         (point.y - center.y) * (point.y - center.y));</span><br><span class="line">    <span class="keyword">return</span> (dist &lt;= radius);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIView</span> *)hitTest:(<span class="built_in">CGPoint</span>)point withEvent:(<span class="built_in">UIEvent</span> *)event</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UIView</span> *hitView = <span class="literal">nil</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">BOOL</span> pointInRound = [<span class="keyword">self</span> touchPointInsideCircle:<span class="keyword">self</span>.touchView.center radius:<span class="number">163</span>/<span class="number">2.0</span> targetPoint:point];</span><br><span class="line">    <span class="keyword">if</span> (pointInRound) &#123;</span><br><span class="line">        hitView = <span class="keyword">self</span>.touchView;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        hitView = <span class="keyword">self</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hitView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIView</span> *)touchView</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!_touchView) &#123;</span><br><span class="line">        _touchView = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">        _touchView.frame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">163</span>, <span class="number">163</span>);</span><br><span class="line">        _touchView.centerX = <span class="keyword">self</span>.frame.size.width/<span class="number">2.0</span>;</span><br><span class="line">        _touchView.centerY = <span class="keyword">self</span>.frame.size.height/<span class="number">2.0</span>;</span><br><span class="line">        _touchView.layer.cornerRadius = <span class="number">163</span>/<span class="number">2.0</span>;</span><br><span class="line">        _touchView.layer.masksToBounds = <span class="literal">YES</span>;</span><br><span class="line">        _touchView.clipsToBounds = <span class="literal">YES</span>;</span><br><span class="line">        <span class="built_in">UITapGestureRecognizer</span> *tapGesture = [[<span class="built_in">UITapGestureRecognizer</span> alloc] initWithTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(touthVoid)];</span><br><span class="line">        [_touchView addGestureRecognizer:tapGesture];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _touchView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar1.jpg" alt="Levi Duan">
            
              <p class="site-author-name" itemprop="name">Levi Duan</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">57</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/leviduan" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.reddit.com/user/leviduan" target="_blank" title="Reddit">
                      
                        <i class="fa fa-fw fa-reddit"></i>Reddit</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://medium.com/@suiyun/responses" target="_blank" title="Medium">
                      
                        <i class="fa fa-fw fa-medium"></i>Medium</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                My Favorite
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://juejin.im/user/5a52075e6fb9a01c9d31b107/posts" title="iOS Week" target="_blank">iOS Week</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.nowcoder.com/ta/coding-interviews?page=1" title="Nowcoder" target="_blank">Nowcoder</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://leetcode.com/problemset/all/" title="Leetcode" target="_blank">Leetcode</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://dribbble.com/" title="Dribbble" target="_blank">Dribbble</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://courses.edx.org/dashboard" title="Edx" target="_blank">Edx</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-apple" aria-hidden="true"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Levi Duan</span>

  
</div>

 <span class="with-love">
    <i class="fa fa-heart" aria-hidden="true"></i>
  </span>
   <span id="busuanzi_value_site_uv"></span> visitors | <span class="with-love">
    <i class="fa fa-eye" aria-hidden="true"></i>
  </span>
  <span id="busuanzi_value_site_pv"></span> times.



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/libs/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/libs/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/libs/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/libs/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/libs/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/libs/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://leviduan-com.disqus.com/count.js" async></script>
    

    

  




	





  









<!-- LOCAL: You can save these files to your site and update links -->
    

<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://www.wenjunjiang.win/js/gitment.js"></script>

<!-- END LOCAL -->

    
      <style>
        a.gitment-editor-footer-tip { display: none; }
        .gitment-container.gitment-footer-container { display: none; }
      </style>
    

    







  





  

  

  

  
  
  
  <link rel="stylesheet" href="/libs/needsharebutton/needsharebutton.css">

  
  
  <script src="/libs/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Twitter,Facebook,Reddit,Weibo";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>

  

  

  

  

</body>
</html>
